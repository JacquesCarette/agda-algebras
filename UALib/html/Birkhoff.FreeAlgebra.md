---
layout: default
title : Birkhoff.FreeAlgebra (The Agda Universal Algebra Library)
date : 2021-01-14
author: William DeMeo
---

### <a id="the-free-algebra">The Free Algebra</a>

#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in [the universal property](Terms.Free.html#the-universal-property) section of the [Terms.Free][] module that the term algebra `𝑻 X` is the absolutely free algebra in the class 𝒜𝓁ℊ(𝑆) of all 𝑆-structures. In this section, we formalize, for a given class 𝒦 of 𝑆-algebras, the (relatively) free algebra in `S(P 𝒦)` over X.

We use the next definition to take a free algebra *for* a class 𝒦 and produce the free algebra *in* 𝒦.

Θ(𝒦, 𝑨) := {θ ∈ Con 𝑨 : 𝑨 / θ ∈ (S 𝒦)} &nbsp; &nbsp; and &nbsp; &nbsp; ψ(𝒦, 𝑨) := ⋂ Θ(𝒦, 𝑨).

Notice that Θ(𝒦, 𝑨) may be empty, in which case ψ(𝒦, 𝑨) = 1 and then 𝑨 / ψ(𝒦, 𝑨) is trivial.

The free algebra is constructed by applying the above definitions to the special case in which 𝑨 is the term algebra `𝑻 X` of 𝑆-terms over X.

Since `𝑻 X` is free for (and in) the class 𝒜𝓁ℊ(𝑆) of all 𝑆-algebras, it follows that `𝑻 X` is free for every subclass 𝒦 of 𝒜𝓁ℊ(𝑆). Of course, `𝑻 X` is not necessarily a member of 𝒦, but if we form the quotient of `𝑻 X` modulo the congruence ψ(𝒦, 𝑻 X), which we denote by `𝔉 = (𝑻 X) / ψ(𝒦, 𝑻 X)`, then it's not hard to see that 𝔉 is a subdirect product of the algebras in `{(𝑻 𝑋) / θ}`, where θ ranges over Θ(𝒦, 𝑻 X), so 𝔉 belongs to `S(P 𝒦)`, and it follows that 𝔉 satisfies all the identities satisfied by all members of 𝒦.  Indeed, for each pair `p q : 𝑻 X`, if `𝒦 ⊧ p ≈ q`, then p and q must belong to the same ψ(𝒦, 𝑻 X)-class, so p and q are identified in the quotient 𝔉.

The 𝔉 that we have just defined is called the **free algebra over** 𝒦 **generated by** `X` and (because of what we just observed) we may say that 𝔉 is free *in* `S(P 𝒦)`.<sup>[1](Birkhoff.FreeAlgebra.html#fn1)</sup>


#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

This section presents the [Birkhoff.FreeAlgebra][] module of the [Agda Universal Algebra Library][].  Here we represent 𝔉 as a type in Agda by first constructing the congruence ψ(𝒦, 𝑻 𝑋) described above.

<pre class="Agda">

<a id="2212" class="Symbol">{-#</a> <a id="2216" class="Keyword">OPTIONS</a> <a id="2224" class="Pragma">--without-K</a> <a id="2236" class="Pragma">--exact-split</a> <a id="2250" class="Pragma">--safe</a> <a id="2257" class="Symbol">#-}</a>

<a id="2262" class="Keyword">open</a> <a id="2267" class="Keyword">import</a> <a id="2274" href="Algebras.Signatures.html" class="Module">Algebras.Signatures</a> <a id="2294" class="Keyword">using</a> <a id="2300" class="Symbol">(</a><a id="2301" href="Algebras.Signatures.html#1299" class="Function">Signature</a><a id="2310" class="Symbol">;</a> <a id="2312" href="Prelude.Preliminaries.html#5600" class="Generalizable">𝓞</a><a id="2313" class="Symbol">;</a> <a id="2315" href="Universes.html#262" class="Generalizable">𝓥</a><a id="2316" class="Symbol">)</a>
<a id="2318" class="Keyword">open</a> <a id="2323" class="Keyword">import</a> <a id="2330" href="MGS-Subsingleton-Theorems.html" class="Module">MGS-Subsingleton-Theorems</a> <a id="2356" class="Keyword">using</a> <a id="2362" class="Symbol">(</a><a id="2363" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="2377" class="Symbol">)</a>

<a id="2380" class="Keyword">module</a> <a id="2387" href="Birkhoff.FreeAlgebra.html" class="Module">Birkhoff.FreeAlgebra</a> <a id="2408" class="Symbol">{</a><a id="2409" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a> <a id="2411" class="Symbol">:</a> <a id="2413" href="Algebras.Signatures.html#1299" class="Function">Signature</a> <a id="2423" href="Prelude.Preliminaries.html#5600" class="Generalizable">𝓞</a> <a id="2425" href="Universes.html#262" class="Generalizable">𝓥</a><a id="2426" class="Symbol">}{</a><a id="2428" href="Birkhoff.FreeAlgebra.html#2428" class="Bound">gfe</a> <a id="2432" class="Symbol">:</a> <a id="2434" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="2448" class="Symbol">}</a> <a id="2450" class="Keyword">where</a>

<a id="2457" class="Keyword">open</a> <a id="2462" class="Keyword">import</a> <a id="2469" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a> <a id="2492" class="Symbol">{</a><a id="2493" class="Argument">𝑆</a> <a id="2495" class="Symbol">=</a> <a id="2497" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="2498" class="Symbol">}{</a><a id="2500" href="Birkhoff.FreeAlgebra.html#2428" class="Bound">gfe</a><a id="2503" class="Symbol">}</a> <a id="2505" class="Keyword">public</a>

</pre>

We assume two ambient universes 𝓤 and 𝓧, as well as a type `X : 𝓧 ̇`. As usual, this is accomplished with the `module` directive.

<pre class="Agda">

<a id="2670" class="Keyword">module</a> <a id="the-free-algebra"></a><a id="2677" href="Birkhoff.FreeAlgebra.html#2677" class="Module">the-free-algebra</a> <a id="2694" class="Symbol">{</a><a id="2695" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="2697" href="Birkhoff.FreeAlgebra.html#2697" class="Bound">𝓧</a> <a id="2699" class="Symbol">:</a> <a id="2701" href="Agda.Primitive.html#423" class="Function">Universe</a><a id="2709" class="Symbol">}{</a><a id="2711" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a> <a id="2713" class="Symbol">:</a> <a id="2715" href="Birkhoff.FreeAlgebra.html#2697" class="Bound">𝓧</a> <a id="2717" href="Universes.html#403" class="Function Operator">̇</a><a id="2718" class="Symbol">}</a> <a id="2720" class="Keyword">where</a>

 <a id="2728" class="Comment">-- NOTATION (universe aliases for convenience and readability).</a>
 <a id="the-free-algebra.𝓸𝓿𝓾"></a><a id="2793" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="the-free-algebra.𝓸𝓿𝓾+"></a><a id="2797" href="Birkhoff.FreeAlgebra.html#2797" class="Function">𝓸𝓿𝓾+</a> <a id="the-free-algebra.𝓸𝓿𝓾++"></a><a id="2802" href="Birkhoff.FreeAlgebra.html#2802" class="Function">𝓸𝓿𝓾++</a> <a id="2808" class="Symbol">:</a> <a id="2810" href="Agda.Primitive.html#423" class="Function">Universe</a>
 <a id="2820" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="2824" class="Symbol">=</a> <a id="2826" href="Algebras.Products.html#1918" class="Function">ov</a> <a id="2829" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a>
 <a id="2832" href="Birkhoff.FreeAlgebra.html#2797" class="Function">𝓸𝓿𝓾+</a> <a id="2837" class="Symbol">=</a> <a id="2839" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="2843" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>
 <a id="2846" href="Birkhoff.FreeAlgebra.html#2802" class="Function">𝓸𝓿𝓾++</a> <a id="2852" class="Symbol">=</a> <a id="2854" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="2858" href="Agda.Primitive.html#606" class="Function Operator">⁺</a> <a id="2860" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>
</pre>

One could define the collection `𝑻img` of all homomorphic images of the term algebra that belong to a given class 𝒦 as follows.

<pre class="Agda">

 <a id="3018" class="Comment">-- H (𝑻 X)  (hom images of 𝑻 X)</a>
 <a id="the-free-algebra.𝑻img"></a><a id="3051" href="Birkhoff.FreeAlgebra.html#3051" class="Function">𝑻img</a> <a id="3056" class="Symbol">:</a> <a id="3058" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="3063" class="Symbol">(</a><a id="3064" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3072" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="3074" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="3075" class="Symbol">)</a> <a id="3077" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="3081" class="Symbol">→</a> <a id="3083" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a> <a id="3087" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="3089" href="Birkhoff.FreeAlgebra.html#2697" class="Bound">𝓧</a> <a id="3091" href="Agda.Primitive.html#606" class="Function Operator">⁺</a> <a id="3093" href="Universes.html#403" class="Function Operator">̇</a>
 <a id="3096" href="Birkhoff.FreeAlgebra.html#3051" class="Function">𝑻img</a> <a id="3101" href="Birkhoff.FreeAlgebra.html#3101" class="Bound">𝒦</a> <a id="3103" class="Symbol">=</a> <a id="3105" href="MGS-MLTT.html#3074" class="Function">Σ</a> <a id="3107" href="Birkhoff.FreeAlgebra.html#3107" class="Bound">𝑨</a> <a id="3109" href="MGS-MLTT.html#3074" class="Function">꞉</a> <a id="3111" class="Symbol">(</a><a id="3112" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3120" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="3122" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="3123" class="Symbol">)</a> <a id="3125" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="3127" href="MGS-MLTT.html#3074" class="Function">Σ</a> <a id="3129" href="Birkhoff.FreeAlgebra.html#3129" class="Bound">ϕ</a> <a id="3131" href="MGS-MLTT.html#3074" class="Function">꞉</a> <a id="3133" href="Homomorphisms.Basic.html#2343" class="Function">hom</a> <a id="3137" class="Symbol">(</a><a id="3138" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="3140" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="3141" class="Symbol">)</a> <a id="3143" href="Birkhoff.FreeAlgebra.html#3107" class="Bound">𝑨</a> <a id="3145" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="3147" class="Symbol">(</a><a id="3148" href="Birkhoff.FreeAlgebra.html#3107" class="Bound">𝑨</a> <a id="3150" href="Relations.Unary.html#1958" class="Function Operator">∈</a> <a id="3152" href="Birkhoff.FreeAlgebra.html#3101" class="Bound">𝒦</a><a id="3153" class="Symbol">)</a> <a id="3155" href="MGS-MLTT.html#3515" class="Function Operator">×</a> <a id="3157" href="Prelude.Inverses.html#2632" class="Function">Epic</a> <a id="3162" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="3164" href="Birkhoff.FreeAlgebra.html#3129" class="Bound">ϕ</a> <a id="3166" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a>

</pre>

The inhabitants of this Sigma type represent algebras 𝑨 ∈ 𝒦 such that there exists a surjective homomorphism ϕ : hom (𝑻 X) 𝑨. Thus, 𝑻img represents the collection of all homomorphic images of 𝑻 X that belong to 𝒦.  Of course, this is the entire class 𝒦, since the term algebra is absolutely free. Nonetheless, this representation of 𝒦 is useful since it endows each element with extra information.  Indeed, each inhabitant of 𝑻img 𝒦 is a quadruple, (𝑨 , ϕ , ka, p), where 𝑨 is an 𝑆-algebra, ϕ is a homomorphism from 𝑻 X to 𝑨, ka is a proof that 𝑨 belongs to 𝒦, and p is a proof that the underlying map ∣ ϕ ∣ is epic.

The next function, `mkti`, that takes an arbitrary algebra 𝑨 in 𝒦 and a mapping X → ∣ 𝑨 ∣ and returns the corresponding quadruple in `𝑻img 𝒦`.

<pre class="Agda">

 <a id="the-free-algebra.mkti"></a><a id="3958" href="Birkhoff.FreeAlgebra.html#3958" class="Function">mkti</a> <a id="3963" class="Symbol">:</a> <a id="3965" class="Symbol">{</a><a id="3966" href="Birkhoff.FreeAlgebra.html#3966" class="Bound">𝒦</a> <a id="3968" class="Symbol">:</a> <a id="3970" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="3975" class="Symbol">(</a><a id="3976" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="3984" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="3986" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="3987" class="Symbol">)</a><a id="3988" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="3991" class="Symbol">}(</a><a id="3993" href="Birkhoff.FreeAlgebra.html#3993" class="Bound">𝑨</a> <a id="3995" class="Symbol">:</a> <a id="3997" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4005" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="4007" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="4008" class="Symbol">)(</a><a id="4010" href="Birkhoff.FreeAlgebra.html#4010" class="Bound">h</a> <a id="4012" class="Symbol">:</a> <a id="4014" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a> <a id="4016" class="Symbol">→</a> <a id="4018" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4020" href="Birkhoff.FreeAlgebra.html#3993" class="Bound">𝑨</a> <a id="4022" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a><a id="4023" class="Symbol">)</a> <a id="4025" class="Symbol">→</a> <a id="4027" href="Prelude.Inverses.html#2632" class="Function">Epic</a> <a id="4032" href="Birkhoff.FreeAlgebra.html#4010" class="Bound">h</a> <a id="4034" class="Symbol">→</a> <a id="4036" href="Birkhoff.FreeAlgebra.html#3993" class="Bound">𝑨</a> <a id="4038" href="Relations.Unary.html#1958" class="Function Operator">∈</a> <a id="4040" href="Birkhoff.FreeAlgebra.html#3966" class="Bound">𝒦</a> <a id="4042" class="Symbol">→</a> <a id="4044" href="Birkhoff.FreeAlgebra.html#3051" class="Function">𝑻img</a> <a id="4049" href="Birkhoff.FreeAlgebra.html#3966" class="Bound">𝒦</a>
 <a id="4052" href="Birkhoff.FreeAlgebra.html#3958" class="Function">mkti</a> <a id="4057" href="Birkhoff.FreeAlgebra.html#4057" class="Bound">𝑨</a> <a id="4059" href="Birkhoff.FreeAlgebra.html#4059" class="Bound">h</a> <a id="4061" href="Birkhoff.FreeAlgebra.html#4061" class="Bound">hE</a> <a id="4064" href="Birkhoff.FreeAlgebra.html#4064" class="Bound">ka</a> <a id="4067" class="Symbol">=</a> <a id="4069" class="Symbol">(</a><a id="4070" href="Birkhoff.FreeAlgebra.html#4057" class="Bound">𝑨</a> <a id="4072" href="Prelude.Preliminaries.html#14564" class="InductiveConstructor Operator">,</a> <a id="4074" href="Terms.Basic.html#4577" class="Function">lift-hom</a> <a id="4083" href="Birkhoff.FreeAlgebra.html#4057" class="Bound">𝑨</a> <a id="4085" href="Birkhoff.FreeAlgebra.html#4059" class="Bound">h</a> <a id="4087" href="Prelude.Preliminaries.html#14564" class="InductiveConstructor Operator">,</a> <a id="4089" href="Birkhoff.FreeAlgebra.html#4064" class="Bound">ka</a> <a id="4092" href="Prelude.Preliminaries.html#14564" class="InductiveConstructor Operator">,</a> <a id="4094" href="Terms.Basic.html#5788" class="Function">lift-of-epi-is-epi</a> <a id="4113" href="Birkhoff.FreeAlgebra.html#4061" class="Bound">hE</a><a id="4115" class="Symbol">)</a>

</pre>

We now construct the congruence relation `ψCon`, modulo which `𝑻 X` will yield the relatively free algebra, `𝔉 𝒦 X := 𝑻 X ╱ ψCon`. We start by letting ψ be the collection of all identities (p, q) satisfied by all subalgebras of algebras in 𝒦.

<pre class="Agda">

 <a id="the-free-algebra.ψ"></a><a id="4389" href="Birkhoff.FreeAlgebra.html#4389" class="Function">ψ</a> <a id="4391" class="Symbol">:</a> <a id="4393" class="Symbol">(</a><a id="4394" href="Birkhoff.FreeAlgebra.html#4394" class="Bound">𝒦</a> <a id="4396" class="Symbol">:</a> <a id="4398" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="4403" class="Symbol">(</a><a id="4404" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4412" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="4414" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="4415" class="Symbol">)</a> <a id="4417" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="4420" class="Symbol">)</a> <a id="4422" class="Symbol">→</a> <a id="4424" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="4429" class="Symbol">(</a><a id="4430" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4432" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="4434" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a> <a id="4436" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4438" href="MGS-MLTT.html#3515" class="Function Operator">×</a> <a id="4440" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4442" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="4444" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a> <a id="4446" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a><a id="4447" class="Symbol">)</a> <a id="4449" class="Symbol">(</a><a id="4450" href="Birkhoff.FreeAlgebra.html#2697" class="Bound">𝓧</a> <a id="4452" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="4454" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="4457" class="Symbol">)</a>
 <a id="4460" href="Birkhoff.FreeAlgebra.html#4389" class="Function">ψ</a> <a id="4462" href="Birkhoff.FreeAlgebra.html#4462" class="Bound">𝒦</a> <a id="4464" class="Symbol">(</a><a id="4465" href="Birkhoff.FreeAlgebra.html#4465" class="Bound">p</a> <a id="4467" href="Prelude.Preliminaries.html#14564" class="InductiveConstructor Operator">,</a> <a id="4469" href="Birkhoff.FreeAlgebra.html#4469" class="Bound">q</a><a id="4470" class="Symbol">)</a> <a id="4472" class="Symbol">=</a> <a id="4474" class="Symbol">∀(</a><a id="4476" href="Birkhoff.FreeAlgebra.html#4476" class="Bound">𝑨</a> <a id="4478" class="Symbol">:</a> <a id="4480" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4488" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="4490" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="4491" class="Symbol">)(</a><a id="4493" href="Birkhoff.FreeAlgebra.html#4493" class="Bound">sA</a> <a id="4496" class="Symbol">:</a> <a id="4498" href="Birkhoff.FreeAlgebra.html#4476" class="Bound">𝑨</a> <a id="4500" href="Relations.Unary.html#1958" class="Function Operator">∈</a> <a id="4502" href="Varieties.Varieties.html#2944" class="Datatype">S</a><a id="4503" class="Symbol">{</a><a id="4504" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a><a id="4505" class="Symbol">}{</a><a id="4507" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a><a id="4508" class="Symbol">}</a> <a id="4510" href="Birkhoff.FreeAlgebra.html#4462" class="Bound">𝒦</a><a id="4511" class="Symbol">)(</a><a id="4513" href="Birkhoff.FreeAlgebra.html#4513" class="Bound">h</a> <a id="4515" class="Symbol">:</a> <a id="4517" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a> <a id="4519" class="Symbol">→</a> <a id="4521" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4523" href="Birkhoff.FreeAlgebra.html#4476" class="Bound">𝑨</a> <a id="4525" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4527" class="Symbol">)</a>
                 <a id="4546" class="Symbol">→</a>  <a id="4549" class="Symbol">(</a><a id="4550" href="Terms.Basic.html#4326" class="Function">free-lift</a> <a id="4560" href="Birkhoff.FreeAlgebra.html#4476" class="Bound">𝑨</a> <a id="4562" href="Birkhoff.FreeAlgebra.html#4513" class="Bound">h</a><a id="4563" class="Symbol">)</a> <a id="4565" href="Birkhoff.FreeAlgebra.html#4465" class="Bound">p</a> <a id="4567" href="Prelude.Inverses.html#620" class="Datatype Operator">≡</a> <a id="4569" class="Symbol">(</a><a id="4570" href="Terms.Basic.html#4326" class="Function">free-lift</a> <a id="4580" href="Birkhoff.FreeAlgebra.html#4476" class="Bound">𝑨</a> <a id="4582" href="Birkhoff.FreeAlgebra.html#4513" class="Bound">h</a><a id="4583" class="Symbol">)</a> <a id="4585" href="Birkhoff.FreeAlgebra.html#4469" class="Bound">q</a>

</pre>

We convert the predicate ψ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

 <a id="the-free-algebra.ψRel"></a><a id="4714" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="4719" class="Symbol">:</a> <a id="4721" class="Symbol">(</a><a id="4722" href="Birkhoff.FreeAlgebra.html#4722" class="Bound">𝒦</a> <a id="4724" class="Symbol">:</a> <a id="4726" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="4731" class="Symbol">(</a><a id="4732" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="4740" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="4742" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="4743" class="Symbol">)</a> <a id="4745" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="4748" class="Symbol">)</a> <a id="4750" class="Symbol">→</a> <a id="4752" href="Relations.Binary.html#1774" class="Function">Rel</a> <a id="4756" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4758" class="Symbol">(</a><a id="4759" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="4761" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="4762" class="Symbol">)</a> <a id="4764" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="4766" class="Symbol">(</a><a id="4767" href="Birkhoff.FreeAlgebra.html#2697" class="Bound">𝓧</a> <a id="4769" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="4771" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="4774" class="Symbol">)</a>
 <a id="4777" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="4782" href="Birkhoff.FreeAlgebra.html#4782" class="Bound">𝒦</a> <a id="4784" href="Birkhoff.FreeAlgebra.html#4784" class="Bound">p</a> <a id="4786" href="Birkhoff.FreeAlgebra.html#4786" class="Bound">q</a> <a id="4788" class="Symbol">=</a> <a id="4790" href="Birkhoff.FreeAlgebra.html#4389" class="Function">ψ</a> <a id="4792" href="Birkhoff.FreeAlgebra.html#4782" class="Bound">𝒦</a> <a id="4794" class="Symbol">(</a><a id="4795" href="Birkhoff.FreeAlgebra.html#4784" class="Bound">p</a> <a id="4797" href="Prelude.Preliminaries.html#14564" class="InductiveConstructor Operator">,</a> <a id="4799" href="Birkhoff.FreeAlgebra.html#4786" class="Bound">q</a><a id="4800" class="Symbol">)</a>

</pre>

To express `ψRel` as a congruence of the term algebra `𝑻 X`, we must prove that

1. `ψRel` is compatible with the operations of `𝑻 X` (which are jsut the terms themselves) and
2. `ψRel` it is an equivalence relation.

<pre class="Agda">

 <a id="the-free-algebra.ψcompatible"></a><a id="5048" href="Birkhoff.FreeAlgebra.html#5048" class="Function">ψcompatible</a> <a id="5060" class="Symbol">:</a> <a id="5062" class="Symbol">(</a><a id="5063" href="Birkhoff.FreeAlgebra.html#5063" class="Bound">𝒦</a> <a id="5065" class="Symbol">:</a> <a id="5067" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="5072" class="Symbol">(</a><a id="5073" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5081" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="5083" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="5084" class="Symbol">)</a> <a id="5086" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="5089" class="Symbol">)</a> <a id="5091" class="Symbol">→</a> <a id="5093" href="Algebras.Algebras.html#5921" class="Function">compatible</a> <a id="5104" class="Symbol">(</a><a id="5105" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5107" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5108" class="Symbol">)(</a><a id="5110" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="5115" href="Birkhoff.FreeAlgebra.html#5063" class="Bound">𝒦</a><a id="5116" class="Symbol">)</a>
 <a id="5119" href="Birkhoff.FreeAlgebra.html#5048" class="Function">ψcompatible</a> <a id="5131" href="Birkhoff.FreeAlgebra.html#5131" class="Bound">𝒦</a> <a id="5133" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5135" class="Symbol">{</a><a id="5136" href="Birkhoff.FreeAlgebra.html#5136" class="Bound">i</a><a id="5137" class="Symbol">}</a> <a id="5139" class="Symbol">{</a><a id="5140" href="Birkhoff.FreeAlgebra.html#5140" class="Bound">j</a><a id="5141" class="Symbol">}</a> <a id="5143" href="Birkhoff.FreeAlgebra.html#5143" class="Bound">iψj</a> <a id="5147" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a> <a id="5149" href="Birkhoff.FreeAlgebra.html#5149" class="Bound">sA</a> <a id="5152" href="Birkhoff.FreeAlgebra.html#5152" class="Bound">h</a> <a id="5154" class="Symbol">=</a> <a id="5156" href="Birkhoff.FreeAlgebra.html#5209" class="Function">γ</a>
  <a id="5160" class="Keyword">where</a>
   <a id="5169" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5171" class="Symbol">:</a> <a id="5173" href="Homomorphisms.Basic.html#2343" class="Function">hom</a> <a id="5177" class="Symbol">(</a><a id="5178" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5180" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5181" class="Symbol">)</a> <a id="5183" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a>
   <a id="5188" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5190" class="Symbol">=</a> <a id="5192" href="Terms.Basic.html#4577" class="Function">lift-hom</a> <a id="5201" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a> <a id="5203" href="Birkhoff.FreeAlgebra.html#5152" class="Bound">h</a>

   <a id="5209" href="Birkhoff.FreeAlgebra.html#5209" class="Function">γ</a> <a id="5211" class="Symbol">:</a> <a id="5213" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5215" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5217" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5219" class="Symbol">((</a><a id="5221" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5223" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5225" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5227" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5228" class="Symbol">)</a> <a id="5230" href="Birkhoff.FreeAlgebra.html#5136" class="Bound">i</a><a id="5231" class="Symbol">)</a> <a id="5233" href="Prelude.Inverses.html#620" class="Datatype Operator">≡</a> <a id="5235" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5237" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5239" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5241" class="Symbol">((</a><a id="5243" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5245" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5247" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5249" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5250" class="Symbol">)</a> <a id="5252" href="Birkhoff.FreeAlgebra.html#5140" class="Bound">j</a><a id="5253" class="Symbol">)</a>
   <a id="5258" href="Birkhoff.FreeAlgebra.html#5209" class="Function">γ</a> <a id="5260" class="Symbol">=</a> <a id="5262" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5264" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5266" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5268" class="Symbol">((</a><a id="5270" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5272" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5274" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5276" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5277" class="Symbol">)</a> <a id="5279" href="Birkhoff.FreeAlgebra.html#5136" class="Bound">i</a><a id="5280" class="Symbol">)</a> <a id="5282" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="5285" href="Prelude.Preliminaries.html#13647" class="Function Operator">∥</a> <a id="5287" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5289" href="Prelude.Preliminaries.html#13647" class="Function Operator">∥</a> <a id="5291" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5293" href="Birkhoff.FreeAlgebra.html#5136" class="Bound">i</a> <a id="5295" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="5304" class="Symbol">(</a><a id="5305" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5307" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5309" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a><a id="5310" class="Symbol">)</a> <a id="5312" class="Symbol">(</a><a id="5313" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5315" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5317" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5319" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="5321" href="Birkhoff.FreeAlgebra.html#5136" class="Bound">i</a><a id="5322" class="Symbol">)</a> <a id="5324" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="5327" href="MGS-MLTT.html#6613" class="Function">ap</a> <a id="5330" class="Symbol">(</a><a id="5331" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5333" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5335" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a><a id="5336" class="Symbol">)</a> <a id="5338" class="Symbol">(</a><a id="5339" href="Birkhoff.FreeAlgebra.html#2428" class="Bound">gfe</a> <a id="5343" class="Symbol">λ</a> <a id="5345" href="Birkhoff.FreeAlgebra.html#5345" class="Bound">x</a> <a id="5347" class="Symbol">→</a> <a id="5349" class="Symbol">((</a><a id="5351" href="Birkhoff.FreeAlgebra.html#5143" class="Bound">iψj</a> <a id="5355" href="Birkhoff.FreeAlgebra.html#5345" class="Bound">x</a><a id="5356" class="Symbol">)</a> <a id="5358" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a> <a id="5360" href="Birkhoff.FreeAlgebra.html#5149" class="Bound">sA</a> <a id="5363" href="Birkhoff.FreeAlgebra.html#5152" class="Bound">h</a><a id="5364" class="Symbol">))</a> <a id="5367" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="5376" class="Symbol">(</a><a id="5377" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5379" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5381" href="Birkhoff.FreeAlgebra.html#5147" class="Bound">𝑨</a><a id="5382" class="Symbol">)</a> <a id="5384" class="Symbol">(</a><a id="5385" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5387" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5389" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5391" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="5393" href="Birkhoff.FreeAlgebra.html#5140" class="Bound">j</a><a id="5394" class="Symbol">)</a> <a id="5396" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="5399" class="Symbol">(</a><a id="5400" href="Prelude.Preliminaries.html#13647" class="Function Operator">∥</a> <a id="5402" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5404" href="Prelude.Preliminaries.html#13647" class="Function Operator">∥</a> <a id="5406" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5408" href="Birkhoff.FreeAlgebra.html#5140" class="Bound">j</a><a id="5409" class="Symbol">)</a><a id="5410" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="5413" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="5422" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5424" href="Birkhoff.FreeAlgebra.html#5169" class="Function">ϕ</a> <a id="5426" href="Prelude.Preliminaries.html#13569" class="Function Operator">∣</a> <a id="5428" class="Symbol">((</a><a id="5430" href="Birkhoff.FreeAlgebra.html#5133" class="Bound">f</a> <a id="5432" href="Algebras.Algebras.html#2997" class="Function Operator">̂</a> <a id="5434" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="5436" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="5437" class="Symbol">)</a> <a id="5439" href="Birkhoff.FreeAlgebra.html#5140" class="Bound">j</a><a id="5440" class="Symbol">)</a> <a id="5442" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

 <a id="the-free-algebra.ψRefl"></a><a id="5446" href="Birkhoff.FreeAlgebra.html#5446" class="Function">ψRefl</a> <a id="5452" class="Symbol">:</a> <a id="5454" class="Symbol">{</a><a id="5455" href="Birkhoff.FreeAlgebra.html#5455" class="Bound">𝒦</a> <a id="5457" class="Symbol">:</a> <a id="5459" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="5464" class="Symbol">(</a><a id="5465" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5473" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="5475" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="5476" class="Symbol">)</a> <a id="5478" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="5481" class="Symbol">}</a> <a id="5483" class="Symbol">→</a> <a id="5485" href="Relations.Quotients.html#918" class="Function">reflexive</a> <a id="5495" class="Symbol">(</a><a id="5496" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="5501" href="Birkhoff.FreeAlgebra.html#5455" class="Bound">𝒦</a><a id="5502" class="Symbol">)</a>
 <a id="5505" href="Birkhoff.FreeAlgebra.html#5446" class="Function">ψRefl</a> <a id="5511" class="Symbol">=</a> <a id="5513" class="Symbol">λ</a> <a id="5515" href="Birkhoff.FreeAlgebra.html#5515" class="Bound">x</a> <a id="5517" href="Birkhoff.FreeAlgebra.html#5517" class="Bound">𝑪</a> <a id="5519" href="Birkhoff.FreeAlgebra.html#5519" class="Bound">ϕ</a> <a id="5521" href="Birkhoff.FreeAlgebra.html#5521" class="Bound">h</a> <a id="5523" class="Symbol">→</a> <a id="5525" href="Prelude.Inverses.html#634" class="InductiveConstructor">𝓇ℯ𝒻𝓁</a>

 <a id="the-free-algebra.ψSymm"></a><a id="5532" href="Birkhoff.FreeAlgebra.html#5532" class="Function">ψSymm</a> <a id="5538" class="Symbol">:</a> <a id="5540" class="Symbol">{</a><a id="5541" href="Birkhoff.FreeAlgebra.html#5541" class="Bound">𝒦</a> <a id="5543" class="Symbol">:</a> <a id="5545" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="5550" class="Symbol">(</a><a id="5551" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5559" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="5561" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="5562" class="Symbol">)</a> <a id="5564" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="5567" class="Symbol">}</a> <a id="5569" class="Symbol">→</a> <a id="5571" href="Relations.Quotients.html#1006" class="Function">symmetric</a> <a id="5581" class="Symbol">(</a><a id="5582" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="5587" href="Birkhoff.FreeAlgebra.html#5541" class="Bound">𝒦</a><a id="5588" class="Symbol">)</a>
 <a id="5591" href="Birkhoff.FreeAlgebra.html#5532" class="Function">ψSymm</a> <a id="5597" href="Birkhoff.FreeAlgebra.html#5597" class="Bound">p</a> <a id="5599" href="Birkhoff.FreeAlgebra.html#5599" class="Bound">q</a> <a id="5601" href="Birkhoff.FreeAlgebra.html#5601" class="Bound">pψRelq</a> <a id="5608" href="Birkhoff.FreeAlgebra.html#5608" class="Bound">𝑪</a> <a id="5610" href="Birkhoff.FreeAlgebra.html#5610" class="Bound">ϕ</a> <a id="5612" href="Birkhoff.FreeAlgebra.html#5612" class="Bound">h</a> <a id="5614" class="Symbol">=</a> <a id="5616" class="Symbol">(</a><a id="5617" href="Birkhoff.FreeAlgebra.html#5601" class="Bound">pψRelq</a> <a id="5624" href="Birkhoff.FreeAlgebra.html#5608" class="Bound">𝑪</a> <a id="5626" href="Birkhoff.FreeAlgebra.html#5610" class="Bound">ϕ</a> <a id="5628" href="Birkhoff.FreeAlgebra.html#5612" class="Bound">h</a><a id="5629" class="Symbol">)</a><a id="5630" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>

 <a id="the-free-algebra.ψTrans"></a><a id="5635" href="Birkhoff.FreeAlgebra.html#5635" class="Function">ψTrans</a> <a id="5642" class="Symbol">:</a> <a id="5644" class="Symbol">{</a><a id="5645" href="Birkhoff.FreeAlgebra.html#5645" class="Bound">𝒦</a> <a id="5647" class="Symbol">:</a> <a id="5649" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="5654" class="Symbol">(</a><a id="5655" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5663" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="5665" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="5666" class="Symbol">)</a> <a id="5668" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="5671" class="Symbol">}</a> <a id="5673" class="Symbol">→</a> <a id="5675" href="Relations.Quotients.html#1218" class="Function">transitive</a> <a id="5686" class="Symbol">(</a><a id="5687" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="5692" href="Birkhoff.FreeAlgebra.html#5645" class="Bound">𝒦</a><a id="5693" class="Symbol">)</a>
 <a id="5696" href="Birkhoff.FreeAlgebra.html#5635" class="Function">ψTrans</a> <a id="5703" href="Birkhoff.FreeAlgebra.html#5703" class="Bound">p</a> <a id="5705" href="Birkhoff.FreeAlgebra.html#5705" class="Bound">q</a> <a id="5707" href="Birkhoff.FreeAlgebra.html#5707" class="Bound">r</a> <a id="5709" href="Birkhoff.FreeAlgebra.html#5709" class="Bound">pψq</a> <a id="5713" href="Birkhoff.FreeAlgebra.html#5713" class="Bound">qψr</a> <a id="5717" href="Birkhoff.FreeAlgebra.html#5717" class="Bound">𝑪</a> <a id="5719" href="Birkhoff.FreeAlgebra.html#5719" class="Bound">ϕ</a> <a id="5721" href="Birkhoff.FreeAlgebra.html#5721" class="Bound">h</a> <a id="5723" class="Symbol">=</a> <a id="5725" class="Symbol">(</a><a id="5726" href="Birkhoff.FreeAlgebra.html#5709" class="Bound">pψq</a> <a id="5730" href="Birkhoff.FreeAlgebra.html#5717" class="Bound">𝑪</a> <a id="5732" href="Birkhoff.FreeAlgebra.html#5719" class="Bound">ϕ</a> <a id="5734" href="Birkhoff.FreeAlgebra.html#5721" class="Bound">h</a><a id="5735" class="Symbol">)</a> <a id="5737" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="5739" class="Symbol">(</a><a id="5740" href="Birkhoff.FreeAlgebra.html#5713" class="Bound">qψr</a> <a id="5744" href="Birkhoff.FreeAlgebra.html#5717" class="Bound">𝑪</a> <a id="5746" href="Birkhoff.FreeAlgebra.html#5719" class="Bound">ϕ</a> <a id="5748" href="Birkhoff.FreeAlgebra.html#5721" class="Bound">h</a><a id="5749" class="Symbol">)</a>

 <a id="the-free-algebra.ψIsEquivalence"></a><a id="5753" href="Birkhoff.FreeAlgebra.html#5753" class="Function">ψIsEquivalence</a> <a id="5768" class="Symbol">:</a> <a id="5770" class="Symbol">{</a><a id="5771" href="Birkhoff.FreeAlgebra.html#5771" class="Bound">𝒦</a> <a id="5773" class="Symbol">:</a> <a id="5775" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="5780" class="Symbol">(</a><a id="5781" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="5789" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="5791" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="5792" class="Symbol">)</a> <a id="5794" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="5797" class="Symbol">}</a> <a id="5799" class="Symbol">→</a> <a id="5801" href="Relations.Quotients.html#1913" class="Record">IsEquivalence</a> <a id="5815" class="Symbol">(</a><a id="5816" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="5821" href="Birkhoff.FreeAlgebra.html#5771" class="Bound">𝒦</a><a id="5822" class="Symbol">)</a>
 <a id="5825" href="Birkhoff.FreeAlgebra.html#5753" class="Function">ψIsEquivalence</a> <a id="5840" class="Symbol">=</a> <a id="5842" class="Keyword">record</a> <a id="5849" class="Symbol">{</a> <a id="5851" href="Relations.Quotients.html#1981" class="Field">rfl</a> <a id="5855" class="Symbol">=</a> <a id="5857" href="Birkhoff.FreeAlgebra.html#5446" class="Function">ψRefl</a> <a id="5863" class="Symbol">;</a> <a id="5865" href="Relations.Quotients.html#2006" class="Field">sym</a> <a id="5869" class="Symbol">=</a> <a id="5871" href="Birkhoff.FreeAlgebra.html#5532" class="Function">ψSymm</a> <a id="5877" class="Symbol">;</a> <a id="5879" href="Relations.Quotients.html#2031" class="Field">trans</a> <a id="5885" class="Symbol">=</a> <a id="5887" href="Birkhoff.FreeAlgebra.html#5635" class="Function">ψTrans</a> <a id="5894" class="Symbol">}</a>

</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ψCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

 <a id="the-free-algebra.ψCon"></a><a id="6195" href="Birkhoff.FreeAlgebra.html#6195" class="Function">ψCon</a> <a id="6200" class="Symbol">:</a> <a id="6202" class="Symbol">(</a><a id="6203" href="Birkhoff.FreeAlgebra.html#6203" class="Bound">𝒦</a> <a id="6205" class="Symbol">:</a> <a id="6207" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="6212" class="Symbol">(</a><a id="6213" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6221" href="Birkhoff.FreeAlgebra.html#2695" class="Bound">𝓤</a> <a id="6223" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="6224" class="Symbol">)</a> <a id="6226" href="Birkhoff.FreeAlgebra.html#2793" class="Function">𝓸𝓿𝓾</a><a id="6229" class="Symbol">)</a> <a id="6231" class="Symbol">→</a> <a id="6233" href="Algebras.Congruences.html#1106" class="Record">Congruence</a> <a id="6244" class="Symbol">(</a><a id="6245" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="6247" href="Birkhoff.FreeAlgebra.html#2711" class="Bound">X</a><a id="6248" class="Symbol">)</a>
 <a id="6251" href="Birkhoff.FreeAlgebra.html#6195" class="Function">ψCon</a> <a id="6256" href="Birkhoff.FreeAlgebra.html#6256" class="Bound">𝒦</a> <a id="6258" class="Symbol">=</a> <a id="6260" href="Algebras.Congruences.html#1185" class="InductiveConstructor">mkcon</a> <a id="6266" class="Symbol">(</a><a id="6267" href="Birkhoff.FreeAlgebra.html#4714" class="Function">ψRel</a> <a id="6272" href="Birkhoff.FreeAlgebra.html#6256" class="Bound">𝒦</a><a id="6273" class="Symbol">)</a> <a id="6275" class="Symbol">(</a><a id="6276" href="Birkhoff.FreeAlgebra.html#5048" class="Function">ψcompatible</a> <a id="6288" href="Birkhoff.FreeAlgebra.html#6256" class="Bound">𝒦</a><a id="6289" class="Symbol">)</a> <a id="6291" href="Birkhoff.FreeAlgebra.html#5753" class="Function">ψIsEquivalence</a>

</pre>


Finally, we are ready to define the type representing the relatively free algebra in Agda.  We denote this type by 𝔉 and define it as the quotient `𝑻 X ╱ (ψCon 𝒦)`.

<pre class="Agda">

<a id="6500" class="Keyword">module</a> <a id="the-relatively-free-algebra"></a><a id="6507" href="Birkhoff.FreeAlgebra.html#6507" class="Module">the-relatively-free-algebra</a>
 <a id="6536" class="Symbol">{</a><a id="6537" href="Birkhoff.FreeAlgebra.html#6537" class="Bound">𝓤</a> <a id="6539" href="Birkhoff.FreeAlgebra.html#6539" class="Bound">𝓧</a> <a id="6541" class="Symbol">:</a> <a id="6543" href="Agda.Primitive.html#423" class="Function">Universe</a><a id="6551" class="Symbol">}{</a><a id="6553" href="Birkhoff.FreeAlgebra.html#6553" class="Bound">X</a> <a id="6555" class="Symbol">:</a> <a id="6557" href="Birkhoff.FreeAlgebra.html#6539" class="Bound">𝓧</a> <a id="6559" href="Universes.html#403" class="Function Operator">̇</a><a id="6560" class="Symbol">}</a> <a id="6562" class="Symbol">{</a><a id="6563" href="Birkhoff.FreeAlgebra.html#6563" class="Bound">𝒦</a> <a id="6565" class="Symbol">:</a> <a id="6567" href="Relations.Unary.html#959" class="Function">Pred</a> <a id="6572" class="Symbol">(</a><a id="6573" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6581" href="Birkhoff.FreeAlgebra.html#6537" class="Bound">𝓤</a> <a id="6583" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a><a id="6584" class="Symbol">)</a> <a id="6586" class="Symbol">(</a><a id="6587" href="Algebras.Products.html#1918" class="Function">ov</a> <a id="6590" href="Birkhoff.FreeAlgebra.html#6537" class="Bound">𝓤</a><a id="6591" class="Symbol">)}</a> <a id="6594" class="Keyword">where</a>

 <a id="6602" class="Keyword">open</a> <a id="6607" href="Birkhoff.FreeAlgebra.html#2677" class="Module">the-free-algebra</a><a id="6623" class="Symbol">{</a><a id="6624" class="Argument">𝓤</a> <a id="6626" class="Symbol">=</a> <a id="6628" href="Birkhoff.FreeAlgebra.html#6537" class="Bound">𝓤</a><a id="6629" class="Symbol">}{</a><a id="6631" class="Argument">𝓧</a> <a id="6633" class="Symbol">=</a> <a id="6635" href="Birkhoff.FreeAlgebra.html#6539" class="Bound">𝓧</a><a id="6636" class="Symbol">}{</a><a id="6638" class="Argument">X</a> <a id="6640" class="Symbol">=</a> <a id="6642" href="Birkhoff.FreeAlgebra.html#6553" class="Bound">X</a><a id="6643" class="Symbol">}</a>

 <a id="the-relatively-free-algebra.𝓕"></a><a id="6647" href="Birkhoff.FreeAlgebra.html#6647" class="Function">𝓕</a> <a id="6649" class="Symbol">:</a> <a id="6651" href="Agda.Primitive.html#423" class="Function">Universe</a> <a id="6660" class="Comment">-- (universe level of the relatively free algebra)</a>
 <a id="6712" href="Birkhoff.FreeAlgebra.html#6647" class="Function">𝓕</a> <a id="6714" class="Symbol">=</a> <a id="6716" class="Symbol">(</a><a id="6717" href="Birkhoff.FreeAlgebra.html#6539" class="Bound">𝓧</a> <a id="6719" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="6721" href="Algebras.Products.html#1918" class="Function">ov</a> <a id="6724" href="Birkhoff.FreeAlgebra.html#6537" class="Bound">𝓤</a><a id="6725" class="Symbol">)</a> <a id="6727" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>

 <a id="the-relatively-free-algebra.𝔉"></a><a id="6731" href="Birkhoff.FreeAlgebra.html#6731" class="Function">𝔉</a> <a id="6733" class="Symbol">:</a> <a id="6735" href="Algebras.Algebras.html#694" class="Function">Algebra</a> <a id="6743" href="Birkhoff.FreeAlgebra.html#6647" class="Function">𝓕</a> <a id="6745" href="Birkhoff.FreeAlgebra.html#2409" class="Bound">𝑆</a>
 <a id="6748" href="Birkhoff.FreeAlgebra.html#6731" class="Function">𝔉</a> <a id="6750" class="Symbol">=</a>  <a id="6753" href="Terms.Basic.html#3664" class="Function">𝑻</a> <a id="6755" href="Birkhoff.FreeAlgebra.html#6553" class="Bound">X</a> <a id="6757" href="Algebras.Congruences.html#3128" class="Function Operator">╱</a> <a id="6759" class="Symbol">(</a><a id="6760" href="Birkhoff.FreeAlgebra.html#6195" class="Function">ψCon</a> <a id="6765" href="Birkhoff.FreeAlgebra.html#6563" class="Bound">𝒦</a><a id="6766" class="Symbol">)</a>

</pre>

The domain ∣ 𝔉 ∣ is

`∣ 𝑻 X ∣ / ⟨ ψCon 𝒦 ⟩ = Σ C ꞉ _ ,  Σ p ꞉ ∣ 𝑻 X ∣ ,  C ≡ ( [ p ] ⟨ ψCon 𝒦 ⟩ )`,

which is the collection `{ C : ∃ p ∈ ∣ 𝑻 X ∣, C ≡ [ p ]⟨ ψCon 𝒦 ⟩ }` of `⟨ ψCon 𝒦 ⟩`-classses of `𝑻 X`, as desired.


----------------------------

<span class="footnote" id="fn1"><sup>1</sup>Since `X` is not a subset of `𝔉`, technically it doesn't make sense to say "`X` generates `𝔉`." But as long as 𝒦 contains a nontrivial algebra, we will have `ψ(𝒦, 𝑻 𝑋) ∩ X² ≠ ∅`, and we can identify `X` with `X / ψ(𝒦, 𝑻 X)` which does belong to 𝔉.</span>

[↑ Birkhoff](Birkhoff.html)
<span style="float:right;">[Birkhoff.HSPTheorem →](Birkhoff.HSPTheorem.html)</span>

{% include UALib.Links.md %}

<!--

Lemma 4.27. (Bergman) Let 𝒦 be a class of algebras, and ψCon defined as above.
                     Then 𝔽 := 𝑻 / ψCon is isomorphic to an algebra in SP(𝒦).

Proof. 𝔽 ↪ ⨅ 𝒜, where 𝒜 = {𝑨 / θ : 𝑨 / θ ∈ S 𝒦}.
       Therefore, 𝔽 ≅ 𝑩, where 𝑩 is a subalgebra of ⨅ 𝒜 ∈ PS(𝒦).
       Thus 𝔽 is isomorphic to an algebra in SPS(𝒦).
       By SPS⊆SP, 𝔽 is isomorphic to an algebra in SP(𝒦).

-->



