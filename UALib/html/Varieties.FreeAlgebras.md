---
layout: default
title : UALib.Varieties.FreeAlgebras module (Agda Universal Algebra Library)
date : 2021-03-01
author: William DeMeo
---

## <a id="free-algebras-and-birkhoffs-theorem">Free Algebras and Birkhoff's Theorem</a>

This section presents the [UALib.Varieties.FreeAlgebras][] module of the [Agda Universal Algebra Library][].

First we will define the relatively free algebra in a variety, which is the "freest" algebra among (universal for) those algebras that model all identities holding in the variety. Then we give a formal proof of Birkhoff's theorem which says that a variety is an equational class. In other terms, a class `𝒦` of algebras is closed under the operators `H`, `S`, and `P` if and only if 𝒦 is the class of algebras that satisfy some set of identities.

<pre class="Agda">

<a id="804" class="Symbol">{-#</a> <a id="808" class="Keyword">OPTIONS</a> <a id="816" class="Pragma">--without-K</a> <a id="828" class="Pragma">--exact-split</a> <a id="842" class="Pragma">--safe</a> <a id="849" class="Symbol">#-}</a>

<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Algebras.Signatures.html" class="Module">Algebras.Signatures</a> <a id="886" class="Keyword">using</a> <a id="892" class="Symbol">(</a><a id="893" href="Algebras.Signatures.html#1238" class="Function">Signature</a><a id="902" class="Symbol">;</a> <a id="904" href="Overture.Preliminaries.html#8157" class="Generalizable">𝓞</a><a id="905" class="Symbol">;</a> <a id="907" href="Universes.html#262" class="Generalizable">𝓥</a><a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="MGS-Subsingleton-Theorems.html" class="Module">MGS-Subsingleton-Theorems</a> <a id="948" class="Keyword">using</a> <a id="954" class="Symbol">(</a><a id="955" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="963" class="Symbol">;</a> <a id="965" href="Universes.html#403" class="Function Operator">_̇</a><a id="967" class="Symbol">)</a>

<a id="970" class="Keyword">module</a> <a id="977" href="Varieties.FreeAlgebras.html" class="Module">Varieties.FreeAlgebras</a> <a id="1000" class="Symbol">{</a><a id="1001" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a> <a id="1003" class="Symbol">:</a> <a id="1005" href="Algebras.Signatures.html#1238" class="Function">Signature</a> <a id="1015" href="Overture.Preliminaries.html#8157" class="Generalizable">𝓞</a> <a id="1017" href="Universes.html#262" class="Generalizable">𝓥</a><a id="1018" class="Symbol">}</a> <a id="1020" class="Symbol">{</a><a id="1021" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="1023" class="Symbol">:</a> <a id="1025" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="1033" class="Symbol">}{</a><a id="1035" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="1041" href="Universes.html#403" class="Function Operator">̇</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Keyword">where</a>

<a id="1051" class="Keyword">open</a> <a id="1056" class="Keyword">import</a> <a id="1063" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a> <a id="1086" class="Symbol">{</a><a id="1087" class="Argument">𝑆</a> <a id="1089" class="Symbol">=</a> <a id="1091" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="1092" class="Symbol">}{</a><a id="1094" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="1095" class="Symbol">}{</a><a id="1097" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="1098" class="Symbol">}{</a><a id="1100" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="1101" class="Symbol">}</a> <a id="1103" class="Keyword">public</a>
<a id="1110" class="Comment">-- open import UF-FunExt using (FunExt) public</a>


</pre>


#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in [the universal property](Terms.Basic.html#the-universal-property) section of the [Terms.Basic][] module that the term algebra `𝑻 X` is the absolutely free algebra in the class of all `𝑆`-structures. In this section, we formalize, for a given class `𝒦` of `𝑆`-algebras, the (relatively) free algebra in `S(P 𝒦)` over `X`.

We use the next definition to take a free algebra *for* a class `𝒦` and produce the free algebra *in* `𝒦`.

`Θ(𝒦, 𝑨) := {θ ∈ Con 𝑨 : 𝑨 / θ ∈ (S 𝒦)}` &nbsp; &nbsp; and &nbsp; &nbsp; `ψ(𝒦, 𝑨) := ⋂ Θ(𝒦, 𝑨)`.

Notice that `Θ(𝒦, 𝑨)` may be empty, in which case `ψ(𝒦, 𝑨) = 1` and then `𝑨 / ψ(𝒦, 𝑨)` is trivial.

The free algebra is constructed by applying the above definitions to the special case in which `𝑨` is the term algebra `𝑻 X` of `𝑆`-terms over `X`.

Since `𝑻 X` is free for (and in) the class of all `𝑆`-algebras, it follows that `𝑻 X` is free for every class `𝒦` of `𝑆`-algebras. Of course, `𝑻 X` is not necessarily a member of `𝒦`, but if we form the quotient of `𝑻 X` modulo the congruence `ψ(𝒦, 𝑻 X)`, which we denote by `𝔉 := (𝑻 X) / ψ(𝒦, 𝑻 X)`, then it's not hard to see that `𝔉` is a subdirect product of the algebras in `{(𝑻 𝑋) / θ}`, where `θ` ranges over `Θ(𝒦, 𝑻 X)`, so `𝔉` belongs to `S(P 𝒦)`, and it follows that `𝔉` satisfies all the identities satisfied by all members of `𝒦`.  Indeed, for each pair `p q : 𝑻 X`, if `𝒦 ⊧ p ≈ q`, then `p` and `q` must belong to the same `ψ(𝒦, 𝑻 X)`-class, so `p` and `q` are identified in the quotient `𝔉`.

The `𝔉` that we have just defined is called the **free algebra over** `𝒦` **generated by** `X` and (because of what we just observed) we may say that `𝔉` is free *in* `S(P 𝒦)`.<sup>[1](Varieties.FreeAlgebras.html#fn1)</sup>

#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

Here we represent `𝔉` as a type in Agda by first constructing the congruence `ψ(𝒦, 𝑻 𝑋)` described above.

We assume two ambient universes `𝓤` and `𝓧`, as well as a type `X : 𝓧 ̇`. As usual, this is accomplished with the `module` directive.

<pre class="Agda">


<a id="3298" class="Comment">-- NOTATION (universe aliases for convenience and readability).</a>
<a id="3362" class="Comment">-- 𝓕 𝓕⁺  : Universe</a>
<a id="3382" class="Comment">-- 𝓕 = ov 𝓤</a>
<a id="3394" class="Comment">-- 𝓕⁺ = (ov 𝓤) ⁺    -- (this will be the level of the relatively free algebra)</a>

</pre>

We first construct the congruence relation `ψCon`, modulo which `𝑻 X` yields the relatively free algebra, `𝔉 𝒦 X := 𝑻 X ╱ ψCon`. We start by letting `ψ` be the collection of identities `(p, q)` satisfied by all subalgebras of algebras in `𝒦`.

<pre class="Agda">

<a id="ψ"></a><a id="3744" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="3746" class="Symbol">:</a> <a id="3748" class="Symbol">(</a><a id="3749" href="Varieties.FreeAlgebras.html#3749" class="Bound">𝒦</a> <a id="3751" class="Symbol">:</a> <a id="3753" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3767" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="3769" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="3770" class="Symbol">)</a> <a id="3772" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="3773" class="Symbol">)</a> <a id="3775" class="Symbol">→</a> <a id="3777" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3782" class="Symbol">(</a><a id="3783" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3785" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="3787" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3789" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3791" href="MGS-MLTT.html#3515" class="Function Operator">×</a> <a id="3793" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3795" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="3797" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3799" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="3800" class="Symbol">)</a> <a id="3802" href="Varieties.Preservation.html#756" class="Function">𝓕</a>
<a id="3804" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="3806" href="Varieties.FreeAlgebras.html#3806" class="Bound">𝒦</a> <a id="3808" class="Symbol">(</a><a id="3809" href="Varieties.FreeAlgebras.html#3809" class="Bound">p</a> <a id="3811" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="3813" href="Varieties.FreeAlgebras.html#3813" class="Bound">q</a><a id="3814" class="Symbol">)</a> <a id="3816" class="Symbol">=</a> <a id="3818" class="Symbol">∀(</a><a id="3820" href="Varieties.FreeAlgebras.html#3820" class="Bound">𝑨</a> <a id="3822" class="Symbol">:</a> <a id="3824" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3832" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="3834" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="3835" class="Symbol">)(</a><a id="3837" href="Varieties.FreeAlgebras.html#3837" class="Bound">sA</a> <a id="3840" class="Symbol">:</a> <a id="3842" href="Varieties.FreeAlgebras.html#3820" class="Bound">𝑨</a> <a id="3844" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="3846" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="3847" class="Symbol">{</a><a id="3848" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="3849" class="Symbol">}{</a><a id="3851" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="3852" class="Symbol">}</a> <a id="3854" href="Varieties.FreeAlgebras.html#3806" class="Bound">𝒦</a><a id="3855" class="Symbol">)(</a><a id="3857" href="Varieties.FreeAlgebras.html#3857" class="Bound">h</a> <a id="3859" class="Symbol">:</a> <a id="3861" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="3863" class="Symbol">→</a> <a id="3865" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3867" href="Varieties.FreeAlgebras.html#3820" class="Bound">𝑨</a> <a id="3869" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3871" class="Symbol">)</a>
                 <a id="3890" class="Symbol">→</a>  <a id="3893" class="Symbol">(</a><a id="3894" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3904" href="Varieties.FreeAlgebras.html#3820" class="Bound">𝑨</a> <a id="3906" href="Varieties.FreeAlgebras.html#3857" class="Bound">h</a><a id="3907" class="Symbol">)</a> <a id="3909" href="Varieties.FreeAlgebras.html#3809" class="Bound">p</a> <a id="3911" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="3913" class="Symbol">(</a><a id="3914" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3924" href="Varieties.FreeAlgebras.html#3820" class="Bound">𝑨</a> <a id="3926" href="Varieties.FreeAlgebras.html#3857" class="Bound">h</a><a id="3927" class="Symbol">)</a> <a id="3929" href="Varieties.FreeAlgebras.html#3813" class="Bound">q</a>

</pre>

We convert the predicate ψ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

<a id="ψRel"></a><a id="4057" href="Varieties.FreeAlgebras.html#4057" class="Function">ψRel</a> <a id="4062" class="Symbol">:</a> <a id="4064" class="Symbol">(</a><a id="4065" href="Varieties.FreeAlgebras.html#4065" class="Bound">𝒦</a> <a id="4067" class="Symbol">:</a> <a id="4069" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4074" class="Symbol">(</a><a id="4075" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4083" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="4085" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4086" class="Symbol">)</a> <a id="4088" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="4089" class="Symbol">)</a> <a id="4091" class="Symbol">→</a> <a id="4093" href="Relations.Discrete.html#6780" class="Function">Rel</a> <a id="4097" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4099" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4101" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="4103" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4105" href="Varieties.Preservation.html#756" class="Function">𝓕</a>
<a id="4107" href="Varieties.FreeAlgebras.html#4057" class="Function">ψRel</a> <a id="4112" href="Varieties.FreeAlgebras.html#4112" class="Bound">𝒦</a> <a id="4114" href="Varieties.FreeAlgebras.html#4114" class="Bound">p</a> <a id="4116" href="Varieties.FreeAlgebras.html#4116" class="Bound">q</a> <a id="4118" class="Symbol">=</a> <a id="4120" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="4122" href="Varieties.FreeAlgebras.html#4112" class="Bound">𝒦</a> <a id="4124" class="Symbol">(</a><a id="4125" href="Varieties.FreeAlgebras.html#4114" class="Bound">p</a> <a id="4127" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="4129" href="Varieties.FreeAlgebras.html#4116" class="Bound">q</a><a id="4130" class="Symbol">)</a>

</pre>

To express `ψRel` as a congruence of the term algebra `𝑻 X`, we must prove that

1. `ψRel` is compatible with the operations of `𝑻 X` (which are jsut the terms themselves) and
2. `ψRel` it is an equivalence relation.

<pre class="Agda">

<a id="ψcompatible"></a><a id="4377" href="Varieties.FreeAlgebras.html#4377" class="Function">ψcompatible</a> <a id="4389" class="Symbol">:</a> <a id="4391" class="Symbol">(</a><a id="4392" href="Varieties.FreeAlgebras.html#4392" class="Bound">𝒦</a> <a id="4394" class="Symbol">:</a> <a id="4396" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4401" class="Symbol">(</a><a id="4402" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4410" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="4412" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4413" class="Symbol">)</a> <a id="4415" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="4416" class="Symbol">){</a><a id="4418" href="Varieties.FreeAlgebras.html#4418" class="Bound">fe</a> <a id="4421" class="Symbol">:</a> <a id="4423" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="4431" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="4433" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="4434" class="Symbol">}</a> <a id="4436" class="Symbol">→</a> <a id="4438" href="Algebras.Algebras.html#5906" class="Function">compatible</a> <a id="4449" class="Symbol">(</a><a id="4450" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4452" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4453" class="Symbol">)(</a><a id="4455" href="Varieties.FreeAlgebras.html#4057" class="Function">ψRel</a> <a id="4460" href="Varieties.FreeAlgebras.html#4392" class="Bound">𝒦</a><a id="4461" class="Symbol">)</a>
<a id="4463" href="Varieties.FreeAlgebras.html#4377" class="Function">ψcompatible</a> <a id="4475" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝒦</a><a id="4476" class="Symbol">{</a><a id="4477" href="Varieties.FreeAlgebras.html#4477" class="Bound">fe</a><a id="4479" class="Symbol">}</a> <a id="4481" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4483" class="Symbol">{</a><a id="4484" href="Varieties.FreeAlgebras.html#4484" class="Bound">p</a><a id="4485" class="Symbol">}</a> <a id="4487" class="Symbol">{</a><a id="4488" href="Varieties.FreeAlgebras.html#4488" class="Bound">q</a><a id="4489" class="Symbol">}</a> <a id="4491" href="Varieties.FreeAlgebras.html#4491" class="Bound">ψpq</a> <a id="4495" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a> <a id="4497" href="Varieties.FreeAlgebras.html#4497" class="Bound">sA</a> <a id="4500" href="Varieties.FreeAlgebras.html#4500" class="Bound">h</a> <a id="4502" class="Symbol">=</a> <a id="4504" href="Varieties.FreeAlgebras.html#4553" class="Function">γ</a>
 <a id="4507" class="Keyword">where</a>
  <a id="4515" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4517" class="Symbol">:</a> <a id="4519" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="4523" class="Symbol">(</a><a id="4524" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4526" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4527" class="Symbol">)</a> <a id="4529" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a>
  <a id="4533" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4535" class="Symbol">=</a> <a id="4537" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="4546" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a> <a id="4548" href="Varieties.FreeAlgebras.html#4500" class="Bound">h</a>

  <a id="4553" href="Varieties.FreeAlgebras.html#4553" class="Function">γ</a> <a id="4555" class="Symbol">:</a> <a id="4557" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4559" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4561" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4563" class="Symbol">((</a><a id="4565" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4567" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4569" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4571" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4572" class="Symbol">)</a> <a id="4574" href="Varieties.FreeAlgebras.html#4484" class="Bound">p</a><a id="4575" class="Symbol">)</a> <a id="4577" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="4579" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4581" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4583" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4585" class="Symbol">((</a><a id="4587" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4589" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4591" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4593" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4594" class="Symbol">)</a> <a id="4596" href="Varieties.FreeAlgebras.html#4488" class="Bound">q</a><a id="4597" class="Symbol">)</a>

  <a id="4602" href="Varieties.FreeAlgebras.html#4553" class="Function">γ</a> <a id="4604" class="Symbol">=</a> <a id="4606" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4608" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4610" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4612" class="Symbol">((</a><a id="4614" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4616" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4618" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4620" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4621" class="Symbol">)</a> <a id="4623" href="Varieties.FreeAlgebras.html#4484" class="Bound">p</a><a id="4624" class="Symbol">)</a>  <a id="4627" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4630" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4632" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4634" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4636" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4638" href="Varieties.FreeAlgebras.html#4484" class="Bound">p</a> <a id="4640" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
      <a id="4648" class="Symbol">(</a><a id="4649" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4651" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4653" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a><a id="4654" class="Symbol">)</a> <a id="4656" class="Symbol">(</a><a id="4657" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4659" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4661" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4663" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="4665" href="Varieties.FreeAlgebras.html#4484" class="Bound">p</a><a id="4666" class="Symbol">)</a>  <a id="4669" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4672" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="4674" class="Symbol">(</a><a id="4675" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4677" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4679" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a><a id="4680" class="Symbol">)(</a><a id="4682" href="Varieties.FreeAlgebras.html#4477" class="Bound">fe</a> <a id="4685" class="Symbol">λ</a> <a id="4687" href="Varieties.FreeAlgebras.html#4687" class="Bound">x</a> <a id="4689" class="Symbol">→</a> <a id="4691" class="Symbol">(</a><a id="4692" href="Varieties.FreeAlgebras.html#4491" class="Bound">ψpq</a> <a id="4696" href="Varieties.FreeAlgebras.html#4687" class="Bound">x</a><a id="4697" class="Symbol">)</a> <a id="4699" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a> <a id="4701" href="Varieties.FreeAlgebras.html#4497" class="Bound">sA</a> <a id="4704" href="Varieties.FreeAlgebras.html#4500" class="Bound">h</a><a id="4705" class="Symbol">)</a> <a id="4707" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
      <a id="4715" class="Symbol">(</a><a id="4716" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4718" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4720" href="Varieties.FreeAlgebras.html#4495" class="Bound">𝑨</a><a id="4721" class="Symbol">)</a> <a id="4723" class="Symbol">(</a><a id="4724" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4726" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4728" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4730" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="4732" href="Varieties.FreeAlgebras.html#4488" class="Bound">q</a><a id="4733" class="Symbol">)</a>  <a id="4736" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4739" class="Symbol">(</a><a id="4740" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4742" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4744" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4746" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4748" href="Varieties.FreeAlgebras.html#4488" class="Bound">q</a><a id="4749" class="Symbol">)</a><a id="4750" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="4753" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
      <a id="4761" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4763" href="Varieties.FreeAlgebras.html#4515" class="Function">φ</a> <a id="4765" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4767" class="Symbol">((</a><a id="4769" href="Varieties.FreeAlgebras.html#4481" class="Bound">𝑓</a> <a id="4771" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4773" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4775" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="4776" class="Symbol">)</a> <a id="4778" href="Varieties.FreeAlgebras.html#4488" class="Bound">q</a><a id="4779" class="Symbol">)</a>  <a id="4782" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

<a id="ψIsEquivalence"></a><a id="4785" href="Varieties.FreeAlgebras.html#4785" class="Function">ψIsEquivalence</a> <a id="4800" class="Symbol">:</a> <a id="4802" class="Symbol">{</a><a id="4803" href="Varieties.FreeAlgebras.html#4803" class="Bound">𝒦</a> <a id="4805" class="Symbol">:</a> <a id="4807" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4812" class="Symbol">(</a><a id="4813" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4821" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="4823" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4824" class="Symbol">)</a> <a id="4826" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="4828" class="Symbol">}</a> <a id="4830" class="Symbol">→</a> <a id="4832" href="Relations.Quotients.html#2538" class="Record">IsEquivalence</a> <a id="4846" class="Symbol">(</a><a id="4847" href="Varieties.FreeAlgebras.html#4057" class="Function">ψRel</a> <a id="4852" href="Varieties.FreeAlgebras.html#4803" class="Bound">𝒦</a><a id="4853" class="Symbol">)</a>
<a id="4855" href="Varieties.FreeAlgebras.html#4785" class="Function">ψIsEquivalence</a> <a id="4870" class="Symbol">=</a> <a id="4872" class="Keyword">record</a> <a id="4879" class="Symbol">{</a> <a id="4881" href="Relations.Quotients.html#2601" class="Field">rfl</a> <a id="4885" class="Symbol">=</a> <a id="4887" class="Symbol">λ</a> <a id="4889" href="Varieties.FreeAlgebras.html#4889" class="Bound">𝑨</a> <a id="4891" href="Varieties.FreeAlgebras.html#4891" class="Bound">sA</a> <a id="4894" href="Varieties.FreeAlgebras.html#4894" class="Bound">h</a> <a id="4896" class="Symbol">→</a> <a id="4898" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>
                        <a id="4927" class="Symbol">;</a> <a id="4929" href="Relations.Quotients.html#2617" class="Field">sym</a> <a id="4933" class="Symbol">=</a> <a id="4935" class="Symbol">λ</a> <a id="4937" href="Varieties.FreeAlgebras.html#4937" class="Bound">pψq</a> <a id="4941" href="Varieties.FreeAlgebras.html#4941" class="Bound">𝑨</a> <a id="4943" href="Varieties.FreeAlgebras.html#4943" class="Bound">sA</a> <a id="4946" href="Varieties.FreeAlgebras.html#4946" class="Bound">h</a> <a id="4948" class="Symbol">→</a> <a id="4950" class="Symbol">(</a><a id="4951" href="Varieties.FreeAlgebras.html#4937" class="Bound">pψq</a> <a id="4955" href="Varieties.FreeAlgebras.html#4941" class="Bound">𝑨</a> <a id="4957" href="Varieties.FreeAlgebras.html#4943" class="Bound">sA</a> <a id="4960" href="Varieties.FreeAlgebras.html#4946" class="Bound">h</a><a id="4961" class="Symbol">)</a><a id="4962" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>
                        <a id="4989" class="Symbol">;</a> <a id="4991" href="Relations.Quotients.html#2633" class="Field">trans</a> <a id="4997" class="Symbol">=</a> <a id="4999" class="Symbol">λ</a> <a id="5001" href="Varieties.FreeAlgebras.html#5001" class="Bound">pψq</a> <a id="5005" href="Varieties.FreeAlgebras.html#5005" class="Bound">qψr</a> <a id="5009" href="Varieties.FreeAlgebras.html#5009" class="Bound">𝑨</a> <a id="5011" href="Varieties.FreeAlgebras.html#5011" class="Bound">sA</a> <a id="5014" href="Varieties.FreeAlgebras.html#5014" class="Bound">h</a> <a id="5016" class="Symbol">→</a> <a id="5018" class="Symbol">(</a><a id="5019" href="Varieties.FreeAlgebras.html#5001" class="Bound">pψq</a> <a id="5023" href="Varieties.FreeAlgebras.html#5009" class="Bound">𝑨</a> <a id="5025" href="Varieties.FreeAlgebras.html#5011" class="Bound">sA</a> <a id="5028" href="Varieties.FreeAlgebras.html#5014" class="Bound">h</a><a id="5029" class="Symbol">)</a> <a id="5031" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="5033" class="Symbol">(</a><a id="5034" href="Varieties.FreeAlgebras.html#5005" class="Bound">qψr</a> <a id="5038" href="Varieties.FreeAlgebras.html#5009" class="Bound">𝑨</a> <a id="5040" href="Varieties.FreeAlgebras.html#5011" class="Bound">sA</a> <a id="5043" href="Varieties.FreeAlgebras.html#5014" class="Bound">h</a><a id="5044" class="Symbol">)}</a>

</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ψCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

<a id="ψCon"></a><a id="5345" href="Varieties.FreeAlgebras.html#5345" class="Function">ψCon</a> <a id="5350" class="Symbol">:</a> <a id="5352" class="Symbol">(</a><a id="5353" href="Varieties.FreeAlgebras.html#5353" class="Bound">𝒦</a> <a id="5355" class="Symbol">:</a> <a id="5357" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="5362" class="Symbol">(</a><a id="5363" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5371" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="5373" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5374" class="Symbol">)</a> <a id="5376" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="5377" class="Symbol">){</a><a id="5379" href="Varieties.FreeAlgebras.html#5379" class="Bound">fe</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="5392" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="5394" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="5395" class="Symbol">}</a> <a id="5397" class="Symbol">→</a> <a id="5399" href="Algebras.Congruences.html#1166" class="Record">Congruence</a> <a id="5410" class="Symbol">(</a><a id="5411" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="5413" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="5414" class="Symbol">)</a>
<a id="5416" href="Varieties.FreeAlgebras.html#5345" class="Function">ψCon</a> <a id="5421" href="Varieties.FreeAlgebras.html#5421" class="Bound">𝒦</a> <a id="5423" class="Symbol">{</a><a id="5424" href="Varieties.FreeAlgebras.html#5424" class="Bound">fe</a><a id="5426" class="Symbol">}</a> <a id="5428" class="Symbol">=</a> <a id="5430" href="Algebras.Congruences.html#1244" class="InductiveConstructor">mkcon</a> <a id="5436" class="Symbol">(</a><a id="5437" href="Varieties.FreeAlgebras.html#4057" class="Function">ψRel</a> <a id="5442" href="Varieties.FreeAlgebras.html#5421" class="Bound">𝒦</a><a id="5443" class="Symbol">)</a> <a id="5445" href="Varieties.FreeAlgebras.html#4785" class="Function">ψIsEquivalence</a> <a id="5460" class="Symbol">(</a><a id="5461" href="Varieties.FreeAlgebras.html#4377" class="Function">ψcompatible</a> <a id="5473" href="Varieties.FreeAlgebras.html#5421" class="Bound">𝒦</a> <a id="5475" class="Symbol">{</a><a id="5476" href="Varieties.FreeAlgebras.html#5424" class="Bound">fe</a><a id="5478" class="Symbol">})</a>

</pre>


Finally, we are ready to define the type representing the relatively free algebra in Agda.  We denote this type by 𝔉 and define it as the quotient `𝑻 X ╱ (ψCon 𝒦)`.

<pre class="Agda">

<a id="5675" class="Keyword">module</a> <a id="5682" href="Varieties.FreeAlgebras.html#5682" class="Module">_</a> <a id="5684" class="Symbol">{</a><a id="5685" href="Varieties.FreeAlgebras.html#5685" class="Bound">𝒦</a> <a id="5687" class="Symbol">:</a> <a id="5689" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="5694" class="Symbol">(</a><a id="5695" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5703" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="5705" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5706" class="Symbol">)</a> <a id="5708" class="Symbol">(</a><a id="5709" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="5712" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="5713" class="Symbol">)}{</a><a id="5716" href="Varieties.FreeAlgebras.html#5716" class="Bound">fe</a> <a id="5719" class="Symbol">:</a> <a id="5721" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="5729" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="5731" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="5732" class="Symbol">}</a> <a id="5734" class="Keyword">where</a>

 <a id="5742" href="Varieties.FreeAlgebras.html#5742" class="Function">𝔉</a> <a id="5744" class="Symbol">:</a> <a id="5746" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5754" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="5757" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="5760" href="Varieties.FreeAlgebras.html#5742" class="Function">𝔉</a> <a id="5762" class="Symbol">=</a>  <a id="5765" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="5767" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="5769" href="Algebras.Congruences.html#3701" class="Function Operator">╱</a> <a id="5771" class="Symbol">(</a><a id="5772" href="Varieties.FreeAlgebras.html#5345" class="Function">ψCon</a> <a id="5777" href="Varieties.FreeAlgebras.html#5685" class="Bound">𝒦</a> <a id="5779" class="Symbol">{</a><a id="5780" href="Varieties.FreeAlgebras.html#5716" class="Bound">fe</a><a id="5782" class="Symbol">})</a>

</pre>

The domain of `𝔉` is `∣ 𝔉 ∣ = ∣ 𝑻 X ∣ / ⟨ ψCon 𝒦 ⟩`, which is equal to

`Σ C ꞉ _ ,  Σ p ꞉ ∣ 𝑻 X ∣ ,  C ≡ ( [ p ] ⟨ ψCon 𝒦 ⟩ )`.

This Sigma type denotes the set `{ C : ∃ p ∈ ∣ 𝑻 X ∣ , C ≡ [ p ] ⟨ ψCon 𝒦 ⟩ }` of `⟨ ψCon 𝒦 ⟩`-classses of terms, as desired.

We left the type of `C` implicit (using the underscore symbol) for readability.  Since `C` denotes a particular class of the congruence relation `ψCon 𝒦` of `𝑻 X`, and since congruence classes are subsets of the domain of the underlying algebra, the type of `C` is a predicate on the type of terms; specifically, `C : Pred ∣ 𝑻 X ∣ (𝓧 ⊔ 𝓕)`.





-----------------------------




#### <a id="hsp-theorem">HSP Theorem</a>

This section presents a formal proof of the Birkhoff HSP theorem.<sup>[2](Varieties.FreeAlgebras.html#fn2)</sup>

To complete the proof of Birkhoff's HSP theorem, it remains to show that every algebra 𝑨 that belongs to `Mod X (Th (V 𝒦))`---i.e., every algebra that models the equations in `Th (V 𝒦)`---belongs to `V 𝒦`.  This will prove that `V 𝒦` is an equational class.  (The converse, that every equational class is a variety was already proved; see the remarks at the end of this module.)

We accomplish this goal by constructing an algebra `𝔽` with the following properties:<sup>[3](Varieties.FreeAlgebras.html#fn3)</sup>

1. `𝔽 ∈ V 𝒦` and

2. Every `𝑨 ∈ Mod X (Th (V 𝒦))` is a homomorphic image of `𝔽`.

We denote by `ℭ` the product of all subalgebras of algebras in `𝒦`, and by `homℭ` the homomorphism from `𝑻 X` to `ℭ` defined as follows:

`homℭ := ⨅-hom-co (𝑻 X) 𝔄s hom𝔄`.

Here, `⨅-hom-co` (defined in [Homomorphisms.Basic](Homomorphisms.Basic.html#product-homomorphisms)) takes the term algebra `𝑻 X`, a family `{𝔄s : I → Algebra 𝓤 𝑆}` of `𝑆`-algebras, and a family `hom𝔄 : ∀ i → hom (𝑻 X) (𝔄s i)` of homomorphisms and constructs the natural homomorphism `homℭ` from `𝑻 X` to the product `ℭ := ⨅ 𝔄`.  The homomorphism `homℭ : hom (𝑻 X) (⨅ ℭ)` is natural in the sense that the `i`-th component of the image of `𝑡 : Term X` under `homℭ` is the image `∣ hom𝔄 i ∣ 𝑡` of 𝑡 under the i-th homomorphism `hom𝔄 i`.

#### <a id="F-in-classproduct">𝔽 ≤  ⨅ S(𝒦)</a>
Now we come to a step in the Agda formalization of Birkhoff's theorem that is highly nontrivial. We must prove that the free algebra embeds in the product ℭ of all subalgebras of algebras in the class `𝒦`.  This is really the only stage in the proof of Birkhoff's theorem that requires the truncation assumption that `ℭ` be a set.  We will also need to assume several (ten, to be honest) local function extensionality postulates and, as a result, the next submodule will begin with a long and unattractive list of such postulates.  Earlier versions of the library used just a single *global* function extensionality postulate at the start of most modules, but we have since decided to exchange that elegant but crude option for greater precision and transparency.

<pre class="Agda">

<a id="8720" class="Keyword">module</a> <a id="HSPTheorem"></a><a id="8727" href="Varieties.FreeAlgebras.html#8727" class="Module">HSPTheorem</a> <a id="8738" class="Symbol">{</a><a id="8739" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="8742" class="Symbol">:</a> <a id="8744" href="Varieties.EquationalLogic.html#4280" class="Function">DFunExt</a><a id="8751" class="Symbol">}</a> <a id="8753" class="Symbol">{</a><a id="8754" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="8756" class="Symbol">:</a> <a id="8758" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="8763" class="Symbol">(</a><a id="8764" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="8772" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="8774" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="8775" class="Symbol">)</a> <a id="8777" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="8778" class="Symbol">}</a> <a id="8780" class="Keyword">where</a>

 <a id="8788" class="Comment">-- {fe𝓤𝓤 : dfunext 𝓤 𝓤}  {fe𝓕𝓤 : dfunext 𝓕 𝓤}   {fe𝓤𝓕⁺ : dfunext 𝓤 𝓕⁺} {fe𝓕⁺𝓤 : dfunext 𝓕⁺ 𝓤}</a>
 <a id="8883" class="Comment">-- {fe𝓕𝓕 : dfunext 𝓕 𝓕}  {fe𝓕𝓕⁺ : funext 𝓕 𝓕⁺}  {fe𝓕⁺𝓕⁺ : dfunext 𝓕⁺ 𝓕⁺}</a>
 <a id="8957" class="Comment">-- {fe𝓥𝓤 : dfunext 𝓥 𝓤}  {fe𝓥𝓕 : dfunext 𝓥 𝓕}   {fe𝓥𝓕⁺ : dfunext 𝓥 𝓕⁺}</a>
 <a id="9029" class="Keyword">open</a> <a id="9034" href="Varieties.Varieties.html#19374" class="Module">class-products-with-maps</a> <a id="9059" class="Symbol">{</a><a id="9060" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="9061" class="Symbol">}{</a><a id="9063" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="9064" class="Symbol">}{</a><a id="9066" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="9069" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="9071" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="9072" class="Symbol">}{</a><a id="9074" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="9077" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="9080" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="9082" class="Symbol">}{</a><a id="9084" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="9087" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="9089" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="9090" class="Symbol">}</a> <a id="9092" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>

</pre>

We begin by constructing `ℭ`, using the techniques described in the section on <a href="https://ualib.gitlab.io/Varieties.Varieties.html#products-of-classes">products of classes</a>.

<pre class="Agda">

 <a id="9306" class="Comment">-- ℭ is the product of all subalgebras of algebras in 𝒦.</a>
 <a id="HSPTheorem.ℭ"></a><a id="9364" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="9366" class="Symbol">:</a> <a id="9368" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="9376" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="9378" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="9381" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="9383" class="Symbol">=</a> <a id="9385" href="Algebras.Products.html#1145" class="Function">⨅</a> <a id="9387" href="Varieties.Varieties.html#20759" class="Function">𝔄</a>

</pre>

Observe that the inhabitants of `ℭ` are maps from `ℑs` to `{𝔄s i : i ∈ ℑs}`.

<pre class="Agda">

 <a id="9495" class="Comment">-- NOTATION.</a>
 <a id="HSPTheorem.𝔄h"></a><a id="9509" href="Varieties.FreeAlgebras.html#9509" class="Function">𝔄h</a> <a id="9512" class="Symbol">:</a> <a id="9514" class="Symbol">(</a><a id="9515" href="Varieties.FreeAlgebras.html#9515" class="Bound">i</a> <a id="9517" class="Symbol">:</a> <a id="9519" href="Varieties.Varieties.html#19558" class="Function">ℑ</a><a id="9520" class="Symbol">)</a> <a id="9522" class="Symbol">→</a> <a id="9524" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="9526" class="Symbol">→</a> <a id="9528" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="9530" href="Varieties.Varieties.html#20759" class="Function">𝔄</a> <a id="9532" href="Varieties.FreeAlgebras.html#9515" class="Bound">i</a> <a id="9534" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="9537" href="Varieties.FreeAlgebras.html#9509" class="Function">𝔄h</a> <a id="9540" class="Symbol">=</a> <a id="9542" class="Symbol">λ</a> <a id="9544" class="Symbol">(</a><a id="9545" href="Varieties.FreeAlgebras.html#9545" class="Bound">i</a> <a id="9547" class="Symbol">:</a> <a id="9549" href="Varieties.Varieties.html#19558" class="Function">ℑ</a><a id="9550" class="Symbol">)</a> <a id="9552" class="Symbol">→</a> <a id="9554" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="9558" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="9560" href="Varieties.FreeAlgebras.html#9545" class="Bound">i</a> <a id="9562" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a>

 <a id="HSPTheorem.hom𝔄"></a><a id="9566" href="Varieties.FreeAlgebras.html#9566" class="Function">hom𝔄</a> <a id="9571" class="Symbol">:</a> <a id="9573" class="Symbol">∀</a> <a id="9575" href="Varieties.FreeAlgebras.html#9575" class="Bound">i</a> <a id="9577" class="Symbol">→</a> <a id="9579" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="9583" class="Symbol">(</a><a id="9584" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="9586" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="9587" class="Symbol">)</a> <a id="9589" class="Symbol">(</a><a id="9590" href="Varieties.Varieties.html#20759" class="Function">𝔄</a> <a id="9592" href="Varieties.FreeAlgebras.html#9575" class="Bound">i</a><a id="9593" class="Symbol">)</a>
 <a id="9596" href="Varieties.FreeAlgebras.html#9566" class="Function">hom𝔄</a> <a id="9601" href="Varieties.FreeAlgebras.html#9601" class="Bound">i</a> <a id="9603" class="Symbol">=</a> <a id="9605" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="9614" class="Symbol">(</a><a id="9615" href="Varieties.Varieties.html#20759" class="Function">𝔄</a> <a id="9617" href="Varieties.FreeAlgebras.html#9601" class="Bound">i</a><a id="9618" class="Symbol">)</a> <a id="9620" class="Symbol">(</a><a id="9621" href="Varieties.FreeAlgebras.html#9509" class="Function">𝔄h</a> <a id="9624" href="Varieties.FreeAlgebras.html#9601" class="Bound">i</a><a id="9625" class="Symbol">)</a>

 <a id="HSPTheorem.homℭ"></a><a id="9629" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="9634" class="Symbol">:</a> <a id="9636" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="9640" class="Symbol">(</a><a id="9641" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="9643" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="9644" class="Symbol">)</a> <a id="9646" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a>
 <a id="9649" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="9654" class="Symbol">=</a> <a id="9656" href="Homomorphisms.Basic.html#10278" class="Function">⨅-hom-co</a> <a id="9665" class="Symbol">{</a><a id="9666" class="Argument">fe</a> <a id="9669" class="Symbol">=</a> <a id="9671" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="9674" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="9676" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="9677" class="Symbol">}</a> <a id="9679" href="Varieties.Varieties.html#20759" class="Function">𝔄</a> <a id="9681" href="Varieties.FreeAlgebras.html#9566" class="Function">hom𝔄</a>

</pre>


#### <a id="the-new-free-algebra">The new free algebra</a>

As mentioned above, the initial version of the [Agda UALib][] used the free algebra `𝔉` developed above.  However, our new, more direct proof uses the algebra `𝔽`, which we now define, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.<sup>[4](Varieties.FreeAlgebras.html#fn4)</sup>

<pre class="Agda">

 <a id="HSPTheorem.𝔽"></a><a id="10083" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="10085" class="Symbol">:</a> <a id="10087" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="10095" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="10098" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="10101" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="10103" class="Symbol">=</a> <a id="10105" class="Symbol">((</a><a id="10107" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10109" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="10110" class="Symbol">)</a> <a id="10112" href="Homomorphisms.Basic.html#7552" class="Function Operator">[</a> <a id="10114" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="10116" href="Homomorphisms.Basic.html#7552" class="Function Operator">]/ker</a> <a id="10122" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a><a id="10126" class="Symbol">){</a><a id="10128" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="10131" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="10133" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="10134" class="Symbol">}</a>

 <a id="HSPTheorem.epi𝔽"></a><a id="10138" href="Varieties.FreeAlgebras.html#10138" class="Function">epi𝔽</a> <a id="10143" class="Symbol">:</a> <a id="10145" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="10149" class="Symbol">(</a><a id="10150" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10152" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="10153" class="Symbol">)</a> <a id="10155" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a>
 <a id="10158" href="Varieties.FreeAlgebras.html#10138" class="Function">epi𝔽</a> <a id="10163" class="Symbol">=</a> <a id="10165" href="Homomorphisms.Basic.html#9102" class="Function">πker</a> <a id="10170" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="10172" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="10177" class="Symbol">{</a><a id="10178" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="10181" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="10183" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="10184" class="Symbol">}</a>

 <a id="HSPTheorem.hom𝔽"></a><a id="10188" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="10193" class="Symbol">:</a> <a id="10195" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="10199" class="Symbol">(</a><a id="10200" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10202" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="10203" class="Symbol">)</a> <a id="10205" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a>
 <a id="10208" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="10213" class="Symbol">=</a> <a id="10215" href="Homomorphisms.Basic.html#4528" class="Function">epi-to-hom</a> <a id="10226" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="10228" href="Varieties.FreeAlgebras.html#10138" class="Function">epi𝔽</a>

 <a id="HSPTheorem.hom𝔽-is-epic"></a><a id="10235" href="Varieties.FreeAlgebras.html#10235" class="Function">hom𝔽-is-epic</a> <a id="10248" class="Symbol">:</a> <a id="10250" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="10255" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10257" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="10262" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="10265" href="Varieties.FreeAlgebras.html#10235" class="Function">hom𝔽-is-epic</a> <a id="10278" class="Symbol">=</a> <a id="10280" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="10284" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="10286" href="Varieties.FreeAlgebras.html#10138" class="Function">epi𝔽</a> <a id="10291" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a>

</pre>

We will need the following facts relating `homℭ`, `hom𝔽`, `and ψ`.

<pre class="Agda">

 <a id="HSPTheorem.ψlemma0"></a><a id="10389" href="Varieties.FreeAlgebras.html#10389" class="Function">ψlemma0</a> <a id="10397" class="Symbol">:</a> <a id="10399" class="Symbol">∀</a> <a id="10401" href="Varieties.FreeAlgebras.html#10401" class="Bound">p</a> <a id="10403" href="Varieties.FreeAlgebras.html#10403" class="Bound">q</a> <a id="10405" class="Symbol">→</a> <a id="10407" class="Symbol">(</a><a id="10408" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10410" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="10415" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10417" href="Varieties.FreeAlgebras.html#10401" class="Bound">p</a> <a id="10419" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10421" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10423" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="10428" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10430" href="Varieties.FreeAlgebras.html#10403" class="Bound">q</a><a id="10431" class="Symbol">)</a> <a id="10433" class="Symbol">→</a> <a id="10435" class="Symbol">(</a><a id="10436" href="Varieties.FreeAlgebras.html#10401" class="Bound">p</a> <a id="10438" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10440" href="Varieties.FreeAlgebras.html#10403" class="Bound">q</a><a id="10441" class="Symbol">)</a> <a id="10443" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="10445" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="10447" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
 <a id="10450" href="Varieties.FreeAlgebras.html#10389" class="Function">ψlemma0</a> <a id="10458" href="Varieties.FreeAlgebras.html#10458" class="Bound">p</a> <a id="10460" href="Varieties.FreeAlgebras.html#10460" class="Bound">q</a> <a id="10462" href="Varieties.FreeAlgebras.html#10462" class="Bound">phomℭq</a> <a id="10469" href="Varieties.FreeAlgebras.html#10469" class="Bound">𝑨</a> <a id="10471" href="Varieties.FreeAlgebras.html#10471" class="Bound">sA</a> <a id="10474" href="Varieties.FreeAlgebras.html#10474" class="Bound">h</a> <a id="10476" class="Symbol">=</a> <a id="10478" href="Overture.Equality.html#6167" class="Function">cong-app</a> <a id="10487" href="Varieties.FreeAlgebras.html#10462" class="Bound">phomℭq</a> <a id="10494" class="Symbol">(</a><a id="10495" href="Varieties.FreeAlgebras.html#10469" class="Bound">𝑨</a> <a id="10497" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10499" href="Varieties.FreeAlgebras.html#10471" class="Bound">sA</a> <a id="10502" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10504" href="Varieties.FreeAlgebras.html#10474" class="Bound">h</a><a id="10505" class="Symbol">)</a>

 <a id="HSPTheorem.ψlemma0-ap"></a><a id="10509" href="Varieties.FreeAlgebras.html#10509" class="Function">ψlemma0-ap</a> <a id="10520" class="Symbol">:</a> <a id="10522" class="Symbol">{</a><a id="10523" href="Varieties.FreeAlgebras.html#10523" class="Bound">𝑨</a> <a id="10525" class="Symbol">:</a> <a id="10527" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="10535" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="10537" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="10538" class="Symbol">}{</a><a id="10540" href="Varieties.FreeAlgebras.html#10540" class="Bound">h</a> <a id="10542" class="Symbol">:</a> <a id="10544" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="10546" class="Symbol">→</a> <a id="10548" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10550" href="Varieties.FreeAlgebras.html#10523" class="Bound">𝑨</a> <a id="10552" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="10553" class="Symbol">}</a> <a id="10555" class="Symbol">→</a> <a id="10557" href="Varieties.FreeAlgebras.html#10523" class="Bound">𝑨</a> <a id="10559" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="10561" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="10562" class="Symbol">{</a><a id="10563" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="10564" class="Symbol">}{</a><a id="10566" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="10567" class="Symbol">}</a> <a id="10569" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
  <a id="10573" class="Symbol">→</a>           <a id="10585" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="10592" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10594" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="10599" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10601" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="10603" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="10610" class="Symbol">(</a><a id="10611" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10621" href="Varieties.FreeAlgebras.html#10523" class="Bound">𝑨</a> <a id="10623" href="Varieties.FreeAlgebras.html#10540" class="Bound">h</a><a id="10624" class="Symbol">)</a>

 <a id="10628" href="Varieties.FreeAlgebras.html#10509" class="Function">ψlemma0-ap</a> <a id="10639" class="Symbol">{</a><a id="10640" href="Varieties.FreeAlgebras.html#10640" class="Bound">𝑨</a><a id="10641" class="Symbol">}{</a><a id="10643" href="Varieties.FreeAlgebras.html#10643" class="Bound">h</a><a id="10644" class="Symbol">}</a> <a id="10646" href="Varieties.FreeAlgebras.html#10646" class="Bound">skA</a> <a id="10650" class="Symbol">{</a><a id="10651" href="Varieties.FreeAlgebras.html#10651" class="Bound">p</a> <a id="10653" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10655" href="Varieties.FreeAlgebras.html#10655" class="Bound">q</a><a id="10656" class="Symbol">}</a> <a id="10658" href="Varieties.FreeAlgebras.html#10658" class="Bound">x</a> <a id="10660" class="Symbol">=</a> <a id="10662" href="Varieties.FreeAlgebras.html#10784" class="Function">γ</a> <a id="10664" class="Keyword">where</a>

   <a id="10674" href="Varieties.FreeAlgebras.html#10674" class="Function">ν</a> <a id="10676" class="Symbol">:</a> <a id="10678" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10680" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="10685" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10687" href="Varieties.FreeAlgebras.html#10651" class="Bound">p</a> <a id="10689" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10691" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10693" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="10698" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10700" href="Varieties.FreeAlgebras.html#10655" class="Bound">q</a>
   <a id="10705" href="Varieties.FreeAlgebras.html#10674" class="Function">ν</a> <a id="10707" class="Symbol">=</a> <a id="10709" href="Homomorphisms.Basic.html#9593" class="Function">ker-in-con</a> <a id="10720" class="Symbol">{</a><a id="10721" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="10724" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="10725" class="Symbol">}{</a><a id="10727" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="10730" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="10731" class="Symbol">}{</a><a id="10733" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10735" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="10736" class="Symbol">}{</a><a id="10738" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="10741" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="10743" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="10745" class="Symbol">}(</a><a id="10747" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="10754" class="Symbol">(</a><a id="10755" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="10758" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="10760" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="10761" class="Symbol">)</a> <a id="10763" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="10765" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a><a id="10769" class="Symbol">)</a> <a id="10771" class="Symbol">{</a><a id="10772" href="Varieties.FreeAlgebras.html#10651" class="Bound">p</a><a id="10773" class="Symbol">}{</a><a id="10775" href="Varieties.FreeAlgebras.html#10655" class="Bound">q</a><a id="10776" class="Symbol">}</a> <a id="10778" href="Varieties.FreeAlgebras.html#10658" class="Bound">x</a>

   <a id="10784" href="Varieties.FreeAlgebras.html#10784" class="Function">γ</a> <a id="10786" class="Symbol">:</a> <a id="10788" class="Symbol">(</a><a id="10789" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10799" href="Varieties.FreeAlgebras.html#10640" class="Bound">𝑨</a> <a id="10801" href="Varieties.FreeAlgebras.html#10643" class="Bound">h</a><a id="10802" class="Symbol">)</a> <a id="10804" href="Varieties.FreeAlgebras.html#10651" class="Bound">p</a> <a id="10806" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10808" class="Symbol">(</a><a id="10809" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10819" href="Varieties.FreeAlgebras.html#10640" class="Bound">𝑨</a> <a id="10821" href="Varieties.FreeAlgebras.html#10643" class="Bound">h</a><a id="10822" class="Symbol">)</a> <a id="10824" href="Varieties.FreeAlgebras.html#10655" class="Bound">q</a>
   <a id="10829" href="Varieties.FreeAlgebras.html#10784" class="Function">γ</a> <a id="10831" class="Symbol">=</a> <a id="10833" class="Symbol">((</a><a id="10835" href="Varieties.FreeAlgebras.html#10389" class="Function">ψlemma0</a> <a id="10843" href="Varieties.FreeAlgebras.html#10651" class="Bound">p</a> <a id="10845" href="Varieties.FreeAlgebras.html#10655" class="Bound">q</a><a id="10846" class="Symbol">)</a> <a id="10848" href="Varieties.FreeAlgebras.html#10674" class="Function">ν</a><a id="10849" class="Symbol">)</a> <a id="10851" href="Varieties.FreeAlgebras.html#10640" class="Bound">𝑨</a> <a id="10853" href="Varieties.FreeAlgebras.html#10646" class="Bound">skA</a> <a id="10857" href="Varieties.FreeAlgebras.html#10643" class="Bound">h</a>


</pre>

We now use `ψlemma0-ap` to prove that every map `h : X → ∣ 𝑨 ∣`, from `X` to a subalgebra `𝑨 ∈ S 𝒦` of `𝒦`, lifts to a homomorphism from `𝔽` to `𝑨`.

<pre class="Agda">

 <a id="HSPTheorem.𝔽-lift-hom"></a><a id="11038" href="Varieties.FreeAlgebras.html#11038" class="Function">𝔽-lift-hom</a> <a id="11049" class="Symbol">:</a> <a id="11051" class="Symbol">(</a><a id="11052" href="Varieties.FreeAlgebras.html#11052" class="Bound">𝑨</a> <a id="11054" class="Symbol">:</a> <a id="11056" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="11064" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="11066" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="11067" class="Symbol">)</a> <a id="11069" class="Symbol">→</a> <a id="11071" href="Varieties.FreeAlgebras.html#11052" class="Bound">𝑨</a> <a id="11073" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="11075" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="11076" class="Symbol">{</a><a id="11077" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="11078" class="Symbol">}{</a><a id="11080" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="11081" class="Symbol">}</a> <a id="11083" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="11085" class="Symbol">→</a> <a id="11087" class="Symbol">(</a><a id="11088" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="11090" class="Symbol">→</a> <a id="11092" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11094" href="Varieties.FreeAlgebras.html#11052" class="Bound">𝑨</a> <a id="11096" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="11097" class="Symbol">)</a> <a id="11099" class="Symbol">→</a> <a id="11101" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="11105" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="11107" href="Varieties.FreeAlgebras.html#11052" class="Bound">𝑨</a>
 <a id="11110" href="Varieties.FreeAlgebras.html#11038" class="Function">𝔽-lift-hom</a> <a id="11121" href="Varieties.FreeAlgebras.html#11121" class="Bound">𝑨</a> <a id="11123" href="Varieties.FreeAlgebras.html#11123" class="Bound">skA</a> <a id="11127" href="Varieties.FreeAlgebras.html#11127" class="Bound">h</a> <a id="11129" class="Symbol">=</a> <a id="11131" href="Overture.Preliminaries.html#13836" class="Function">fst</a><a id="11134" class="Symbol">(</a><a id="11135" href="Homomorphisms.Noether.html#10147" class="Function">HomFactor</a> <a id="11145" class="Symbol">(</a><a id="11146" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="11149" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="11151" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="11152" class="Symbol">)(</a><a id="11154" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="11157" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="11160" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="11162" class="Symbol">)</a> <a id="11164" href="Varieties.FreeAlgebras.html#11121" class="Bound">𝑨</a> <a id="11166" class="Symbol">(</a><a id="11167" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="11176" href="Varieties.FreeAlgebras.html#11121" class="Bound">𝑨</a> <a id="11178" href="Varieties.FreeAlgebras.html#11127" class="Bound">h</a><a id="11179" class="Symbol">)</a> <a id="11181" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="11186" class="Symbol">(</a><a id="11187" href="Varieties.FreeAlgebras.html#10509" class="Function">ψlemma0-ap</a> <a id="11198" href="Varieties.FreeAlgebras.html#11123" class="Bound">skA</a><a id="11201" class="Symbol">)</a> <a id="11203" href="Varieties.FreeAlgebras.html#10235" class="Function">hom𝔽-is-epic</a><a id="11215" class="Symbol">)</a>

</pre>


#### <a id="k-models-psi">𝒦 models ψ</a>

The goal of this subsection is to prove that `𝒦` models `ψ 𝒦`. In other terms, for all pairs `(p , q) ∈ Term X × Term X` of terms, if `(p , q) ∈ ψ 𝒦`, then `𝒦 ⊧ p ≋ q`.

Next we define the lift of the natural embedding from `X` into 𝔽. We denote this homomorphism by `𝔑 : hom (𝑻 X) 𝔽` and define it as follows.

<pre class="Agda">

 <a id="HSPTheorem.X↪𝔽"></a><a id="11600" href="Varieties.FreeAlgebras.html#11600" class="Function">X↪𝔽</a> <a id="11604" class="Symbol">:</a> <a id="11606" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="11608" class="Symbol">→</a> <a id="11610" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11612" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="11614" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="11617" href="Varieties.FreeAlgebras.html#11600" class="Function">X↪𝔽</a> <a id="11621" href="Varieties.FreeAlgebras.html#11621" class="Bound">x</a> <a id="11623" class="Symbol">=</a> <a id="11625" href="Relations.Quotients.html#4975" class="Function Operator">⟪</a> <a id="11627" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="11629" href="Varieties.FreeAlgebras.html#11621" class="Bound">x</a> <a id="11631" href="Relations.Quotients.html#4975" class="Function Operator">⟫</a>

 <a id="HSPTheorem.𝔑"></a><a id="11635" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11637" class="Symbol">:</a> <a id="11639" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="11643" class="Symbol">(</a><a id="11644" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="11646" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="11647" class="Symbol">)</a> <a id="11649" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a>
 <a id="11652" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11654" class="Symbol">=</a> <a id="11656" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="11665" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="11667" href="Varieties.FreeAlgebras.html#11600" class="Function">X↪𝔽</a>

</pre>

It turns out that the homomorphism so defined is equivalent to `hom𝔽`.

<pre class="Agda">

 <a id="HSPTheorem.hom𝔽-is-lift-hom"></a><a id="11771" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a> <a id="11788" class="Symbol">:</a> <a id="11790" class="Symbol">∀</a> <a id="11792" href="Varieties.FreeAlgebras.html#11792" class="Bound">p</a> <a id="11794" class="Symbol">→</a> <a id="11796" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11798" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11800" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11802" href="Varieties.FreeAlgebras.html#11792" class="Bound">p</a> <a id="11804" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="11806" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11808" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="11813" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11815" href="Varieties.FreeAlgebras.html#11792" class="Bound">p</a>
 <a id="11818" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a> <a id="11835" class="Symbol">(</a><a id="11836" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="11838" href="Varieties.FreeAlgebras.html#11838" class="Bound">x</a><a id="11839" class="Symbol">)</a> <a id="11841" class="Symbol">=</a> <a id="11843" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>
 <a id="11849" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a> <a id="11866" class="Symbol">(</a><a id="11867" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="11872" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="11874" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a><a id="11875" class="Symbol">)</a> <a id="11877" class="Symbol">=</a>
  <a id="11881" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11883" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11885" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11887" class="Symbol">(</a><a id="11888" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="11893" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="11895" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a><a id="11896" class="Symbol">)</a>              <a id="11911" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="11914" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="11916" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11918" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="11920" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="11922" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a> <a id="11924" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="11928" class="Symbol">(</a><a id="11929" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="11931" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="11933" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a><a id="11934" class="Symbol">)(λ</a> <a id="11938" href="Varieties.FreeAlgebras.html#11938" class="Bound">i</a> <a id="11940" class="Symbol">→</a> <a id="11942" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11944" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="11946" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="11947" class="Symbol">(</a><a id="11948" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a> <a id="11950" href="Varieties.FreeAlgebras.html#11938" class="Bound">i</a><a id="11951" class="Symbol">))</a>      <a id="11959" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="11962" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="11964" class="Symbol">(</a><a id="11965" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="11967" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="11969" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a><a id="11970" class="Symbol">)(</a><a id="11972" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="11975" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="11977" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="11980" class="Symbol">(λ</a> <a id="11983" href="Varieties.FreeAlgebras.html#11983" class="Bound">x</a> <a id="11985" class="Symbol">→</a> <a id="11987" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a><a id="12003" class="Symbol">(</a><a id="12004" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a> <a id="12006" href="Varieties.FreeAlgebras.html#11983" class="Bound">x</a><a id="12007" class="Symbol">)))</a> <a id="12011" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="12015" class="Symbol">(</a><a id="12016" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="12018" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="12020" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a><a id="12021" class="Symbol">)(λ</a> <a id="12025" href="Varieties.FreeAlgebras.html#12025" class="Bound">i</a> <a id="12027" class="Symbol">→</a> <a id="12029" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12031" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="12036" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12038" class="Symbol">(</a><a id="12039" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a> <a id="12041" href="Varieties.FreeAlgebras.html#12025" class="Bound">i</a><a id="12042" class="Symbol">))</a>  <a id="12046" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12049" class="Symbol">(</a><a id="12050" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12052" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="12057" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12059" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="12061" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a><a id="12062" class="Symbol">)</a><a id="12063" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="12066" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="12070" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12072" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="12077" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12079" class="Symbol">(</a><a id="12080" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="12085" href="Varieties.FreeAlgebras.html#11872" class="Bound">𝑓</a> <a id="12087" href="Varieties.FreeAlgebras.html#11874" class="Bound">𝒕</a><a id="12088" class="Symbol">)</a>           <a id="12100" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>


</pre>

We need a three more lemmas before we are ready to tackle our main goal.

<pre class="Agda">

 <a id="HSPTheorem.ψlemma1"></a><a id="12205" href="Varieties.FreeAlgebras.html#12205" class="Function">ψlemma1</a> <a id="12213" class="Symbol">:</a> <a id="12215" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12222" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12224" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12226" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12228" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="12230" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="12232" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
 <a id="12235" href="Varieties.FreeAlgebras.html#12205" class="Function">ψlemma1</a> <a id="12243" class="Symbol">{</a><a id="12244" href="Varieties.FreeAlgebras.html#12244" class="Bound">p</a> <a id="12246" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12248" href="Varieties.FreeAlgebras.html#12248" class="Bound">q</a><a id="12249" class="Symbol">}</a> <a id="12251" href="Varieties.FreeAlgebras.html#12251" class="Bound">𝔑pq</a> <a id="12255" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a> <a id="12257" href="Varieties.FreeAlgebras.html#12257" class="Bound">sA</a> <a id="12260" href="Varieties.FreeAlgebras.html#12260" class="Bound">h</a> <a id="12262" class="Symbol">=</a> <a id="12264" href="Varieties.FreeAlgebras.html#12545" class="Function">γ</a>
  <a id="12268" class="Keyword">where</a>
   <a id="12277" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12279" class="Symbol">:</a> <a id="12281" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="12285" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="12287" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a>
   <a id="12292" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12294" class="Symbol">=</a> <a id="12296" href="Varieties.FreeAlgebras.html#11038" class="Function">𝔽-lift-hom</a> <a id="12307" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a> <a id="12309" href="Varieties.FreeAlgebras.html#12257" class="Bound">sA</a> <a id="12312" href="Varieties.FreeAlgebras.html#12260" class="Bound">h</a>

   <a id="12318" href="Varieties.FreeAlgebras.html#12318" class="Function">h&#39;</a> <a id="12321" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12323" class="Symbol">:</a> <a id="12325" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="12329" class="Symbol">(</a><a id="12330" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="12332" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="12333" class="Symbol">)</a> <a id="12335" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a>
   <a id="12340" href="Varieties.FreeAlgebras.html#12318" class="Function">h&#39;</a> <a id="12343" class="Symbol">=</a> <a id="12345" href="Homomorphisms.Noether.html#7275" class="Function">∘-hom</a> <a id="12351" class="Symbol">(</a><a id="12352" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="12354" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="12355" class="Symbol">)</a> <a id="12357" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a> <a id="12359" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12361" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a>
   <a id="12366" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12368" class="Symbol">=</a> <a id="12370" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="12379" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a> <a id="12381" href="Varieties.FreeAlgebras.html#12260" class="Bound">h</a>

   <a id="12387" href="Varieties.FreeAlgebras.html#12387" class="Function">f𝔑≡φ</a> <a id="12392" class="Symbol">:</a> <a id="12394" class="Symbol">∀</a> <a id="12396" href="Varieties.FreeAlgebras.html#12396" class="Bound">x</a> <a id="12398" class="Symbol">→</a> <a id="12400" class="Symbol">(</a><a id="12401" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12403" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12405" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12407" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="12409" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12411" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12413" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12414" class="Symbol">)(</a><a id="12416" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="12418" href="Varieties.FreeAlgebras.html#12396" class="Bound">x</a><a id="12419" class="Symbol">)</a> <a id="12421" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12423" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12425" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12427" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12428" class="Symbol">(</a><a id="12429" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="12431" href="Varieties.FreeAlgebras.html#12396" class="Bound">x</a><a id="12432" class="Symbol">)</a>
   <a id="12437" href="Varieties.FreeAlgebras.html#12387" class="Function">f𝔑≡φ</a> <a id="12442" href="Varieties.FreeAlgebras.html#12442" class="Bound">x</a> <a id="12444" class="Symbol">=</a> <a id="12446" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>

   <a id="12455" href="Varieties.FreeAlgebras.html#12455" class="Function">h≡φ</a> <a id="12459" class="Symbol">:</a> <a id="12461" class="Symbol">∀</a> <a id="12463" href="Varieties.FreeAlgebras.html#12463" class="Bound">t</a> <a id="12465" class="Symbol">→</a> <a id="12467" class="Symbol">(</a><a id="12468" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12470" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12472" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12474" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="12476" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12478" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12480" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12481" class="Symbol">)</a> <a id="12483" href="Varieties.FreeAlgebras.html#12463" class="Bound">t</a> <a id="12485" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12487" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12489" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12491" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12493" href="Varieties.FreeAlgebras.html#12463" class="Bound">t</a>
   <a id="12498" href="Varieties.FreeAlgebras.html#12455" class="Function">h≡φ</a> <a id="12502" href="Varieties.FreeAlgebras.html#12502" class="Bound">t</a> <a id="12504" class="Symbol">=</a> <a id="12506" href="Terms.Basic.html#5537" class="Function">free-unique</a> <a id="12518" class="Symbol">(</a><a id="12519" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="12522" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="12524" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="12525" class="Symbol">)</a> <a id="12527" href="Varieties.FreeAlgebras.html#12255" class="Bound">𝑨</a> <a id="12529" href="Varieties.FreeAlgebras.html#12318" class="Function">h&#39;</a> <a id="12532" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12534" href="Varieties.FreeAlgebras.html#12387" class="Function">f𝔑≡φ</a> <a id="12539" href="Varieties.FreeAlgebras.html#12502" class="Bound">t</a>

   <a id="12545" href="Varieties.FreeAlgebras.html#12545" class="Function">γ</a> <a id="12547" class="Symbol">:</a> <a id="12549" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12551" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12553" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12555" href="Varieties.FreeAlgebras.html#12244" class="Bound">p</a> <a id="12557" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12559" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12561" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12563" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12565" href="Varieties.FreeAlgebras.html#12248" class="Bound">q</a>
   <a id="12570" href="Varieties.FreeAlgebras.html#12545" class="Function">γ</a> <a id="12572" class="Symbol">=</a> <a id="12574" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12576" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12578" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12580" href="Varieties.FreeAlgebras.html#12244" class="Bound">p</a>             <a id="12594" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12597" class="Symbol">(</a><a id="12598" href="Varieties.FreeAlgebras.html#12455" class="Function">h≡φ</a> <a id="12602" href="Varieties.FreeAlgebras.html#12244" class="Bound">p</a><a id="12603" class="Symbol">)</a><a id="12604" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="12607" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12616" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12618" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12620" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12622" class="Symbol">(</a> <a id="12624" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12626" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12628" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12630" href="Varieties.FreeAlgebras.html#12244" class="Bound">p</a> <a id="12632" class="Symbol">)</a>   <a id="12636" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12639" href="MGS-MLTT.html#6613" class="Function">ap</a> <a id="12642" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12644" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12646" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12648" href="Varieties.FreeAlgebras.html#12251" class="Bound">𝔑pq</a> <a id="12652" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12661" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12663" href="Varieties.FreeAlgebras.html#12277" class="Function">f</a> <a id="12665" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12667" class="Symbol">(</a> <a id="12669" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12671" href="Varieties.FreeAlgebras.html#11635" class="Function">𝔑</a> <a id="12673" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12675" href="Varieties.FreeAlgebras.html#12248" class="Bound">q</a> <a id="12677" class="Symbol">)</a>   <a id="12681" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12684" href="Varieties.FreeAlgebras.html#12455" class="Function">h≡φ</a> <a id="12688" href="Varieties.FreeAlgebras.html#12248" class="Bound">q</a> <a id="12690" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12699" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12701" href="Varieties.FreeAlgebras.html#12321" class="Function">φ</a> <a id="12703" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12705" href="Varieties.FreeAlgebras.html#12248" class="Bound">q</a>             <a id="12719" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>


 <a id="HSPTheorem.ψlemma2"></a><a id="12724" href="Varieties.FreeAlgebras.html#12724" class="Function">ψlemma2</a> <a id="12732" class="Symbol">:</a> <a id="12734" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12741" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12743" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="12748" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12750" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="12752" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="12754" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
 <a id="12757" href="Varieties.FreeAlgebras.html#12724" class="Function">ψlemma2</a> <a id="12765" class="Symbol">{</a><a id="12766" href="Varieties.FreeAlgebras.html#12766" class="Bound">p</a> <a id="12768" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12770" href="Varieties.FreeAlgebras.html#12770" class="Bound">q</a><a id="12771" class="Symbol">}</a> <a id="12773" href="Varieties.FreeAlgebras.html#12773" class="Bound">hyp</a> <a id="12777" class="Symbol">=</a> <a id="12779" href="Varieties.FreeAlgebras.html#12205" class="Function">ψlemma1</a> <a id="12787" class="Symbol">{</a><a id="12788" href="Varieties.FreeAlgebras.html#12766" class="Bound">p</a> <a id="12790" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12792" href="Varieties.FreeAlgebras.html#12770" class="Bound">q</a><a id="12793" class="Symbol">}</a> <a id="12795" href="Varieties.FreeAlgebras.html#12810" class="Function">γ</a>
   <a id="12800" class="Keyword">where</a>
    <a id="12810" href="Varieties.FreeAlgebras.html#12810" class="Function">γ</a> <a id="12812" class="Symbol">:</a> <a id="12814" class="Symbol">(</a><a id="12815" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="12825" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="12827" href="Varieties.FreeAlgebras.html#11600" class="Function">X↪𝔽</a><a id="12830" class="Symbol">)</a> <a id="12832" href="Varieties.FreeAlgebras.html#12766" class="Bound">p</a> <a id="12834" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12836" class="Symbol">(</a><a id="12837" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="12847" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="12849" href="Varieties.FreeAlgebras.html#11600" class="Function">X↪𝔽</a><a id="12852" class="Symbol">)</a> <a id="12854" href="Varieties.FreeAlgebras.html#12770" class="Bound">q</a>
    <a id="12860" href="Varieties.FreeAlgebras.html#12810" class="Function">γ</a> <a id="12862" class="Symbol">=</a> <a id="12864" class="Symbol">(</a><a id="12865" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a> <a id="12882" href="Varieties.FreeAlgebras.html#12766" class="Bound">p</a><a id="12883" class="Symbol">)</a> <a id="12885" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="12887" href="Varieties.FreeAlgebras.html#12773" class="Bound">hyp</a> <a id="12891" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="12893" class="Symbol">(</a><a id="12894" href="Varieties.FreeAlgebras.html#11771" class="Function">hom𝔽-is-lift-hom</a> <a id="12911" href="Varieties.FreeAlgebras.html#12770" class="Bound">q</a><a id="12912" class="Symbol">)</a><a id="12913" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>


 <a id="HSPTheorem.ψlemma3"></a><a id="12919" href="Varieties.FreeAlgebras.html#12919" class="Function">ψlemma3</a> <a id="12927" class="Symbol">:</a> <a id="12929" class="Symbol">∀</a> <a id="12931" href="Varieties.FreeAlgebras.html#12931" class="Bound">p</a> <a id="12933" href="Varieties.FreeAlgebras.html#12933" class="Bound">q</a> <a id="12935" class="Symbol">→</a> <a id="12937" class="Symbol">(</a><a id="12938" href="Varieties.FreeAlgebras.html#12931" class="Bound">p</a> <a id="12940" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12942" href="Varieties.FreeAlgebras.html#12933" class="Bound">q</a><a id="12943" class="Symbol">)</a> <a id="12945" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="12947" href="Varieties.FreeAlgebras.html#3744" class="Function">ψ</a> <a id="12949" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="12951" class="Symbol">→</a> <a id="12953" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="12955" href="Varieties.EquationalLogic.html#2763" class="Function Operator">⊧</a> <a id="12957" href="Varieties.FreeAlgebras.html#12931" class="Bound">p</a> <a id="12959" href="Varieties.EquationalLogic.html#2763" class="Function Operator">≋</a> <a id="12961" href="Varieties.FreeAlgebras.html#12933" class="Bound">q</a>
 <a id="12964" href="Varieties.FreeAlgebras.html#12919" class="Function">ψlemma3</a> <a id="12972" href="Varieties.FreeAlgebras.html#12972" class="Bound">p</a> <a id="12974" href="Varieties.FreeAlgebras.html#12974" class="Bound">q</a> <a id="12976" href="Varieties.FreeAlgebras.html#12976" class="Bound">pψq</a> <a id="12980" class="Symbol">{</a><a id="12981" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a><a id="12982" class="Symbol">}</a> <a id="12984" href="Varieties.FreeAlgebras.html#12984" class="Bound">kA</a> <a id="12987" class="Symbol">=</a> <a id="12989" href="Varieties.FreeAlgebras.html#13060" class="Function">γ</a>
  <a id="12993" class="Keyword">where</a>
   <a id="13002" href="Varieties.FreeAlgebras.html#13002" class="Function">skA</a> <a id="13006" class="Symbol">:</a> <a id="13008" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13010" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="13012" href="Varieties.Varieties.html#2859" class="Datatype">S</a> <a id="13014" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
   <a id="13019" href="Varieties.FreeAlgebras.html#13002" class="Function">skA</a> <a id="13023" class="Symbol">=</a> <a id="13025" href="Varieties.Varieties.html#3211" class="InductiveConstructor">siso</a> <a id="13030" class="Symbol">(</a><a id="13031" href="Varieties.Varieties.html#2950" class="InductiveConstructor">sbase</a> <a id="13037" href="Varieties.FreeAlgebras.html#12984" class="Bound">kA</a><a id="13039" class="Symbol">)</a> <a id="13041" class="Symbol">(</a><a id="13042" href="Homomorphisms.Isomorphisms.html#1560" class="Function">≅-sym</a> <a id="13048" href="Homomorphisms.Isomorphisms.html#2754" class="Function">Lift-≅</a><a id="13054" class="Symbol">)</a>

   <a id="13060" href="Varieties.FreeAlgebras.html#13060" class="Function">γ</a> <a id="13062" class="Symbol">:</a> <a id="13064" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13066" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13068" href="Varieties.FreeAlgebras.html#12972" class="Bound">p</a> <a id="13070" href="Terms.Operations.html#1672" class="Function Operator">⟧</a> <a id="13072" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="13074" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13076" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13078" href="Varieties.FreeAlgebras.html#12974" class="Bound">q</a> <a id="13080" href="Terms.Operations.html#1672" class="Function Operator">⟧</a>
   <a id="13085" href="Varieties.FreeAlgebras.html#13060" class="Function">γ</a> <a id="13087" class="Symbol">=</a> <a id="13089" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="13092" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="13094" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="13096" class="Symbol">λ</a> <a id="13098" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a> <a id="13100" class="Symbol">→</a> <a id="13102" class="Symbol">(</a><a id="13103" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13105" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13107" href="Varieties.FreeAlgebras.html#12972" class="Bound">p</a> <a id="13109" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="13110" class="Symbol">)</a> <a id="13112" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a>       <a id="13120" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13123" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13140" class="Symbol">(</a><a id="13141" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="13144" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="13146" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="13147" class="Symbol">)</a> <a id="13149" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13151" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a> <a id="13153" href="Varieties.FreeAlgebras.html#12972" class="Bound">p</a> <a id="13155" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13174" class="Symbol">(</a><a id="13175" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="13185" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13187" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a><a id="13188" class="Symbol">)</a> <a id="13190" href="Varieties.FreeAlgebras.html#12972" class="Bound">p</a> <a id="13192" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13195" href="Varieties.FreeAlgebras.html#12976" class="Bound">pψq</a> <a id="13199" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13201" href="Varieties.FreeAlgebras.html#13002" class="Function">skA</a> <a id="13205" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a> <a id="13207" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13226" class="Symbol">(</a><a id="13227" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="13237" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13239" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a><a id="13240" class="Symbol">)</a> <a id="13242" href="Varieties.FreeAlgebras.html#12974" class="Bound">q</a> <a id="13244" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13247" class="Symbol">(</a><a id="13248" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13265" class="Symbol">(</a><a id="13266" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="13269" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="13271" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="13272" class="Symbol">)</a> <a id="13274" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13276" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a> <a id="13278" href="Varieties.FreeAlgebras.html#12974" class="Bound">q</a><a id="13279" class="Symbol">)</a><a id="13280" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>  <a id="13284" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13303" class="Symbol">(</a><a id="13304" href="Varieties.FreeAlgebras.html#12981" class="Bound">𝑨</a> <a id="13306" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13308" href="Varieties.FreeAlgebras.html#12974" class="Bound">q</a> <a id="13310" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="13311" class="Symbol">)</a> <a id="13313" href="Varieties.FreeAlgebras.html#13098" class="Bound">h</a>       <a id="13321" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

</pre>

With these results in hand, it is now trivial to prove the main theorem of this subsection.

<pre class="Agda">

 <a id="HSPTheorem.class-models-kernel"></a><a id="13444" href="Varieties.FreeAlgebras.html#13444" class="Function">class-models-kernel</a> <a id="13464" class="Symbol">:</a> <a id="13466" class="Symbol">∀</a> <a id="13468" href="Varieties.FreeAlgebras.html#13468" class="Bound">p</a> <a id="13470" href="Varieties.FreeAlgebras.html#13470" class="Bound">q</a> <a id="13472" class="Symbol">→</a> <a id="13474" class="Symbol">(</a><a id="13475" href="Varieties.FreeAlgebras.html#13468" class="Bound">p</a> <a id="13477" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="13479" href="Varieties.FreeAlgebras.html#13470" class="Bound">q</a><a id="13480" class="Symbol">)</a> <a id="13482" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="13484" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="13491" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13493" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="13498" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13500" class="Symbol">→</a> <a id="13502" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="13504" href="Varieties.EquationalLogic.html#2763" class="Function Operator">⊧</a> <a id="13506" href="Varieties.FreeAlgebras.html#13468" class="Bound">p</a> <a id="13508" href="Varieties.EquationalLogic.html#2763" class="Function Operator">≋</a> <a id="13510" href="Varieties.FreeAlgebras.html#13470" class="Bound">q</a>
 <a id="13513" href="Varieties.FreeAlgebras.html#13444" class="Function">class-models-kernel</a>  <a id="13534" href="Varieties.FreeAlgebras.html#13534" class="Bound">p</a> <a id="13536" href="Varieties.FreeAlgebras.html#13536" class="Bound">q</a> <a id="13538" href="Varieties.FreeAlgebras.html#13538" class="Bound">hyp</a> <a id="13542" class="Symbol">=</a> <a id="13544" href="Varieties.FreeAlgebras.html#12919" class="Function">ψlemma3</a> <a id="13552" href="Varieties.FreeAlgebras.html#13534" class="Bound">p</a> <a id="13554" href="Varieties.FreeAlgebras.html#13536" class="Bound">q</a> <a id="13556" class="Symbol">(</a><a id="13557" href="Varieties.FreeAlgebras.html#12724" class="Function">ψlemma2</a> <a id="13565" href="Varieties.FreeAlgebras.html#13538" class="Bound">hyp</a><a id="13568" class="Symbol">)</a>

</pre>


#### <a id="the-homomorphic-images-of-F">The homomorphic images of 𝔽</a>

Finally we come to one of the main theorems of this module; it asserts that every algebra in `Mod X (Th 𝕍𝒦)` is a homomorphic image of 𝔽.  We prove this below as the function (or proof object) `𝔽-ModTh-epi`.  Before that, we prove two auxiliary lemmas.

<pre class="Agda">

 <a id="HSPTheorem.kernel-in-theory"></a><a id="13927" href="Varieties.FreeAlgebras.html#13927" class="Function">kernel-in-theory</a> <a id="13944" class="Symbol">:</a> <a id="13946" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="13953" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13955" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="13960" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13962" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="13964" href="Varieties.EquationalLogic.html#3641" class="Function">Th</a> <a id="13967" class="Symbol">(</a><a id="13968" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="13970" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="13971" class="Symbol">)</a>
 <a id="13974" href="Varieties.FreeAlgebras.html#13927" class="Function">kernel-in-theory</a> <a id="13991" class="Symbol">{</a><a id="13992" href="Varieties.FreeAlgebras.html#13992" class="Bound">p</a> <a id="13994" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="13996" href="Varieties.FreeAlgebras.html#13996" class="Bound">q</a><a id="13997" class="Symbol">}</a> <a id="13999" href="Varieties.FreeAlgebras.html#13999" class="Bound">pKq</a> <a id="14003" class="Symbol">=</a> <a id="14005" class="Symbol">(</a><a id="14006" href="Varieties.Preservation.html#8764" class="Function">class-ids-⇒</a> <a id="14018" class="Symbol">{</a><a id="14019" class="Argument">fe</a> <a id="14022" class="Symbol">=</a> <a id="14024" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a><a id="14026" class="Symbol">}</a> <a id="14028" href="Varieties.FreeAlgebras.html#13992" class="Bound">p</a> <a id="14030" href="Varieties.FreeAlgebras.html#13996" class="Bound">q</a> <a id="14032" class="Symbol">(</a><a id="14033" href="Varieties.FreeAlgebras.html#13444" class="Function">class-models-kernel</a> <a id="14053" href="Varieties.FreeAlgebras.html#13992" class="Bound">p</a> <a id="14055" href="Varieties.FreeAlgebras.html#13996" class="Bound">q</a> <a id="14057" href="Varieties.FreeAlgebras.html#13999" class="Bound">pKq</a><a id="14060" class="Symbol">))</a>

 <a id="14065" class="Keyword">open</a> <a id="14070" href="Algebras.Congruences.html#1166" class="Module">Congruence</a>

 <a id="HSPTheorem.free-quot-subalg-ℭ"></a><a id="14083" href="Varieties.FreeAlgebras.html#14083" class="Function">free-quot-subalg-ℭ</a> <a id="14102" class="Symbol">:</a> <a id="14104" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="14112" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14114" class="Symbol">(</a><a id="14115" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14118" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="14120" class="Symbol">)</a> <a id="14122" class="Symbol">→</a> <a id="14124" href="Relations.Truncation.html#7801" class="Function">prop-ext</a> <a id="14133" class="Symbol">(</a><a id="14134" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14137" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14138" class="Symbol">)</a> <a id="14140" class="Symbol">(</a><a id="14141" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14144" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14145" class="Symbol">)</a> <a id="14147" class="Symbol">→</a> <a id="14149" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="14156" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14158" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14160" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
  <a id="14164" class="Symbol">→</a>                   <a id="14184" class="Symbol">(∀</a> <a id="14187" href="Varieties.FreeAlgebras.html#14187" class="Bound">p</a> <a id="14189" href="Varieties.FreeAlgebras.html#14189" class="Bound">q</a> <a id="14191" class="Symbol">→</a> <a id="14193" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14209" class="Symbol">(</a><a id="14210" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14212" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="14219" class="Symbol">(</a><a id="14220" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14223" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14225" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14226" class="Symbol">)</a> <a id="14228" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14230" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="14235" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14237" href="Varieties.FreeAlgebras.html#14187" class="Bound">p</a> <a id="14239" href="Varieties.FreeAlgebras.html#14189" class="Bound">q</a> <a id="14241" class="Symbol">))</a>
  <a id="14246" class="Symbol">→</a>                   <a id="14266" class="Symbol">(∀</a> <a id="14269" href="Varieties.FreeAlgebras.html#14269" class="Bound">C</a> <a id="14271" class="Symbol">→</a> <a id="14273" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14289" class="Symbol">(</a><a id="14290" href="Relations.Quotients.html#4338" class="Function">𝒞</a> <a id="14292" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14294" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="14301" class="Symbol">(</a><a id="14302" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14305" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14307" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14308" class="Symbol">)</a> <a id="14310" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14312" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="14317" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14319" href="Varieties.FreeAlgebras.html#14269" class="Bound">C</a><a id="14320" class="Symbol">))</a>
                      <a id="14345" class="Comment">--------------------------------------------------------</a>
  <a id="14404" class="Symbol">→</a>                   <a id="14424" class="Symbol">(((</a><a id="14427" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="14429" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="14430" class="Symbol">)</a> <a id="14432" href="Homomorphisms.Basic.html#7552" class="Function Operator">[</a> <a id="14434" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14436" href="Homomorphisms.Basic.html#7552" class="Function Operator">]/ker</a> <a id="14442" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a><a id="14446" class="Symbol">){</a><a id="14448" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14451" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14453" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14454" class="Symbol">})</a> <a id="14457" href="Subalgebras.Subalgebras.html#3794" class="Function Operator">≤</a> <a id="14459" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a>

 <a id="14463" href="Varieties.FreeAlgebras.html#14083" class="Function">free-quot-subalg-ℭ</a> <a id="14482" href="Varieties.FreeAlgebras.html#14482" class="Bound">fe</a> <a id="14485" href="Varieties.FreeAlgebras.html#14485" class="Bound">pe</a> <a id="14488" href="Varieties.FreeAlgebras.html#14488" class="Bound">UIPc</a> <a id="14493" href="Varieties.FreeAlgebras.html#14493" class="Bound">URPk</a> <a id="14498" href="Varieties.FreeAlgebras.html#14498" class="Bound">UIPb</a> <a id="14503" class="Symbol">=</a> <a id="14505" href="Subalgebras.Subalgebras.html#2562" class="Function">FirstHomColly</a> <a id="14519" class="Symbol">(</a><a id="14520" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="14522" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="14523" class="Symbol">)</a> <a id="14525" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14527" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="14532" href="Varieties.FreeAlgebras.html#14485" class="Bound">pe</a> <a id="14535" href="Varieties.FreeAlgebras.html#14482" class="Bound">fe</a> <a id="14538" href="Varieties.FreeAlgebras.html#14488" class="Bound">UIPc</a> <a id="14543" href="Varieties.FreeAlgebras.html#14493" class="Bound">URPk</a> <a id="14548" href="Varieties.FreeAlgebras.html#14498" class="Bound">UIPb</a>


 <a id="14556" class="Keyword">module</a> <a id="14563" href="Varieties.FreeAlgebras.html#14563" class="Module">_</a> <a id="14565" class="Comment">-- extensionality assumptions:</a>
          <a id="14606" class="Symbol">(</a><a id="14607" href="Varieties.FreeAlgebras.html#14607" class="Bound">hfe</a> <a id="14611" class="Symbol">:</a> <a id="14613" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="14621" class="Symbol">(</a><a id="14622" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14625" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14626" class="Symbol">)(</a><a id="14628" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14631" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14632" class="Symbol">))</a>
          <a id="14645" class="Symbol">(</a><a id="14646" href="Varieties.FreeAlgebras.html#14646" class="Bound">pe</a> <a id="14649" class="Symbol">:</a> <a id="14651" href="Relations.Truncation.html#7801" class="Function">prop-ext</a> <a id="14660" class="Symbol">(</a><a id="14661" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14664" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14665" class="Symbol">)(</a><a id="14667" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14670" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="14671" class="Symbol">))</a>

          <a id="14685" class="Comment">-- truncation assumptions:</a>
          <a id="14722" class="Symbol">(</a><a id="14723" href="Varieties.FreeAlgebras.html#14723" class="Bound">Cset</a> <a id="14728" class="Symbol">:</a> <a id="14730" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="14737" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14739" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14741" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="14742" class="Symbol">)</a>
          <a id="14754" class="Symbol">(</a><a id="14755" href="Varieties.FreeAlgebras.html#14755" class="Bound">ssR</a> <a id="14759" class="Symbol">:</a> <a id="14761" class="Symbol">∀</a> <a id="14763" href="Varieties.FreeAlgebras.html#14763" class="Bound">p</a> <a id="14765" href="Varieties.FreeAlgebras.html#14765" class="Bound">q</a> <a id="14767" class="Symbol">→</a> <a id="14769" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14785" class="Symbol">(</a><a id="14786" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14788" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="14795" class="Symbol">(</a><a id="14796" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14799" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14801" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14802" class="Symbol">)</a> <a id="14804" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14806" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="14811" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14813" href="Varieties.FreeAlgebras.html#14763" class="Bound">p</a> <a id="14815" href="Varieties.FreeAlgebras.html#14765" class="Bound">q</a><a id="14816" class="Symbol">))</a>
          <a id="14829" class="Symbol">(</a><a id="14830" href="Varieties.FreeAlgebras.html#14830" class="Bound">ssC</a> <a id="14834" class="Symbol">:</a> <a id="14836" class="Symbol">∀</a> <a id="14838" href="Varieties.FreeAlgebras.html#14838" class="Bound">C</a> <a id="14840" class="Symbol">→</a> <a id="14842" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14858" class="Symbol">(</a><a id="14859" href="Relations.Quotients.html#4338" class="Function">𝒞</a> <a id="14861" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14863" href="Homomorphisms.Basic.html#7083" class="Function">kercon</a> <a id="14870" class="Symbol">(</a><a id="14871" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14874" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14876" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14877" class="Symbol">)</a> <a id="14879" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14881" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a> <a id="14886" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14888" href="Varieties.FreeAlgebras.html#14838" class="Bound">C</a><a id="14889" class="Symbol">))</a>

  <a id="14895" class="Keyword">where</a>

  <a id="14904" href="Varieties.FreeAlgebras.html#14904" class="Function">𝔽≤ℭ</a> <a id="14908" class="Symbol">:</a> <a id="14910" class="Symbol">(((</a><a id="14913" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="14915" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="14916" class="Symbol">)</a> <a id="14918" href="Homomorphisms.Basic.html#7552" class="Function Operator">[</a> <a id="14920" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a> <a id="14922" href="Homomorphisms.Basic.html#7552" class="Function Operator">]/ker</a> <a id="14928" href="Varieties.FreeAlgebras.html#9629" class="Function">homℭ</a><a id="14932" class="Symbol">){</a><a id="14934" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14937" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14939" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14940" class="Symbol">})</a> <a id="14943" href="Subalgebras.Subalgebras.html#3794" class="Function Operator">≤</a> <a id="14945" href="Varieties.FreeAlgebras.html#9364" class="Function">ℭ</a>
  <a id="14949" href="Varieties.FreeAlgebras.html#14904" class="Function">𝔽≤ℭ</a> <a id="14953" class="Symbol">=</a> <a id="14955" href="Varieties.FreeAlgebras.html#14083" class="Function">free-quot-subalg-ℭ</a> <a id="14974" class="Symbol">(</a><a id="14975" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="14978" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14980" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="14981" class="Symbol">)</a> <a id="14983" href="Varieties.FreeAlgebras.html#14646" class="Bound">pe</a> <a id="14986" href="Varieties.FreeAlgebras.html#14723" class="Bound">Cset</a> <a id="14991" href="Varieties.FreeAlgebras.html#14755" class="Bound">ssR</a> <a id="14995" href="Varieties.FreeAlgebras.html#14830" class="Bound">ssC</a>

  <a id="15002" href="Varieties.FreeAlgebras.html#15002" class="Function">𝕍𝒦</a> <a id="15005" class="Symbol">:</a> <a id="15007" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="15012" class="Symbol">(</a><a id="15013" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="15021" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="15024" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="15025" class="Symbol">)</a> <a id="15027" class="Symbol">(</a><a id="15028" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="15031" href="Universes.html#181" class="Function Operator">⁺</a><a id="15032" class="Symbol">)</a>
  <a id="15036" href="Varieties.FreeAlgebras.html#15002" class="Function">𝕍𝒦</a> <a id="15039" class="Symbol">=</a> <a id="15041" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="15042" class="Symbol">{</a><a id="15043" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="15044" class="Symbol">}{</a><a id="15046" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="15048" class="Symbol">}</a> <a id="15050" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>


</pre>

The last piece we need to prove that every model of `Th 𝕍𝒦` is a homomorphic image of `𝔽` is a crucial assumption that is taken for granted throughout informal universal algebra---namely, that our collection `X` of variable symbols is arbitrarily large and that we have an *environment* which interprets the variable symbols in every algebra under consideration. In other terms, an environment provides, for every algebra `𝑨`, a surjective mapping `η : X → ∣ 𝑨 ∣` from `X` onto the domain of `𝑨`.

We do *not* assert that for an arbitrary type `X` such surjective maps exist.  Indeed, our `X` must is quite special to have this property.  Later, we will construct such an `X`, but for now we simply postulate its existence. Note that this assumption that an environment exists is only required in the proof of the theorem `𝔽-ModTh-epi`.

<pre class="Agda">

  <a id="15920" href="Varieties.FreeAlgebras.html#15920" class="Function Operator">_↠_</a> <a id="15924" class="Symbol">:</a> <a id="15926" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a> <a id="15928" href="Universes.html#403" class="Function Operator">̇</a> <a id="15930" class="Symbol">→</a> <a id="15932" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="15940" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="15943" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a> <a id="15945" class="Symbol">→</a> <a id="15947" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="15950" href="Universes.html#403" class="Function Operator">̇</a>
  <a id="15954" href="Varieties.FreeAlgebras.html#15954" class="Bound">X</a> <a id="15956" href="Varieties.FreeAlgebras.html#15920" class="Function Operator">↠</a> <a id="15958" href="Varieties.FreeAlgebras.html#15958" class="Bound">𝑨</a> <a id="15960" class="Symbol">=</a> <a id="15962" href="MGS-MLTT.html#3074" class="Function">Σ</a> <a id="15964" href="Varieties.FreeAlgebras.html#15964" class="Bound">h</a> <a id="15966" href="MGS-MLTT.html#3074" class="Function">꞉</a> <a id="15968" class="Symbol">(</a><a id="15969" href="Varieties.FreeAlgebras.html#15954" class="Bound">X</a> <a id="15971" class="Symbol">→</a> <a id="15973" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="15975" href="Varieties.FreeAlgebras.html#15958" class="Bound">𝑨</a> <a id="15977" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="15978" class="Symbol">)</a> <a id="15980" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="15982" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="15987" href="Varieties.FreeAlgebras.html#15964" class="Bound">h</a>

  <a id="15992" href="Varieties.FreeAlgebras.html#15992" class="Function">𝔽-ModTh-epi</a> <a id="16004" class="Symbol">:</a> <a id="16006" class="Symbol">(</a><a id="16007" href="Varieties.FreeAlgebras.html#16007" class="Bound">𝑨</a> <a id="16009" class="Symbol">:</a> <a id="16011" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="16019" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="16022" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="16023" class="Symbol">)</a> <a id="16025" class="Symbol">→</a> <a id="16027" class="Symbol">(</a><a id="16028" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="16030" href="Varieties.FreeAlgebras.html#15920" class="Function Operator">↠</a> <a id="16032" href="Varieties.FreeAlgebras.html#16007" class="Bound">𝑨</a><a id="16033" class="Symbol">)</a> <a id="16035" class="Symbol">→</a> <a id="16037" href="Varieties.FreeAlgebras.html#16007" class="Bound">𝑨</a> <a id="16039" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="16041" href="Varieties.EquationalLogic.html#3929" class="Function">Mod</a> <a id="16045" class="Symbol">(</a><a id="16046" href="Varieties.EquationalLogic.html#3641" class="Function">Th</a> <a id="16049" href="Varieties.FreeAlgebras.html#15002" class="Function">𝕍𝒦</a><a id="16051" class="Symbol">)</a> <a id="16053" class="Symbol">→</a> <a id="16055" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="16059" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="16061" href="Varieties.FreeAlgebras.html#16007" class="Bound">𝑨</a>
  <a id="16065" href="Varieties.FreeAlgebras.html#15992" class="Function">𝔽-ModTh-epi</a> <a id="16077" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16079" class="Symbol">(</a><a id="16080" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a> <a id="16082" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16084" href="Varieties.FreeAlgebras.html#16084" class="Bound">ηE</a><a id="16086" class="Symbol">)</a> <a id="16088" href="Varieties.FreeAlgebras.html#16088" class="Bound">AinMTV</a> <a id="16095" class="Symbol">=</a> <a id="16097" href="Varieties.FreeAlgebras.html#16699" class="Function">γ</a>
   <a id="16102" class="Keyword">where</a>
    <a id="16112" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16114" class="Symbol">:</a> <a id="16116" href="Homomorphisms.Basic.html#2044" class="Function">hom</a> <a id="16120" class="Symbol">(</a><a id="16121" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="16123" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="16124" class="Symbol">)</a> <a id="16126" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a>
    <a id="16132" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16134" class="Symbol">=</a> <a id="16136" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="16145" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16147" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a>

    <a id="16154" href="Varieties.FreeAlgebras.html#16154" class="Function">φE</a> <a id="16157" class="Symbol">:</a> <a id="16159" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="16164" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16166" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16168" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
    <a id="16174" href="Varieties.FreeAlgebras.html#16154" class="Function">φE</a> <a id="16177" class="Symbol">=</a> <a id="16179" href="Terms.Basic.html#6934" class="Function">lift-of-epi-is-epi</a> <a id="16198" href="Varieties.FreeAlgebras.html#16084" class="Bound">ηE</a>

    <a id="16206" href="Varieties.FreeAlgebras.html#16206" class="Function">pqlem2</a> <a id="16213" class="Symbol">:</a> <a id="16215" class="Symbol">∀</a> <a id="16217" href="Varieties.FreeAlgebras.html#16217" class="Bound">p</a> <a id="16219" href="Varieties.FreeAlgebras.html#16219" class="Bound">q</a> <a id="16221" class="Symbol">→</a> <a id="16223" class="Symbol">(</a><a id="16224" href="Varieties.FreeAlgebras.html#16217" class="Bound">p</a> <a id="16226" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16228" href="Varieties.FreeAlgebras.html#16219" class="Bound">q</a><a id="16229" class="Symbol">)</a> <a id="16231" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="16233" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16240" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16242" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="16247" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16249" class="Symbol">→</a> <a id="16251" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16253" href="Varieties.EquationalLogic.html#2682" class="Function Operator">⊧</a> <a id="16255" href="Varieties.FreeAlgebras.html#16217" class="Bound">p</a> <a id="16257" href="Varieties.EquationalLogic.html#2682" class="Function Operator">≈</a> <a id="16259" href="Varieties.FreeAlgebras.html#16219" class="Bound">q</a>
    <a id="16265" href="Varieties.FreeAlgebras.html#16206" class="Function">pqlem2</a> <a id="16272" href="Varieties.FreeAlgebras.html#16272" class="Bound">p</a> <a id="16274" href="Varieties.FreeAlgebras.html#16274" class="Bound">q</a> <a id="16276" href="Varieties.FreeAlgebras.html#16276" class="Bound">hyp</a> <a id="16280" class="Symbol">=</a> <a id="16282" href="Varieties.FreeAlgebras.html#16088" class="Bound">AinMTV</a> <a id="16289" href="Varieties.FreeAlgebras.html#16272" class="Bound">p</a> <a id="16291" href="Varieties.FreeAlgebras.html#16274" class="Bound">q</a> <a id="16293" class="Symbol">(</a><a id="16294" href="Varieties.FreeAlgebras.html#13927" class="Function">kernel-in-theory</a> <a id="16311" href="Varieties.FreeAlgebras.html#16276" class="Bound">hyp</a><a id="16314" class="Symbol">)</a>

    <a id="16321" href="Varieties.FreeAlgebras.html#16321" class="Function">kerincl</a> <a id="16329" class="Symbol">:</a> <a id="16331" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16338" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16340" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="16345" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16347" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="16349" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16356" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16358" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16360" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
    <a id="16366" href="Varieties.FreeAlgebras.html#16321" class="Function">kerincl</a> <a id="16374" class="Symbol">{</a><a id="16375" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16377" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16379" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a><a id="16380" class="Symbol">}</a> <a id="16382" href="Varieties.FreeAlgebras.html#16382" class="Bound">x</a> <a id="16384" class="Symbol">=</a> <a id="16386" href="Varieties.FreeAlgebras.html#16452" class="Function">γ</a>
     <a id="16393" class="Keyword">where</a>
      <a id="16405" href="Varieties.FreeAlgebras.html#16405" class="Function">Apq</a> <a id="16409" class="Symbol">:</a> <a id="16411" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16413" href="Varieties.EquationalLogic.html#2682" class="Function Operator">⊧</a> <a id="16415" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16417" href="Varieties.EquationalLogic.html#2682" class="Function Operator">≈</a> <a id="16419" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a>
      <a id="16427" href="Varieties.FreeAlgebras.html#16405" class="Function">Apq</a> <a id="16431" class="Symbol">=</a> <a id="16433" href="Varieties.FreeAlgebras.html#16206" class="Function">pqlem2</a> <a id="16440" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16442" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a> <a id="16444" href="Varieties.FreeAlgebras.html#16382" class="Bound">x</a>
      <a id="16452" href="Varieties.FreeAlgebras.html#16452" class="Function">γ</a> <a id="16454" class="Symbol">:</a> <a id="16456" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16458" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16460" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16462" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16464" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="16466" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16468" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16470" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16472" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a>
      <a id="16480" href="Varieties.FreeAlgebras.html#16452" class="Function">γ</a> <a id="16482" class="Symbol">=</a> <a id="16484" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16486" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16488" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16490" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a>          <a id="16501" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16504" class="Symbol">(</a><a id="16505" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="16522" class="Symbol">(</a><a id="16523" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="16526" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="16528" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="16530" class="Symbol">)</a> <a id="16532" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16534" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a> <a id="16536" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a><a id="16537" class="Symbol">)</a><a id="16538" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="16541" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16553" class="Symbol">(</a><a id="16554" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16556" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="16558" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16560" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="16561" class="Symbol">)</a> <a id="16563" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a>      <a id="16570" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16573" href="Overture.Extensionality.html#6472" class="Function">extfun</a> <a id="16580" class="Symbol">(</a><a id="16581" href="Varieties.FreeAlgebras.html#16206" class="Function">pqlem2</a> <a id="16588" href="Varieties.FreeAlgebras.html#16375" class="Bound">p</a> <a id="16590" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a> <a id="16592" href="Varieties.FreeAlgebras.html#16382" class="Bound">x</a><a id="16593" class="Symbol">)</a> <a id="16595" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a>  <a id="16598" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16610" class="Symbol">(</a><a id="16611" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16613" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="16615" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a> <a id="16617" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="16618" class="Symbol">)</a> <a id="16620" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a>      <a id="16627" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16630" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="16647" class="Symbol">(</a><a id="16648" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="16651" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="16653" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="16655" class="Symbol">)</a> <a id="16657" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16659" href="Varieties.FreeAlgebras.html#16080" class="Bound">η</a> <a id="16661" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a> <a id="16663" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16675" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16677" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16679" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16681" href="Varieties.FreeAlgebras.html#16379" class="Bound">q</a>          <a id="16692" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

    <a id="16699" href="Varieties.FreeAlgebras.html#16699" class="Function">γ</a> <a id="16701" class="Symbol">:</a> <a id="16703" href="Homomorphisms.Basic.html#4062" class="Function">epi</a> <a id="16707" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="16709" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a>
    <a id="16715" href="Varieties.FreeAlgebras.html#16699" class="Function">γ</a> <a id="16717" class="Symbol">=</a> <a id="16719" href="Overture.Preliminaries.html#13836" class="Function">fst</a> <a id="16723" class="Symbol">(</a><a id="16724" href="Homomorphisms.Noether.html#11869" class="Function">HomFactorEpi</a> <a id="16737" class="Symbol">(</a><a id="16738" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="16741" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="16743" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="16745" class="Symbol">)(</a><a id="16747" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="16750" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="16753" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="16755" class="Symbol">)(</a><a id="16757" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="16760" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="16763" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="16765" class="Symbol">)</a> <a id="16767" href="Varieties.FreeAlgebras.html#16077" class="Bound">𝑨</a> <a id="16769" href="Varieties.FreeAlgebras.html#16112" class="Function">φ</a> <a id="16771" href="Varieties.FreeAlgebras.html#10188" class="Function">hom𝔽</a> <a id="16776" href="Varieties.FreeAlgebras.html#16321" class="Function">kerincl</a> <a id="16784" href="Varieties.FreeAlgebras.html#10235" class="Function">hom𝔽-is-epic</a> <a id="16797" href="Varieties.FreeAlgebras.html#16154" class="Function">φE</a><a id="16799" class="Symbol">)</a>

</pre>

#### <a id="F-in-VK">𝔽 ∈ V(𝒦)</a>

With this result in hand, along with what we proved earlier---namely, `PS(𝒦) ⊆ SP(𝒦) ⊆ HSP(𝒦) ≡ V 𝒦`---it is not hard to show that `𝔽` belongs to `V 𝒦`.

<pre class="Agda">

  <a id="17019" class="Keyword">open</a> <a id="17024" href="Varieties.Varieties.html#16236" class="Module">Vlift</a> <a id="17030" class="Symbol">{</a><a id="17031" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="17032" class="Symbol">}{</a><a id="17034" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="17037" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="17039" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="17040" class="Symbol">}{</a><a id="17042" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="17045" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a> <a id="17048" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="17050" class="Symbol">}{</a><a id="17052" href="Varieties.FreeAlgebras.html#8739" class="Bound">fe</a> <a id="17055" href="Varieties.Preservation.html#756" class="Function">𝓕</a> <a id="17057" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="17058" class="Symbol">}{</a><a id="17060" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="17061" class="Symbol">}</a>

  <a id="17066" href="Varieties.FreeAlgebras.html#17066" class="Function">𝔽∈SP</a> <a id="17071" class="Symbol">:</a> <a id="17073" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="17075" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17077" class="Symbol">(</a><a id="17078" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="17079" class="Symbol">{</a><a id="17080" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="17081" class="Symbol">}{</a><a id="17083" href="Varieties.Preservation.html#758" class="Function">𝓕⁺</a><a id="17085" class="Symbol">}</a> <a id="17087" class="Symbol">(</a><a id="17088" href="Varieties.Varieties.html#3548" class="Datatype">P</a><a id="17089" class="Symbol">{</a><a id="17090" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="17091" class="Symbol">}{</a><a id="17093" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="17094" class="Symbol">}</a> <a id="17096" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="17097" class="Symbol">))</a>
  <a id="17102" href="Varieties.FreeAlgebras.html#17066" class="Function">𝔽∈SP</a> <a id="17107" class="Symbol">=</a> <a id="17109" href="Varieties.Varieties.html#3070" class="InductiveConstructor">ssub</a> <a id="17114" class="Symbol">(</a><a id="17115" href="Varieties.Varieties.html#21859" class="Function">class-prod-s-∈-sp</a> <a id="17133" href="Varieties.FreeAlgebras.html#14607" class="Bound">hfe</a><a id="17136" class="Symbol">)</a> <a id="17138" href="Varieties.FreeAlgebras.html#14904" class="Function">𝔽≤ℭ</a>

  <a id="17145" href="Varieties.FreeAlgebras.html#17145" class="Function">𝔽∈𝕍</a> <a id="17149" class="Symbol">:</a> <a id="17151" href="Varieties.FreeAlgebras.html#10083" class="Function">𝔽</a> <a id="17153" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17155" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17157" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>
  <a id="17161" href="Varieties.FreeAlgebras.html#17145" class="Function">𝔽∈𝕍</a> <a id="17165" class="Symbol">=</a> <a id="17167" href="Varieties.Varieties.html#18217" class="Function">SP⊆V&#39;</a> <a id="17173" href="Varieties.FreeAlgebras.html#17066" class="Function">𝔽∈SP</a>

</pre>

#### <a id="the-hsp-theorem"> The HSP Theorem</a>

Now that we have all of the necessary ingredients, it is all but trivial to combine them to prove Birkhoff's HSP theorem. (Note that since the proof enlists the help of the `𝔽-ModTh-epi` theorem, we must assume an environment exists, which is manifested in the premise `∀ 𝑨 → X ↠ 𝑨`.

<pre class="Agda">

  <a id="17543" href="Varieties.FreeAlgebras.html#17543" class="Function">birkhoff</a> <a id="17552" class="Symbol">:</a> <a id="17554" class="Symbol">(∀</a> <a id="17557" href="Varieties.FreeAlgebras.html#17557" class="Bound">𝑨</a> <a id="17559" class="Symbol">→</a> <a id="17561" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="17563" href="Varieties.FreeAlgebras.html#15920" class="Function Operator">↠</a> <a id="17565" href="Varieties.FreeAlgebras.html#17557" class="Bound">𝑨</a><a id="17566" class="Symbol">)</a> <a id="17568" class="Symbol">→</a> <a id="17570" href="Varieties.EquationalLogic.html#3929" class="Function">Mod</a> <a id="17574" class="Symbol">(</a><a id="17575" href="Varieties.EquationalLogic.html#3641" class="Function">Th</a> <a id="17578" class="Symbol">(</a><a id="17579" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17581" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="17582" class="Symbol">))</a> <a id="17585" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="17587" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17589" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a>

  <a id="17594" href="Varieties.FreeAlgebras.html#17543" class="Function">birkhoff</a> <a id="17603" href="Varieties.FreeAlgebras.html#17603" class="Bound">𝕏</a> <a id="17605" class="Symbol">{</a><a id="17606" href="Varieties.FreeAlgebras.html#17606" class="Bound">𝑨</a><a id="17607" class="Symbol">}</a> <a id="17609" href="Varieties.FreeAlgebras.html#17609" class="Bound">α</a> <a id="17611" class="Symbol">=</a> <a id="17613" href="Varieties.FreeAlgebras.html#17628" class="Function">γ</a>
   <a id="17618" class="Keyword">where</a>
    <a id="17628" href="Varieties.FreeAlgebras.html#17628" class="Function">γ</a> <a id="17630" class="Symbol">:</a> <a id="17632" href="Varieties.FreeAlgebras.html#17606" class="Bound">𝑨</a> <a id="17634" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17636" class="Symbol">(</a><a id="17637" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17639" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="17640" class="Symbol">)</a>
    <a id="17646" href="Varieties.FreeAlgebras.html#17628" class="Function">γ</a> <a id="17648" class="Symbol">=</a> <a id="17650" href="Varieties.Varieties.html#4771" class="InductiveConstructor">vhimg</a> <a id="17656" href="Varieties.FreeAlgebras.html#17145" class="Function">𝔽∈𝕍</a> <a id="17660" class="Symbol">((</a><a id="17662" href="Varieties.FreeAlgebras.html#17606" class="Bound">𝑨</a> <a id="17664" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="17666" href="Varieties.FreeAlgebras.html#15992" class="Function">𝔽-ModTh-epi</a> <a id="17678" href="Varieties.FreeAlgebras.html#17606" class="Bound">𝑨</a> <a id="17680" class="Symbol">(</a><a id="17681" href="Varieties.FreeAlgebras.html#17603" class="Bound">𝕏</a> <a id="17683" href="Varieties.FreeAlgebras.html#17606" class="Bound">𝑨</a><a id="17684" class="Symbol">)</a> <a id="17686" href="Varieties.FreeAlgebras.html#17609" class="Bound">α</a> <a id="17688" class="Symbol">)</a> <a id="17690" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="17692" href="Homomorphisms.Isomorphisms.html#1451" class="Function">≅-refl</a><a id="17698" class="Symbol">)</a>

</pre>

The converse inclusion, `V 𝒦 ⊆ Mod X (Th (V 𝒦))`, is a simple consequence of the fact that `Mod Th` is a closure operator. Nonetheless, completeness demands that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

  <a id="17956" href="Varieties.FreeAlgebras.html#17956" class="Function">birkhoff&#39;</a> <a id="17966" class="Symbol">:</a> <a id="17968" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="17969" class="Symbol">{</a><a id="17970" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓤</a><a id="17971" class="Symbol">}{</a><a id="17973" href="Varieties.Preservation.html#756" class="Function">𝓕</a><a id="17974" class="Symbol">}</a> <a id="17976" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a> <a id="17978" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="17980" href="Varieties.EquationalLogic.html#3929" class="Function">Mod</a> <a id="17984" class="Symbol">(</a><a id="17985" href="Varieties.EquationalLogic.html#3641" class="Function">Th</a> <a id="17988" class="Symbol">(</a><a id="17989" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17991" href="Varieties.FreeAlgebras.html#8754" class="Bound">𝒦</a><a id="17992" class="Symbol">))</a>
  <a id="17997" href="Varieties.FreeAlgebras.html#17956" class="Function">birkhoff&#39;</a> <a id="18007" href="Varieties.FreeAlgebras.html#18007" class="Bound">α</a> <a id="18009" href="Varieties.FreeAlgebras.html#18009" class="Bound">p</a> <a id="18011" href="Varieties.FreeAlgebras.html#18011" class="Bound">q</a> <a id="18013" href="Varieties.FreeAlgebras.html#18013" class="Bound">pThq</a> <a id="18018" class="Symbol">=</a> <a id="18020" href="Varieties.FreeAlgebras.html#18013" class="Bound">pThq</a> <a id="18025" href="Varieties.FreeAlgebras.html#18007" class="Bound">α</a>

</pre>

We have thus proved that every variety is an equational class.  Readers familiar with the classical formulation of the Birkhoff HSP theorem, as an "if and only if" result, might worry that we haven't completed the proof.  But recall that in the [Varieties.Preservation][] module we proved the following identity preservation lemmas:

* [(H-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#964) 𝒦 ⊧ p ≋ q → H 𝒦 ⊧ p ≋ q
* [(S-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#2592) 𝒦 ⊧ p ≋ q → S 𝒦 ⊧ p ≋ q
* [(P-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#4111) 𝒦 ⊧ p ≋ q → P 𝒦 ⊧ p ≋ q

From these it follows that every equational class is a variety. Thus, our formal proof of Birkhoff's theorem is complete.

----------------------------

<sup>1</sup><span class="footnote" id="fn1"> Since `X` is not a subset of `𝔉`, technically it doesn't make sense to say "`X` generates `𝔉`." But as long as 𝒦 contains a nontrivial algebra, we will have `ψ(𝒦, 𝑻 𝑋) ∩ X² ≠ ∅`, and we can identify `X` with `X / ψ(𝒦, 𝑻 X)` which does belong to 𝔉.</span>

<sup>2</sup><span class="footnote" id="fn2"> In the previous version of the [UALib][] this section was part of a module called HSPTheorem module.</span>

<sup>3</sup><span class="footnote" id="fn3"> In earlier versions of the [Agda UALib][], the free algebra 𝔉 developed above played the role of the algebra 𝔽 with properties 1 and 2.  However, we found a more direct path to the proof using the algebra `𝔽 := (𝑻 X) [ ℭ ]/ker homℭ`.</span>

<sup>4</sup><span class="footnote" id="fn4"> It might be an instructive exercise to prove that `𝔽` is, in fact, isomorphic to the algebra `𝔉` that we defined earlier.</span>

<br>
<br>


[← Varieties.Preservation](Varieties.Preservation.html)
<span style="float:right;">[Varieties ↑](Varieties.html)</span>

{% include UALib.Links.md %}
