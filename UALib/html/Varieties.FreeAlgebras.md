---
layout: default
title : UALib.Varieties.FreeAlgebras module (Agda Universal Algebra Library)
date : 2021-03-01
author: William DeMeo
---

## <a id="free-algebras-and-birkhoffs-theorem">Free Algebras and Birkhoff's Theorem</a>

This section presents the [UALib.Varieties.FreeAlgebras][] module of the [Agda Universal Algebra Library][].

First we will define the relatively free algebra in a variety, which is the "freest" algebra among (universal for) those algebras that model all identities holding in the variety. Then we give a formal proof of Birkhoff's theorem which says that a variety is an equational class. In other terms, a class `𝒦` of algebras is closed under the operators `H`, `S`, and `P` if and only if 𝒦 is the class of algebras that satisfy some set of identities.

<pre class="Agda">

<a id="804" class="Symbol">{-#</a> <a id="808" class="Keyword">OPTIONS</a> <a id="816" class="Pragma">--without-K</a> <a id="828" class="Pragma">--exact-split</a> <a id="842" class="Pragma">--safe</a> <a id="849" class="Symbol">#-}</a>

<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Algebras.Signatures.html" class="Module">Algebras.Signatures</a> <a id="886" class="Keyword">using</a> <a id="892" class="Symbol">(</a><a id="893" href="Algebras.Signatures.html#1238" class="Function">Signature</a><a id="902" class="Symbol">;</a> <a id="904" href="Overture.Preliminaries.html#8157" class="Generalizable">𝓞</a><a id="905" class="Symbol">;</a> <a id="907" href="Universes.html#262" class="Generalizable">𝓥</a><a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="MGS-Subsingleton-Theorems.html" class="Module">MGS-Subsingleton-Theorems</a> <a id="948" class="Keyword">using</a> <a id="954" class="Symbol">(</a><a id="955" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="963" class="Symbol">;</a> <a id="965" href="Universes.html#403" class="Function Operator">_̇</a><a id="967" class="Symbol">)</a>

<a id="970" class="Keyword">module</a> <a id="977" href="Varieties.FreeAlgebras.html" class="Module">Varieties.FreeAlgebras</a> <a id="1000" class="Symbol">{</a><a id="1001" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a> <a id="1003" class="Symbol">:</a> <a id="1005" href="Algebras.Signatures.html#1238" class="Function">Signature</a> <a id="1015" href="Overture.Preliminaries.html#8157" class="Generalizable">𝓞</a> <a id="1017" href="Universes.html#262" class="Generalizable">𝓥</a><a id="1018" class="Symbol">}</a> <a id="1020" class="Symbol">{</a><a id="1021" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓧</a> <a id="1023" class="Symbol">:</a> <a id="1025" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="1033" class="Symbol">}{</a><a id="1035" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓧</a> <a id="1041" href="Universes.html#403" class="Function Operator">̇</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Keyword">where</a>

<a id="1051" class="Keyword">open</a> <a id="1056" class="Keyword">import</a> <a id="1063" href="Varieties.Preservation.html" class="Module">Varieties.Preservation</a> <a id="1086" class="Symbol">{</a><a id="1087" class="Argument">𝑆</a> <a id="1089" class="Symbol">=</a> <a id="1091" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="1092" class="Symbol">}{</a><a id="1094" href="Varieties.FreeAlgebras.html#1021" class="Bound">𝓧</a><a id="1095" class="Symbol">}{</a><a id="1097" href="Varieties.FreeAlgebras.html#1035" class="Bound">X</a><a id="1098" class="Symbol">}</a> <a id="1100" class="Keyword">public</a>

</pre>


#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in [the universal property](Terms.Basic.html#the-universal-property) section of the [Terms.Basic][] module that the term algebra `𝑻 X` is the absolutely free algebra in the class of all `𝑆`-structures. In this section, we formalize, for a given class `𝒦` of `𝑆`-algebras, the (relatively) free algebra in `S(P 𝒦)` over `X`.

We use the next definition to take a free algebra *for* a class `𝒦` and produce the free algebra *in* `𝒦`.

`Θ(𝒦, 𝑨) := {θ ∈ Con 𝑨 : 𝑨 / θ ∈ (S 𝒦)}` &nbsp; &nbsp; and &nbsp; &nbsp; `ψ(𝒦, 𝑨) := ⋂ Θ(𝒦, 𝑨)`.

Notice that `Θ(𝒦, 𝑨)` may be empty, in which case `ψ(𝒦, 𝑨) = 1` and then `𝑨 / ψ(𝒦, 𝑨)` is trivial.

The free algebra is constructed by applying the above definitions to the special case in which `𝑨` is the term algebra `𝑻 X` of `𝑆`-terms over `X`.

Since `𝑻 X` is free for (and in) the class of all `𝑆`-algebras, it follows that `𝑻 X` is free for every class `𝒦` of `𝑆`-algebras. Of course, `𝑻 X` is not necessarily a member of `𝒦`, but if we form the quotient of `𝑻 X` modulo the congruence `ψ(𝒦, 𝑻 X)`, which we denote by `𝔉 := (𝑻 X) / ψ(𝒦, 𝑻 X)`, then it's not hard to see that `𝔉` is a subdirect product of the algebras in `{(𝑻 𝑋) / θ}`, where `θ` ranges over `Θ(𝒦, 𝑻 X)`, so `𝔉` belongs to `S(P 𝒦)`, and it follows that `𝔉` satisfies all the identities satisfied by all members of `𝒦`.  Indeed, for each pair `p q : 𝑻 X`, if `𝒦 ⊧ p ≈ q`, then `p` and `q` must belong to the same `ψ(𝒦, 𝑻 X)`-class, so `p` and `q` are identified in the quotient `𝔉`.

The `𝔉` that we have just defined is called the **free algebra over** `𝒦` **generated by** `X` and (because of what we just observed) we may say that `𝔉` is free *in* `S(P 𝒦)`.<sup>[1](Varieties.FreeAlgebras.html#fn1)</sup>

#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

Here we represent `𝔉` as a type in Agda by first constructing the congruence `ψ(𝒦, 𝑻 𝑋)` described above.

We assume two ambient universes `𝓤` and `𝓧`, as well as a type `X : 𝓧 ̇`. As usual, this is accomplished with the `module` directive.

<pre class="Agda">

<a id="3246" class="Keyword">module</a> <a id="the-free-algebra"></a><a id="3253" href="Varieties.FreeAlgebras.html#3253" class="Module">the-free-algebra</a> <a id="3270" class="Symbol">{</a><a id="3271" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="3273" href="Varieties.FreeAlgebras.html#3273" class="Bound">𝓧</a> <a id="3275" class="Symbol">:</a> <a id="3277" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="3285" class="Symbol">}{</a><a id="3287" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a> <a id="3289" class="Symbol">:</a> <a id="3291" href="Varieties.FreeAlgebras.html#3273" class="Bound">𝓧</a> <a id="3293" href="Universes.html#403" class="Function Operator">̇</a><a id="3294" class="Symbol">}</a> <a id="3296" class="Keyword">where</a>

 <a id="3304" class="Comment">-- NOTATION (universe aliases for convenience and readability).</a>
 <a id="the-free-algebra.𝓸𝓿𝓾"></a><a id="3369" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a> <a id="the-free-algebra.𝓸𝓿𝓾+"></a><a id="3373" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="the-free-algebra.𝓸𝓿𝓾++"></a><a id="3378" href="Varieties.FreeAlgebras.html#3378" class="Function">𝓸𝓿𝓾++</a> <a id="3384" class="Symbol">:</a> <a id="3386" href="Agda.Primitive.html#423" class="Postulate">Universe</a>
 <a id="3396" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a> <a id="3400" class="Symbol">=</a> <a id="3402" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="3405" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a>
 <a id="3408" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="3413" class="Symbol">=</a> <a id="3415" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a> <a id="3419" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>
 <a id="3422" href="Varieties.FreeAlgebras.html#3378" class="Function">𝓸𝓿𝓾++</a> <a id="3428" class="Symbol">=</a> <a id="3430" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a> <a id="3434" href="Agda.Primitive.html#606" class="Function Operator">⁺</a> <a id="3436" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>

</pre>

We first construct the congruence relation `ψCon`, modulo which `𝑻 X` yields the relatively free algebra, `𝔉 𝒦 X := 𝑻 X ╱ ψCon`. We start by letting `ψ` be the collection of identities `(p, q)` satisfied by all subalgebras of algebras in `𝒦`.

<pre class="Agda">

 <a id="the-free-algebra.ψ"></a><a id="3710" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="3712" class="Symbol">:</a> <a id="3714" class="Symbol">(</a><a id="3715" href="Varieties.FreeAlgebras.html#3715" class="Bound">𝒦</a> <a id="3717" class="Symbol">:</a> <a id="3719" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3724" class="Symbol">(</a><a id="3725" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3733" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="3735" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="3736" class="Symbol">)</a> <a id="3738" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="3741" class="Symbol">)</a> <a id="3743" class="Symbol">→</a> <a id="3745" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="3750" class="Symbol">(</a><a id="3751" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3753" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="3755" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a> <a id="3757" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3759" href="MGS-MLTT.html#3515" class="Function Operator">×</a> <a id="3761" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3763" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="3765" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a> <a id="3767" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="3768" class="Symbol">)</a> <a id="3770" class="Symbol">(</a><a id="3771" href="Varieties.FreeAlgebras.html#3273" class="Bound">𝓧</a> <a id="3773" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="3775" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="3778" class="Symbol">)</a>
 <a id="3781" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="3783" href="Varieties.FreeAlgebras.html#3783" class="Bound">𝒦</a> <a id="3785" class="Symbol">(</a><a id="3786" href="Varieties.FreeAlgebras.html#3786" class="Bound">p</a> <a id="3788" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="3790" href="Varieties.FreeAlgebras.html#3790" class="Bound">q</a><a id="3791" class="Symbol">)</a> <a id="3793" class="Symbol">=</a> <a id="3795" class="Symbol">∀(</a><a id="3797" href="Varieties.FreeAlgebras.html#3797" class="Bound">𝑨</a> <a id="3799" class="Symbol">:</a> <a id="3801" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="3809" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="3811" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="3812" class="Symbol">)(</a><a id="3814" href="Varieties.FreeAlgebras.html#3814" class="Bound">sA</a> <a id="3817" class="Symbol">:</a> <a id="3819" href="Varieties.FreeAlgebras.html#3797" class="Bound">𝑨</a> <a id="3821" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="3823" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="3824" class="Symbol">{</a><a id="3825" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a><a id="3826" class="Symbol">}{</a><a id="3828" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a><a id="3829" class="Symbol">}</a> <a id="3831" href="Varieties.FreeAlgebras.html#3783" class="Bound">𝒦</a><a id="3832" class="Symbol">)(</a><a id="3834" href="Varieties.FreeAlgebras.html#3834" class="Bound">h</a> <a id="3836" class="Symbol">:</a> <a id="3838" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a> <a id="3840" class="Symbol">→</a> <a id="3842" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3844" href="Varieties.FreeAlgebras.html#3797" class="Bound">𝑨</a> <a id="3846" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="3848" class="Symbol">)</a>
                  <a id="3868" class="Symbol">→</a>  <a id="3871" class="Symbol">(</a><a id="3872" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3882" href="Varieties.FreeAlgebras.html#3797" class="Bound">𝑨</a> <a id="3884" href="Varieties.FreeAlgebras.html#3834" class="Bound">h</a><a id="3885" class="Symbol">)</a> <a id="3887" href="Varieties.FreeAlgebras.html#3786" class="Bound">p</a> <a id="3889" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="3891" class="Symbol">(</a><a id="3892" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="3902" href="Varieties.FreeAlgebras.html#3797" class="Bound">𝑨</a> <a id="3904" href="Varieties.FreeAlgebras.html#3834" class="Bound">h</a><a id="3905" class="Symbol">)</a> <a id="3907" href="Varieties.FreeAlgebras.html#3790" class="Bound">q</a>

</pre>

We convert the predicate ψ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

 <a id="the-free-algebra.ψRel"></a><a id="4036" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="4041" class="Symbol">:</a> <a id="4043" class="Symbol">(</a><a id="4044" href="Varieties.FreeAlgebras.html#4044" class="Bound">𝒦</a> <a id="4046" class="Symbol">:</a> <a id="4048" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4053" class="Symbol">(</a><a id="4054" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4062" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="4064" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4065" class="Symbol">)</a> <a id="4067" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="4070" class="Symbol">)</a> <a id="4072" class="Symbol">→</a> <a id="4074" href="Relations.Discrete.html#6780" class="Function">Rel</a> <a id="4078" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4080" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4082" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a> <a id="4084" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4086" class="Symbol">(</a><a id="4087" href="Varieties.FreeAlgebras.html#3273" class="Bound">𝓧</a> <a id="4089" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="4091" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="4094" class="Symbol">)</a>
 <a id="4097" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="4102" href="Varieties.FreeAlgebras.html#4102" class="Bound">𝒦</a> <a id="4104" href="Varieties.FreeAlgebras.html#4104" class="Bound">p</a> <a id="4106" href="Varieties.FreeAlgebras.html#4106" class="Bound">q</a> <a id="4108" class="Symbol">=</a> <a id="4110" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="4112" href="Varieties.FreeAlgebras.html#4102" class="Bound">𝒦</a> <a id="4114" class="Symbol">(</a><a id="4115" href="Varieties.FreeAlgebras.html#4104" class="Bound">p</a> <a id="4117" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="4119" href="Varieties.FreeAlgebras.html#4106" class="Bound">q</a><a id="4120" class="Symbol">)</a>

</pre>

To express `ψRel` as a congruence of the term algebra `𝑻 X`, we must prove that

1. `ψRel` is compatible with the operations of `𝑻 X` (which are jsut the terms themselves) and
2. `ψRel` it is an equivalence relation.

<pre class="Agda">

 <a id="the-free-algebra.ψcompatible"></a><a id="4368" href="Varieties.FreeAlgebras.html#4368" class="Function">ψcompatible</a> <a id="4380" class="Symbol">:</a> <a id="4382" class="Symbol">(</a><a id="4383" href="Varieties.FreeAlgebras.html#4383" class="Bound">𝒦</a> <a id="4385" class="Symbol">:</a> <a id="4387" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4392" class="Symbol">(</a><a id="4393" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4401" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="4403" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4404" class="Symbol">)</a> <a id="4406" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="4409" class="Symbol">){</a><a id="4411" href="Varieties.FreeAlgebras.html#4411" class="Bound">fe</a> <a id="4414" class="Symbol">:</a> <a id="4416" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="4424" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="4426" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a><a id="4427" class="Symbol">}</a> <a id="4429" class="Symbol">→</a> <a id="4431" href="Algebras.Algebras.html#5905" class="Function">compatible</a> <a id="4442" class="Symbol">(</a><a id="4443" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4445" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4446" class="Symbol">)(</a><a id="4448" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="4453" href="Varieties.FreeAlgebras.html#4383" class="Bound">𝒦</a><a id="4454" class="Symbol">)</a>
 <a id="4457" href="Varieties.FreeAlgebras.html#4368" class="Function">ψcompatible</a> <a id="4469" href="Varieties.FreeAlgebras.html#4469" class="Bound">𝒦</a><a id="4470" class="Symbol">{</a><a id="4471" href="Varieties.FreeAlgebras.html#4471" class="Bound">fe</a><a id="4473" class="Symbol">}</a> <a id="4475" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4477" class="Symbol">{</a><a id="4478" href="Varieties.FreeAlgebras.html#4478" class="Bound">p</a><a id="4479" class="Symbol">}</a> <a id="4481" class="Symbol">{</a><a id="4482" href="Varieties.FreeAlgebras.html#4482" class="Bound">q</a><a id="4483" class="Symbol">}</a> <a id="4485" href="Varieties.FreeAlgebras.html#4485" class="Bound">ψpq</a> <a id="4489" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a> <a id="4491" href="Varieties.FreeAlgebras.html#4491" class="Bound">sA</a> <a id="4494" href="Varieties.FreeAlgebras.html#4494" class="Bound">h</a> <a id="4496" class="Symbol">=</a> <a id="4498" href="Varieties.FreeAlgebras.html#4551" class="Function">γ</a>
  <a id="4502" class="Keyword">where</a>
   <a id="4511" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4513" class="Symbol">:</a> <a id="4515" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="4519" class="Symbol">(</a><a id="4520" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4522" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4523" class="Symbol">)</a> <a id="4525" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a>
   <a id="4530" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4532" class="Symbol">=</a> <a id="4534" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="4543" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a> <a id="4545" href="Varieties.FreeAlgebras.html#4494" class="Bound">h</a>

   <a id="4551" href="Varieties.FreeAlgebras.html#4551" class="Function">γ</a> <a id="4553" class="Symbol">:</a> <a id="4555" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4557" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4559" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4561" class="Symbol">((</a><a id="4563" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4565" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4567" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4569" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4570" class="Symbol">)</a> <a id="4572" href="Varieties.FreeAlgebras.html#4478" class="Bound">p</a><a id="4573" class="Symbol">)</a> <a id="4575" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="4577" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4579" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4581" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4583" class="Symbol">((</a><a id="4585" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4587" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4589" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4591" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4592" class="Symbol">)</a> <a id="4594" href="Varieties.FreeAlgebras.html#4482" class="Bound">q</a><a id="4595" class="Symbol">)</a>

   <a id="4601" href="Varieties.FreeAlgebras.html#4551" class="Function">γ</a> <a id="4603" class="Symbol">=</a> <a id="4605" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4607" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4609" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4611" class="Symbol">((</a><a id="4613" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4615" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4617" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4619" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4620" class="Symbol">)</a> <a id="4622" href="Varieties.FreeAlgebras.html#4478" class="Bound">p</a><a id="4623" class="Symbol">)</a>  <a id="4626" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4629" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4631" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4633" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4635" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4637" href="Varieties.FreeAlgebras.html#4478" class="Bound">p</a> <a id="4639" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="4648" class="Symbol">(</a><a id="4649" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4651" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4653" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a><a id="4654" class="Symbol">)</a> <a id="4656" class="Symbol">(</a><a id="4657" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4659" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4661" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4663" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="4665" href="Varieties.FreeAlgebras.html#4478" class="Bound">p</a><a id="4666" class="Symbol">)</a>  <a id="4669" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4672" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="4674" class="Symbol">(</a><a id="4675" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4677" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4679" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a><a id="4680" class="Symbol">)(</a><a id="4682" href="Varieties.FreeAlgebras.html#4471" class="Bound">fe</a> <a id="4685" class="Symbol">λ</a> <a id="4687" href="Varieties.FreeAlgebras.html#4687" class="Bound">x</a> <a id="4689" class="Symbol">→</a> <a id="4691" class="Symbol">(</a><a id="4692" href="Varieties.FreeAlgebras.html#4485" class="Bound">ψpq</a> <a id="4696" href="Varieties.FreeAlgebras.html#4687" class="Bound">x</a><a id="4697" class="Symbol">)</a> <a id="4699" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a> <a id="4701" href="Varieties.FreeAlgebras.html#4491" class="Bound">sA</a> <a id="4704" href="Varieties.FreeAlgebras.html#4494" class="Bound">h</a><a id="4705" class="Symbol">)</a> <a id="4707" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="4716" class="Symbol">(</a><a id="4717" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4719" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4721" href="Varieties.FreeAlgebras.html#4489" class="Bound">𝑨</a><a id="4722" class="Symbol">)</a> <a id="4724" class="Symbol">(</a><a id="4725" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4727" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4729" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4731" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="4733" href="Varieties.FreeAlgebras.html#4482" class="Bound">q</a><a id="4734" class="Symbol">)</a>  <a id="4737" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="4740" class="Symbol">(</a><a id="4741" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4743" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4745" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="4747" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4749" href="Varieties.FreeAlgebras.html#4482" class="Bound">q</a><a id="4750" class="Symbol">)</a><a id="4751" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="4754" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="4763" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4765" href="Varieties.FreeAlgebras.html#4511" class="Function">φ</a> <a id="4767" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="4769" class="Symbol">((</a><a id="4771" href="Varieties.FreeAlgebras.html#4475" class="Bound">𝑓</a> <a id="4773" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="4775" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="4777" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="4778" class="Symbol">)</a> <a id="4780" href="Varieties.FreeAlgebras.html#4482" class="Bound">q</a><a id="4781" class="Symbol">)</a>  <a id="4784" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

 <a id="the-free-algebra.ψRefl"></a><a id="4788" href="Varieties.FreeAlgebras.html#4788" class="Function">ψRefl</a> <a id="4794" class="Symbol">:</a> <a id="4796" class="Symbol">{</a><a id="4797" href="Varieties.FreeAlgebras.html#4797" class="Bound">𝒦</a> <a id="4799" class="Symbol">:</a> <a id="4801" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4806" class="Symbol">(</a><a id="4807" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4815" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="4817" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4818" class="Symbol">)</a> <a id="4820" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="4823" class="Symbol">}</a> <a id="4825" class="Symbol">→</a> <a id="4827" href="Relations.Quotients.html#1010" class="Function">reflexive</a> <a id="4837" class="Symbol">(</a><a id="4838" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="4843" href="Varieties.FreeAlgebras.html#4797" class="Bound">𝒦</a><a id="4844" class="Symbol">)</a>
 <a id="4847" href="Varieties.FreeAlgebras.html#4788" class="Function">ψRefl</a> <a id="4853" class="Symbol">=</a> <a id="4855" class="Symbol">λ</a> <a id="4857" href="Varieties.FreeAlgebras.html#4857" class="Bound">_</a> <a id="4859" href="Varieties.FreeAlgebras.html#4859" class="Bound">_</a> <a id="4861" href="Varieties.FreeAlgebras.html#4861" class="Bound">_</a> <a id="4863" href="Varieties.FreeAlgebras.html#4863" class="Bound">_</a> <a id="4865" class="Symbol">→</a> <a id="4867" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>

 <a id="the-free-algebra.ψSymm"></a><a id="4874" href="Varieties.FreeAlgebras.html#4874" class="Function">ψSymm</a> <a id="4880" class="Symbol">:</a> <a id="4882" class="Symbol">{</a><a id="4883" href="Varieties.FreeAlgebras.html#4883" class="Bound">𝒦</a> <a id="4885" class="Symbol">:</a> <a id="4887" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4892" class="Symbol">(</a><a id="4893" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="4901" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="4903" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="4904" class="Symbol">)</a> <a id="4906" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="4909" class="Symbol">}</a> <a id="4911" class="Symbol">→</a> <a id="4913" href="Relations.Quotients.html#1081" class="Function">symmetric</a> <a id="4923" class="Symbol">(</a><a id="4924" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="4929" href="Varieties.FreeAlgebras.html#4883" class="Bound">𝒦</a><a id="4930" class="Symbol">)</a>
 <a id="4933" href="Varieties.FreeAlgebras.html#4874" class="Function">ψSymm</a> <a id="4939" class="Symbol">_</a> <a id="4941" class="Symbol">_</a> <a id="4943" href="Varieties.FreeAlgebras.html#4943" class="Bound">pψRelq</a> <a id="4950" href="Varieties.FreeAlgebras.html#4950" class="Bound">𝑪</a> <a id="4952" href="Varieties.FreeAlgebras.html#4952" class="Bound">φ</a> <a id="4954" href="Varieties.FreeAlgebras.html#4954" class="Bound">h</a> <a id="4956" class="Symbol">=</a> <a id="4958" class="Symbol">(</a><a id="4959" href="Varieties.FreeAlgebras.html#4943" class="Bound">pψRelq</a> <a id="4966" href="Varieties.FreeAlgebras.html#4950" class="Bound">𝑪</a> <a id="4968" href="Varieties.FreeAlgebras.html#4952" class="Bound">φ</a> <a id="4970" href="Varieties.FreeAlgebras.html#4954" class="Bound">h</a><a id="4971" class="Symbol">)</a><a id="4972" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>

 <a id="the-free-algebra.ψTrans"></a><a id="4977" href="Varieties.FreeAlgebras.html#4977" class="Function">ψTrans</a> <a id="4984" class="Symbol">:</a> <a id="4986" class="Symbol">{</a><a id="4987" href="Varieties.FreeAlgebras.html#4987" class="Bound">𝒦</a> <a id="4989" class="Symbol">:</a> <a id="4991" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="4996" class="Symbol">(</a><a id="4997" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5005" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="5007" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5008" class="Symbol">)</a> <a id="5010" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="5013" class="Symbol">}</a> <a id="5015" class="Symbol">→</a> <a id="5017" href="Relations.Quotients.html#1259" class="Function">transitive</a> <a id="5028" class="Symbol">(</a><a id="5029" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="5034" href="Varieties.FreeAlgebras.html#4987" class="Bound">𝒦</a><a id="5035" class="Symbol">)</a>
 <a id="5038" href="Varieties.FreeAlgebras.html#4977" class="Function">ψTrans</a> <a id="5045" class="Symbol">_</a> <a id="5047" class="Symbol">_</a> <a id="5049" class="Symbol">_</a> <a id="5051" href="Varieties.FreeAlgebras.html#5051" class="Bound">pψq</a> <a id="5055" href="Varieties.FreeAlgebras.html#5055" class="Bound">qψr</a> <a id="5059" href="Varieties.FreeAlgebras.html#5059" class="Bound">𝑪</a> <a id="5061" href="Varieties.FreeAlgebras.html#5061" class="Bound">φ</a> <a id="5063" href="Varieties.FreeAlgebras.html#5063" class="Bound">h</a> <a id="5065" class="Symbol">=</a> <a id="5067" class="Symbol">(</a><a id="5068" href="Varieties.FreeAlgebras.html#5051" class="Bound">pψq</a> <a id="5072" href="Varieties.FreeAlgebras.html#5059" class="Bound">𝑪</a> <a id="5074" href="Varieties.FreeAlgebras.html#5061" class="Bound">φ</a> <a id="5076" href="Varieties.FreeAlgebras.html#5063" class="Bound">h</a><a id="5077" class="Symbol">)</a> <a id="5079" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="5081" class="Symbol">(</a><a id="5082" href="Varieties.FreeAlgebras.html#5055" class="Bound">qψr</a> <a id="5086" href="Varieties.FreeAlgebras.html#5059" class="Bound">𝑪</a> <a id="5088" href="Varieties.FreeAlgebras.html#5061" class="Bound">φ</a> <a id="5090" href="Varieties.FreeAlgebras.html#5063" class="Bound">h</a><a id="5091" class="Symbol">)</a>

 <a id="the-free-algebra.ψIsEquivalence"></a><a id="5095" href="Varieties.FreeAlgebras.html#5095" class="Function">ψIsEquivalence</a> <a id="5110" class="Symbol">:</a> <a id="5112" class="Symbol">{</a><a id="5113" href="Varieties.FreeAlgebras.html#5113" class="Bound">𝒦</a> <a id="5115" class="Symbol">:</a> <a id="5117" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="5122" class="Symbol">(</a><a id="5123" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5131" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="5133" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5134" class="Symbol">)</a> <a id="5136" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="5139" class="Symbol">}</a> <a id="5141" class="Symbol">→</a> <a id="5143" href="Relations.Quotients.html#2441" class="Record">IsEquivalence</a> <a id="5157" class="Symbol">(</a><a id="5158" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="5163" href="Varieties.FreeAlgebras.html#5113" class="Bound">𝒦</a><a id="5164" class="Symbol">)</a>
 <a id="5167" href="Varieties.FreeAlgebras.html#5095" class="Function">ψIsEquivalence</a> <a id="5182" class="Symbol">=</a> <a id="5184" class="Keyword">record</a> <a id="5191" class="Symbol">{</a> <a id="5193" href="Relations.Quotients.html#2505" class="Field">rfl</a> <a id="5197" class="Symbol">=</a> <a id="5199" href="Varieties.FreeAlgebras.html#4788" class="Function">ψRefl</a> <a id="5205" class="Symbol">;</a> <a id="5207" href="Relations.Quotients.html#2529" class="Field">sym</a> <a id="5211" class="Symbol">=</a> <a id="5213" href="Varieties.FreeAlgebras.html#4874" class="Function">ψSymm</a> <a id="5219" class="Symbol">;</a> <a id="5221" href="Relations.Quotients.html#2553" class="Field">trans</a> <a id="5227" class="Symbol">=</a> <a id="5229" href="Varieties.FreeAlgebras.html#4977" class="Function">ψTrans</a> <a id="5236" class="Symbol">}</a>

</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ψCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

 <a id="the-free-algebra.ψCon"></a><a id="5537" href="Varieties.FreeAlgebras.html#5537" class="Function">ψCon</a> <a id="5542" class="Symbol">:</a> <a id="5544" class="Symbol">(</a><a id="5545" href="Varieties.FreeAlgebras.html#5545" class="Bound">𝒦</a> <a id="5547" class="Symbol">:</a> <a id="5549" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="5554" class="Symbol">(</a><a id="5555" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5563" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a> <a id="5565" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5566" class="Symbol">)</a> <a id="5568" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="5571" class="Symbol">){</a><a id="5573" href="Varieties.FreeAlgebras.html#5573" class="Bound">fe</a> <a id="5576" class="Symbol">:</a> <a id="5578" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="5586" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="5588" href="Varieties.FreeAlgebras.html#3271" class="Bound">𝓤</a><a id="5589" class="Symbol">}</a> <a id="5591" class="Symbol">→</a> <a id="5593" href="Algebras.Congruences.html#1166" class="Record">Congruence</a> <a id="5604" class="Symbol">(</a><a id="5605" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="5607" href="Varieties.FreeAlgebras.html#3287" class="Bound">X</a><a id="5608" class="Symbol">)</a>
 <a id="5611" href="Varieties.FreeAlgebras.html#5537" class="Function">ψCon</a> <a id="5616" href="Varieties.FreeAlgebras.html#5616" class="Bound">𝒦</a> <a id="5618" class="Symbol">{</a><a id="5619" href="Varieties.FreeAlgebras.html#5619" class="Bound">fe</a><a id="5621" class="Symbol">}</a> <a id="5623" class="Symbol">=</a> <a id="5625" href="Algebras.Congruences.html#1244" class="InductiveConstructor">mkcon</a> <a id="5631" class="Symbol">(</a><a id="5632" href="Varieties.FreeAlgebras.html#4036" class="Function">ψRel</a> <a id="5637" href="Varieties.FreeAlgebras.html#5616" class="Bound">𝒦</a><a id="5638" class="Symbol">)</a> <a id="5640" href="Varieties.FreeAlgebras.html#5095" class="Function">ψIsEquivalence</a> <a id="5655" class="Symbol">(</a><a id="5656" href="Varieties.FreeAlgebras.html#4368" class="Function">ψcompatible</a> <a id="5668" href="Varieties.FreeAlgebras.html#5616" class="Bound">𝒦</a> <a id="5670" class="Symbol">{</a><a id="5671" href="Varieties.FreeAlgebras.html#5619" class="Bound">fe</a><a id="5673" class="Symbol">})</a>

</pre>


Finally, we are ready to define the type representing the relatively free algebra in Agda.  We denote this type by 𝔉 and define it as the quotient `𝑻 X ╱ (ψCon 𝒦)`.

<pre class="Agda">

<a id="5870" class="Keyword">module</a> <a id="the-relatively-free-algebra"></a><a id="5877" href="Varieties.FreeAlgebras.html#5877" class="Module">the-relatively-free-algebra</a>
       <a id="5912" class="Symbol">{</a><a id="5913" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a> <a id="5915" href="Varieties.FreeAlgebras.html#5915" class="Bound">𝓧</a> <a id="5917" class="Symbol">:</a> <a id="5919" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="5927" class="Symbol">}{</a><a id="5929" href="Varieties.FreeAlgebras.html#5929" class="Bound">X</a> <a id="5931" class="Symbol">:</a> <a id="5933" href="Varieties.FreeAlgebras.html#5915" class="Bound">𝓧</a> <a id="5935" href="Universes.html#403" class="Function Operator">̇</a><a id="5936" class="Symbol">}</a>
       <a id="5945" class="Symbol">{</a><a id="5946" href="Varieties.FreeAlgebras.html#5946" class="Bound">𝒦</a> <a id="5948" class="Symbol">:</a> <a id="5950" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="5955" class="Symbol">(</a><a id="5956" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="5964" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a> <a id="5966" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="5967" class="Symbol">)</a> <a id="5969" class="Symbol">(</a><a id="5970" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="5973" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a><a id="5974" class="Symbol">)}{</a><a id="5977" href="Varieties.FreeAlgebras.html#5977" class="Bound">fe</a> <a id="5980" class="Symbol">:</a> <a id="5982" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="5990" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="5992" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a><a id="5993" class="Symbol">}</a> <a id="5995" class="Keyword">where</a>

 <a id="6003" class="Keyword">open</a> <a id="6008" href="Varieties.FreeAlgebras.html#3253" class="Module">the-free-algebra</a><a id="6024" class="Symbol">{</a><a id="6025" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a><a id="6026" class="Symbol">}{</a><a id="6028" href="Varieties.FreeAlgebras.html#5915" class="Bound">𝓧</a><a id="6029" class="Symbol">}{</a><a id="6031" href="Varieties.FreeAlgebras.html#5929" class="Bound">X</a><a id="6032" class="Symbol">}</a>

 <a id="the-relatively-free-algebra.𝓕"></a><a id="6036" href="Varieties.FreeAlgebras.html#6036" class="Function">𝓕</a> <a id="6038" class="Symbol">:</a> <a id="6040" href="Agda.Primitive.html#423" class="Postulate">Universe</a> <a id="6049" class="Comment">-- (universe level of the relatively free algebra)</a>
 <a id="6101" href="Varieties.FreeAlgebras.html#6036" class="Function">𝓕</a> <a id="6103" class="Symbol">=</a> <a id="6105" class="Symbol">(</a><a id="6106" href="Varieties.FreeAlgebras.html#5915" class="Bound">𝓧</a> <a id="6108" href="Agda.Primitive.html#636" class="Function Operator">⊔</a> <a id="6110" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="6113" href="Varieties.FreeAlgebras.html#5913" class="Bound">𝓤</a><a id="6114" class="Symbol">)</a> <a id="6116" href="Agda.Primitive.html#606" class="Function Operator">⁺</a>

 <a id="the-relatively-free-algebra.𝔉"></a><a id="6120" href="Varieties.FreeAlgebras.html#6120" class="Function">𝔉</a> <a id="6122" class="Symbol">:</a> <a id="6124" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="6132" href="Varieties.FreeAlgebras.html#6036" class="Function">𝓕</a> <a id="6134" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="6137" href="Varieties.FreeAlgebras.html#6120" class="Function">𝔉</a> <a id="6139" class="Symbol">=</a>  <a id="6142" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="6144" href="Varieties.FreeAlgebras.html#5929" class="Bound">X</a> <a id="6146" href="Algebras.Congruences.html#3705" class="Function Operator">╱</a> <a id="6148" class="Symbol">(</a><a id="6149" href="Varieties.FreeAlgebras.html#5537" class="Function">ψCon</a> <a id="6154" href="Varieties.FreeAlgebras.html#5946" class="Bound">𝒦</a> <a id="6156" class="Symbol">{</a><a id="6157" href="Varieties.FreeAlgebras.html#5977" class="Bound">fe</a><a id="6159" class="Symbol">})</a>

</pre>

The domain of `𝔉` is `∣ 𝔉 ∣ = ∣ 𝑻 X ∣ / ⟨ ψCon 𝒦 ⟩`, which is equal to

`Σ C ꞉ _ ,  Σ p ꞉ ∣ 𝑻 X ∣ ,  C ≡ ( [ p ] ⟨ ψCon 𝒦 ⟩ )`.

This Sigma type denotes the set `{ C : ∃ p ∈ ∣ 𝑻 X ∣ , C ≡ [ p ] ⟨ ψCon 𝒦 ⟩ }` of `⟨ ψCon 𝒦 ⟩`-classses of terms, as desired.

We left the type of `C` implicit (using the underscore symbol) for readability.  Since `C` denotes a particular class of the congruence relation `ψCon 𝒦` of `𝑻 X`, and since congruence classes are subsets of the domain of the underlying algebra, the type of `C` is a predicate on the type of terms; specifically, `C : Pred ∣ 𝑻 X ∣ (𝓧 ⊔ 𝓸𝓿𝓾)`.





-----------------------------




#### <a id="hsp-theorem">HSP Theorem</a>

This section presents a formal proof of the Birkhoff HSP theorem.<sup>[2](Varieties.FreeAlgebras.html#fn2)</sup>

To complete the proof of Birkhoff's HSP theorem, it remains to show that every algebra 𝑨 that belongs to `Mod X (Th (V 𝒦))`---i.e., every algebra that models the equations in `Th (V 𝒦)`---belongs to `V 𝒦`.  This will prove that `V 𝒦` is an equational class.  (The converse, that every equational class is a variety was already proved; see the remarks at the end of this module.)

We accomplish this goal by constructing an algebra `𝔽` with the following properties:<sup>[3](Varieties.FreeAlgebras.html#fn3)</sup>

1. `𝔽 ∈ V 𝒦` and

2. Every `𝑨 ∈ Mod X (Th (V 𝒦))` is a homomorphic image of `𝔽`.

We denote by `ℭ` the product of all subalgebras of algebras in `𝒦`, and by `homℭ` the homomorphism from `𝑻 X` to `ℭ` defined as follows:

`homℭ := ⨅-hom-co (𝑻 X) 𝔄s hom𝔄`.

Here, `⨅-hom-co` (defined in [Homomorphisms.Basic](Homomorphisms.Basic.html#product-homomorphisms)) takes the term algebra `𝑻 X`, a family `{𝔄s : I → Algebra 𝓤 𝑆}` of `𝑆`-algebras, and a family `hom𝔄 : ∀ i → hom (𝑻 X) (𝔄s i)` of homomorphisms and constructs the natural homomorphism `homℭ` from `𝑻 X` to the product `ℭ := ⨅ 𝔄`.  The homomorphism `homℭ : hom (𝑻 X) (⨅ ℭ)` is natural in the sense that the `i`-th component of the image of `𝑡 : Term X` under `homℭ` is the image `∣ hom𝔄 i ∣ 𝑡` of 𝑡 under the i-th homomorphism `hom𝔄 i`.

<pre class="Agda">

<a id="8287" class="Keyword">module</a> <a id="HSPTheorem"></a><a id="8294" href="Varieties.FreeAlgebras.html#8294" class="Module">HSPTheorem</a> <a id="8305" class="Symbol">{</a><a id="8306" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8308" class="Symbol">:</a> <a id="8310" href="Agda.Primitive.html#423" class="Postulate">Universe</a><a id="8318" class="Symbol">}{</a><a id="8320" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="8322" class="Symbol">:</a> <a id="8324" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8326" href="Universes.html#403" class="Function Operator">̇</a><a id="8327" class="Symbol">}</a>
 <a id="8330" class="Symbol">{</a><a id="8331" href="Varieties.FreeAlgebras.html#8331" class="Bound">fuu</a> <a id="8335" class="Symbol">:</a> <a id="8337" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8345" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8347" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8348" class="Symbol">}</a>
 <a id="8351" class="Symbol">{</a><a id="8352" href="Varieties.FreeAlgebras.html#8352" class="Bound">fe₀</a> <a id="8356" class="Symbol">:</a> <a id="8358" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8366" class="Symbol">(</a><a id="8367" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8370" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8371" class="Symbol">)</a> <a id="8373" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8374" class="Symbol">}</a>
 <a id="8377" class="Symbol">{</a><a id="8378" href="Varieties.FreeAlgebras.html#8378" class="Bound">fe₁</a> <a id="8382" class="Symbol">:</a> <a id="8384" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8392" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8394" class="Symbol">((</a><a id="8396" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8399" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8400" class="Symbol">)</a> <a id="8402" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8403" class="Symbol">)}</a>
 <a id="8407" class="Symbol">{</a><a id="8408" href="Varieties.FreeAlgebras.html#8408" class="Bound">fe₂</a> <a id="8412" class="Symbol">:</a> <a id="8414" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8422" class="Symbol">((</a><a id="8424" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8427" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8428" class="Symbol">)</a> <a id="8430" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8431" class="Symbol">)</a> <a id="8433" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8434" class="Symbol">}</a>
 <a id="8437" class="Symbol">{</a><a id="8438" href="Varieties.FreeAlgebras.html#8438" class="Bound">fe₃</a> <a id="8442" class="Symbol">:</a> <a id="8444" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8452" class="Symbol">(</a><a id="8453" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8456" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8457" class="Symbol">)</a> <a id="8459" class="Symbol">(</a><a id="8460" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8463" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8464" class="Symbol">)}</a>
 <a id="8468" class="Symbol">{</a><a id="8469" href="Varieties.FreeAlgebras.html#8469" class="Bound">fe₄</a> <a id="8473" class="Symbol">:</a> <a id="8475" href="MGS-FunExt-from-Univalence.html#393" class="Function">funext</a> <a id="8482" class="Symbol">(</a><a id="8483" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8486" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8487" class="Symbol">)</a> <a id="8489" class="Symbol">((</a><a id="8491" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8494" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8495" class="Symbol">)</a> <a id="8497" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8498" class="Symbol">)}</a>
 <a id="8502" class="Symbol">{</a><a id="8503" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a> <a id="8507" class="Symbol">:</a> <a id="8509" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8517" class="Symbol">((</a><a id="8519" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8522" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8523" class="Symbol">)</a> <a id="8525" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8526" class="Symbol">)</a> <a id="8528" class="Symbol">((</a><a id="8530" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8533" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8534" class="Symbol">)</a> <a id="8536" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8537" class="Symbol">)}</a>
 <a id="8541" class="Symbol">{</a><a id="8542" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a> <a id="8546" class="Symbol">:</a> <a id="8548" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8556" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="8558" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8559" class="Symbol">}</a>
 <a id="8562" class="Symbol">{</a><a id="8563" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="8566" class="Symbol">:</a> <a id="8568" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8576" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="8578" class="Symbol">(</a><a id="8579" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8582" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8583" class="Symbol">)}</a>
 <a id="8587" class="Symbol">{</a><a id="8588" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a> <a id="8593" class="Symbol">:</a> <a id="8595" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="8603" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="8605" class="Symbol">(</a><a id="8606" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8609" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8611" href="Agda.Primitive.html#606" class="Function Operator">⁺</a><a id="8612" class="Symbol">)}</a>
 <a id="8616" class="Symbol">(</a><a id="8617" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="8619" class="Symbol">:</a> <a id="8621" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="8626" class="Symbol">(</a><a id="8627" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="8635" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="8637" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="8638" class="Symbol">)(</a><a id="8640" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="8643" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8644" class="Symbol">))</a>
 <a id="8648" class="Keyword">where</a>


 <a id="8657" class="Keyword">open</a> <a id="8662" href="Varieties.FreeAlgebras.html#3253" class="Module">the-free-algebra</a> <a id="8679" class="Symbol">{</a><a id="8680" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8681" class="Symbol">}{</a><a id="8683" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8684" class="Symbol">}{</a><a id="8686" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="8687" class="Symbol">}</a>
 <a id="8690" class="Keyword">open</a> <a id="8695" href="Varieties.FreeAlgebras.html#5877" class="Module">the-relatively-free-algebra</a> <a id="8723" class="Symbol">{</a><a id="8724" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8725" class="Symbol">}{</a><a id="8727" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8728" class="Symbol">}{</a><a id="8730" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="8731" class="Symbol">}{</a><a id="8733" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="8734" class="Symbol">}{</a><a id="8736" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a><a id="8739" class="Symbol">}</a>
 <a id="8742" class="Keyword">open</a> <a id="8747" href="Varieties.Varieties.html#19533" class="Module">class-products-with-maps</a> <a id="8772" class="Symbol">{</a><a id="8773" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="8774" class="Symbol">}{</a><a id="8776" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="8777" class="Symbol">}{</a><a id="8779" href="Varieties.FreeAlgebras.html#8352" class="Bound">fe₀</a><a id="8782" class="Symbol">}{</a><a id="8784" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a><a id="8787" class="Symbol">}{</a><a id="8789" href="Varieties.FreeAlgebras.html#8438" class="Bound">fe₃</a><a id="8792" class="Symbol">}</a> <a id="8794" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>

</pre>


#### <a id="F-in-classproduct">𝔽 ≤  ⨅ S(𝒦)</a>
Now we come to a step in the Agda formalization of Birkhoff's theorem that turns out to be surprisingly nontrivial. We must prove that the free algebra embeds in the product ℭ of all subalgebras of algebras in the class `𝒦`.  This is really the only stage in the proof of Birkhoff's theorem that requires the truncation assumption that `ℭ` be a set.

We begin by constructing `ℭ`, using the techniques described in the section on <a href="https://ualib.gitlab.io/Varieties.Varieties.html#products-of-classes">products of classes</a>.

<pre class="Agda">

 <a id="9407" class="Comment">-- NOTATION.</a>
 <a id="HSPTheorem.SK𝔄"></a><a id="9421" href="Varieties.FreeAlgebras.html#9421" class="Function">SK𝔄</a> <a id="9425" class="Symbol">:</a> <a id="9427" class="Symbol">(</a><a id="9428" href="Varieties.FreeAlgebras.html#9428" class="Bound">i</a> <a id="9430" class="Symbol">:</a> <a id="9432" href="Varieties.Varieties.html#19730" class="Function">ℑ</a><a id="9433" class="Symbol">)</a> <a id="9435" class="Symbol">→</a> <a id="9437" class="Symbol">(</a><a id="9438" href="Varieties.Varieties.html#20931" class="Function">𝔄</a> <a id="9440" href="Varieties.FreeAlgebras.html#9428" class="Bound">i</a><a id="9441" class="Symbol">)</a> <a id="9443" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="9445" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="9446" class="Symbol">{</a><a id="9447" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="9448" class="Symbol">}{</a><a id="9450" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="9451" class="Symbol">}</a> <a id="9453" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
 <a id="9456" href="Varieties.FreeAlgebras.html#9421" class="Function">SK𝔄</a> <a id="9460" class="Symbol">=</a> <a id="9462" class="Symbol">λ</a> <a id="9464" class="Symbol">(</a><a id="9465" href="Varieties.FreeAlgebras.html#9465" class="Bound">i</a> <a id="9467" class="Symbol">:</a> <a id="9469" href="Varieties.Varieties.html#19730" class="Function">ℑ</a><a id="9470" class="Symbol">)</a> <a id="9472" class="Symbol">→</a> <a id="9474" href="Overture.Preliminaries.html#13836" class="Function">fst</a> <a id="9478" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="9480" href="Varieties.FreeAlgebras.html#9465" class="Bound">i</a> <a id="9482" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a>

 <a id="HSPTheorem.𝔄h"></a><a id="9486" href="Varieties.FreeAlgebras.html#9486" class="Function">𝔄h</a> <a id="9489" class="Symbol">:</a> <a id="9491" class="Symbol">(</a><a id="9492" href="Varieties.FreeAlgebras.html#9492" class="Bound">i</a> <a id="9494" class="Symbol">:</a> <a id="9496" href="Varieties.Varieties.html#19730" class="Function">ℑ</a><a id="9497" class="Symbol">)</a> <a id="9499" class="Symbol">→</a> <a id="9501" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="9503" class="Symbol">→</a> <a id="9505" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="9507" href="Varieties.Varieties.html#20931" class="Function">𝔄</a> <a id="9509" href="Varieties.FreeAlgebras.html#9492" class="Bound">i</a> <a id="9511" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="9514" href="Varieties.FreeAlgebras.html#9486" class="Function">𝔄h</a> <a id="9517" class="Symbol">=</a> <a id="9519" class="Symbol">λ</a> <a id="9521" class="Symbol">(</a><a id="9522" href="Varieties.FreeAlgebras.html#9522" class="Bound">i</a> <a id="9524" class="Symbol">:</a> <a id="9526" href="Varieties.Varieties.html#19730" class="Function">ℑ</a><a id="9527" class="Symbol">)</a> <a id="9529" class="Symbol">→</a> <a id="9531" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="9535" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="9537" href="Varieties.FreeAlgebras.html#9522" class="Bound">i</a> <a id="9539" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a>

 <a id="9543" class="Comment">-- ℭ is the product of all subalgebras of algebras in 𝒦.</a>
 <a id="HSPTheorem.ℭ"></a><a id="9601" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="9603" class="Symbol">:</a> <a id="9605" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="9613" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a> <a id="9617" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="9620" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="9622" class="Symbol">=</a> <a id="9624" href="Algebras.Products.html#1145" class="Function">⨅</a> <a id="9626" href="Varieties.Varieties.html#20931" class="Function">𝔄</a>

</pre>

Observe that the inhabitants of `ℭ` are maps from `ℑs` to `{𝔄s i : i ∈ ℑs}`.

<pre class="Agda">

 <a id="HSPTheorem.hom𝔄"></a><a id="9734" href="Varieties.FreeAlgebras.html#9734" class="Function">hom𝔄</a> <a id="9739" class="Symbol">:</a> <a id="9741" class="Symbol">∀</a> <a id="9743" href="Varieties.FreeAlgebras.html#9743" class="Bound">i</a> <a id="9745" class="Symbol">→</a> <a id="9747" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="9751" class="Symbol">(</a><a id="9752" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="9754" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="9755" class="Symbol">)</a> <a id="9757" class="Symbol">(</a><a id="9758" href="Varieties.Varieties.html#20931" class="Function">𝔄</a> <a id="9760" href="Varieties.FreeAlgebras.html#9743" class="Bound">i</a><a id="9761" class="Symbol">)</a>
 <a id="9764" href="Varieties.FreeAlgebras.html#9734" class="Function">hom𝔄</a> <a id="9769" href="Varieties.FreeAlgebras.html#9769" class="Bound">i</a> <a id="9771" class="Symbol">=</a> <a id="9773" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="9782" class="Symbol">(</a><a id="9783" href="Varieties.Varieties.html#20931" class="Function">𝔄</a> <a id="9785" href="Varieties.FreeAlgebras.html#9769" class="Bound">i</a><a id="9786" class="Symbol">)</a> <a id="9788" class="Symbol">(</a><a id="9789" href="Varieties.FreeAlgebras.html#9486" class="Function">𝔄h</a> <a id="9792" href="Varieties.FreeAlgebras.html#9769" class="Bound">i</a><a id="9793" class="Symbol">)</a>

 <a id="HSPTheorem.homℭ"></a><a id="9797" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="9802" class="Symbol">:</a> <a id="9804" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="9808" class="Symbol">(</a><a id="9809" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="9811" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="9812" class="Symbol">)</a> <a id="9814" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a>
 <a id="9817" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="9822" class="Symbol">=</a> <a id="9824" href="Homomorphisms.Basic.html#10245" class="Function">⨅-hom-co</a> <a id="9833" class="Symbol">{</a><a id="9834" class="Argument">fe</a> <a id="9837" class="Symbol">=</a> <a id="9839" href="Varieties.FreeAlgebras.html#8352" class="Bound">fe₀</a><a id="9842" class="Symbol">}</a> <a id="9844" href="Varieties.Varieties.html#20931" class="Function">𝔄</a> <a id="9846" href="Varieties.FreeAlgebras.html#9734" class="Function">hom𝔄</a>

</pre>


#### <a id="the-new-free-algebra">The new free algebra</a>

As mentioned above, the initial version of the [Agda UALib][] used the free algebra `𝔉` developed above.  However, our new, more direct proof uses the algebra `𝔽`, which we now define, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.<sup>[4](Varieties.FreeAlgebras.html#fn4)</sup>

<pre class="Agda">

 <a id="HSPTheorem.𝔽"></a><a id="10248" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="10250" class="Symbol">:</a> <a id="10252" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="10260" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="10265" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a>
 <a id="10268" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="10270" class="Symbol">=</a> <a id="10272" class="Symbol">((</a><a id="10274" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10276" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="10277" class="Symbol">)</a> <a id="10279" href="Homomorphisms.Basic.html#7519" class="Function Operator">[</a> <a id="10281" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="10283" href="Homomorphisms.Basic.html#7519" class="Function Operator">]/ker</a> <a id="10289" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a><a id="10293" class="Symbol">){</a><a id="10295" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a><a id="10297" class="Symbol">}</a>

 <a id="HSPTheorem.epi𝔽"></a><a id="10301" href="Varieties.FreeAlgebras.html#10301" class="Function">epi𝔽</a> <a id="10306" class="Symbol">:</a> <a id="10308" href="Homomorphisms.Basic.html#4022" class="Function">epi</a> <a id="10312" class="Symbol">(</a><a id="10313" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10315" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="10316" class="Symbol">)</a> <a id="10318" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a>
 <a id="10321" href="Varieties.FreeAlgebras.html#10301" class="Function">epi𝔽</a> <a id="10326" class="Symbol">=</a> <a id="10328" href="Homomorphisms.Basic.html#9069" class="Function">πker</a> <a id="10333" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="10335" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="10340" class="Symbol">{</a><a id="10341" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a><a id="10343" class="Symbol">}</a>

 <a id="HSPTheorem.hom𝔽"></a><a id="10347" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="10352" class="Symbol">:</a> <a id="10354" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="10358" class="Symbol">(</a><a id="10359" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10361" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="10362" class="Symbol">)</a> <a id="10364" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a>
 <a id="10367" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="10372" class="Symbol">=</a> <a id="10374" href="Homomorphisms.Basic.html#4488" class="Function">epi-to-hom</a> <a id="10385" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="10387" href="Varieties.FreeAlgebras.html#10301" class="Function">epi𝔽</a>

 <a id="HSPTheorem.hom𝔽-is-epic"></a><a id="10394" href="Varieties.FreeAlgebras.html#10394" class="Function">hom𝔽-is-epic</a> <a id="10407" class="Symbol">:</a> <a id="10409" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="10414" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10416" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="10421" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="10424" href="Varieties.FreeAlgebras.html#10394" class="Function">hom𝔽-is-epic</a> <a id="10437" class="Symbol">=</a> <a id="10439" href="Overture.Preliminaries.html#13888" class="Function">snd</a> <a id="10443" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="10445" href="Varieties.FreeAlgebras.html#10301" class="Function">epi𝔽</a> <a id="10450" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a>

</pre>

We will need the following facts relating `homℭ`, `hom𝔽`, `and ψ`.

<pre class="Agda">

 <a id="HSPTheorem.ψlemma0"></a><a id="10548" href="Varieties.FreeAlgebras.html#10548" class="Function">ψlemma0</a> <a id="10556" class="Symbol">:</a> <a id="10558" class="Symbol">∀</a> <a id="10560" href="Varieties.FreeAlgebras.html#10560" class="Bound">p</a> <a id="10562" href="Varieties.FreeAlgebras.html#10562" class="Bound">q</a> <a id="10564" class="Symbol">→</a> <a id="10566" class="Symbol">(</a><a id="10567" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10569" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="10574" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10576" href="Varieties.FreeAlgebras.html#10560" class="Bound">p</a> <a id="10578" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10580" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10582" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="10587" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10589" href="Varieties.FreeAlgebras.html#10562" class="Bound">q</a><a id="10590" class="Symbol">)</a> <a id="10592" class="Symbol">→</a> <a id="10594" class="Symbol">(</a><a id="10595" href="Varieties.FreeAlgebras.html#10560" class="Bound">p</a> <a id="10597" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10599" href="Varieties.FreeAlgebras.html#10562" class="Bound">q</a><a id="10600" class="Symbol">)</a> <a id="10602" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="10604" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="10606" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
 <a id="10609" href="Varieties.FreeAlgebras.html#10548" class="Function">ψlemma0</a> <a id="10617" href="Varieties.FreeAlgebras.html#10617" class="Bound">p</a> <a id="10619" href="Varieties.FreeAlgebras.html#10619" class="Bound">q</a> <a id="10621" href="Varieties.FreeAlgebras.html#10621" class="Bound">phomℭq</a> <a id="10628" href="Varieties.FreeAlgebras.html#10628" class="Bound">𝑨</a> <a id="10630" href="Varieties.FreeAlgebras.html#10630" class="Bound">sA</a> <a id="10633" href="Varieties.FreeAlgebras.html#10633" class="Bound">h</a> <a id="10635" class="Symbol">=</a> <a id="10637" href="Overture.Equality.html#6167" class="Function">cong-app</a> <a id="10646" href="Varieties.FreeAlgebras.html#10621" class="Bound">phomℭq</a> <a id="10653" class="Symbol">(</a><a id="10654" href="Varieties.FreeAlgebras.html#10628" class="Bound">𝑨</a> <a id="10656" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10658" href="Varieties.FreeAlgebras.html#10630" class="Bound">sA</a> <a id="10661" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10663" href="Varieties.FreeAlgebras.html#10633" class="Bound">h</a><a id="10664" class="Symbol">)</a>

 <a id="HSPTheorem.ψlemma0-ap"></a><a id="10668" href="Varieties.FreeAlgebras.html#10668" class="Function">ψlemma0-ap</a> <a id="10679" class="Symbol">:</a> <a id="10681" class="Symbol">{</a><a id="10682" href="Varieties.FreeAlgebras.html#10682" class="Bound">𝑨</a> <a id="10684" class="Symbol">:</a> <a id="10686" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="10694" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="10696" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="10697" class="Symbol">}{</a><a id="10699" href="Varieties.FreeAlgebras.html#10699" class="Bound">h</a> <a id="10701" class="Symbol">:</a> <a id="10703" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="10705" class="Symbol">→</a> <a id="10707" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10709" href="Varieties.FreeAlgebras.html#10682" class="Bound">𝑨</a> <a id="10711" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="10712" class="Symbol">}</a> <a id="10714" class="Symbol">→</a> <a id="10716" href="Varieties.FreeAlgebras.html#10682" class="Bound">𝑨</a> <a id="10718" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="10720" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="10721" class="Symbol">{</a><a id="10722" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="10723" class="Symbol">}{</a><a id="10725" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="10726" class="Symbol">}</a> <a id="10728" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
  <a id="10732" class="Symbol">→</a>           <a id="10744" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="10751" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10753" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="10758" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10760" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="10762" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="10769" class="Symbol">(</a><a id="10770" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10780" href="Varieties.FreeAlgebras.html#10682" class="Bound">𝑨</a> <a id="10782" href="Varieties.FreeAlgebras.html#10699" class="Bound">h</a><a id="10783" class="Symbol">)</a>

 <a id="10787" href="Varieties.FreeAlgebras.html#10668" class="Function">ψlemma0-ap</a> <a id="10798" class="Symbol">{</a><a id="10799" href="Varieties.FreeAlgebras.html#10799" class="Bound">𝑨</a><a id="10800" class="Symbol">}{</a><a id="10802" href="Varieties.FreeAlgebras.html#10802" class="Bound">h</a><a id="10803" class="Symbol">}</a> <a id="10805" href="Varieties.FreeAlgebras.html#10805" class="Bound">skA</a> <a id="10809" class="Symbol">{</a><a id="10810" href="Varieties.FreeAlgebras.html#10810" class="Bound">p</a> <a id="10812" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="10814" href="Varieties.FreeAlgebras.html#10814" class="Bound">q</a><a id="10815" class="Symbol">}</a> <a id="10817" href="Varieties.FreeAlgebras.html#10817" class="Bound">x</a> <a id="10819" class="Symbol">=</a> <a id="10821" href="Varieties.FreeAlgebras.html#10936" class="Function">γ</a> <a id="10823" class="Keyword">where</a>

   <a id="10833" href="Varieties.FreeAlgebras.html#10833" class="Function">ν</a> <a id="10835" class="Symbol">:</a> <a id="10837" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10839" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="10844" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10846" href="Varieties.FreeAlgebras.html#10810" class="Bound">p</a> <a id="10848" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10850" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10852" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="10857" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="10859" href="Varieties.FreeAlgebras.html#10814" class="Bound">q</a>
   <a id="10864" href="Varieties.FreeAlgebras.html#10833" class="Function">ν</a> <a id="10866" class="Symbol">=</a> <a id="10868" href="Homomorphisms.Basic.html#9560" class="Function">ker-in-con</a> <a id="10879" class="Symbol">{</a><a id="10880" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="10883" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="10884" class="Symbol">}{</a><a id="10886" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="10889" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="10890" class="Symbol">}{</a><a id="10892" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="10894" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="10895" class="Symbol">}{</a> <a id="10898" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a> <a id="10903" class="Symbol">}(</a><a id="10905" href="Homomorphisms.Basic.html#7050" class="Function">kercon</a> <a id="10912" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="10915" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="10917" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a><a id="10921" class="Symbol">)</a> <a id="10923" class="Symbol">{</a><a id="10924" href="Varieties.FreeAlgebras.html#10810" class="Bound">p</a><a id="10925" class="Symbol">}{</a><a id="10927" href="Varieties.FreeAlgebras.html#10814" class="Bound">q</a><a id="10928" class="Symbol">}</a> <a id="10930" href="Varieties.FreeAlgebras.html#10817" class="Bound">x</a>

   <a id="10936" href="Varieties.FreeAlgebras.html#10936" class="Function">γ</a> <a id="10938" class="Symbol">:</a> <a id="10940" class="Symbol">(</a><a id="10941" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10951" href="Varieties.FreeAlgebras.html#10799" class="Bound">𝑨</a> <a id="10953" href="Varieties.FreeAlgebras.html#10802" class="Bound">h</a><a id="10954" class="Symbol">)</a> <a id="10956" href="Varieties.FreeAlgebras.html#10810" class="Bound">p</a> <a id="10958" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="10960" class="Symbol">(</a><a id="10961" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="10971" href="Varieties.FreeAlgebras.html#10799" class="Bound">𝑨</a> <a id="10973" href="Varieties.FreeAlgebras.html#10802" class="Bound">h</a><a id="10974" class="Symbol">)</a> <a id="10976" href="Varieties.FreeAlgebras.html#10814" class="Bound">q</a>
   <a id="10981" href="Varieties.FreeAlgebras.html#10936" class="Function">γ</a> <a id="10983" class="Symbol">=</a> <a id="10985" class="Symbol">((</a><a id="10987" href="Varieties.FreeAlgebras.html#10548" class="Function">ψlemma0</a> <a id="10995" href="Varieties.FreeAlgebras.html#10810" class="Bound">p</a> <a id="10997" href="Varieties.FreeAlgebras.html#10814" class="Bound">q</a><a id="10998" class="Symbol">)</a> <a id="11000" href="Varieties.FreeAlgebras.html#10833" class="Function">ν</a><a id="11001" class="Symbol">)</a> <a id="11003" href="Varieties.FreeAlgebras.html#10799" class="Bound">𝑨</a> <a id="11005" href="Varieties.FreeAlgebras.html#10805" class="Bound">skA</a> <a id="11009" href="Varieties.FreeAlgebras.html#10802" class="Bound">h</a>


</pre>

We now use `ψlemma0-ap` to prove that every map `h : X → ∣ 𝑨 ∣`, from `X` to a subalgebra `𝑨 ∈ S 𝒦` of `𝒦`, lifts to a homomorphism from `𝔽` to `𝑨`.

<pre class="Agda">

 <a id="HSPTheorem.𝔽-lift-hom"></a><a id="11190" href="Varieties.FreeAlgebras.html#11190" class="Function">𝔽-lift-hom</a> <a id="11201" class="Symbol">:</a> <a id="11203" class="Symbol">(</a><a id="11204" href="Varieties.FreeAlgebras.html#11204" class="Bound">𝑨</a> <a id="11206" class="Symbol">:</a> <a id="11208" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="11216" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="11218" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="11219" class="Symbol">)</a> <a id="11221" class="Symbol">→</a> <a id="11223" href="Varieties.FreeAlgebras.html#11204" class="Bound">𝑨</a> <a id="11225" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="11227" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="11228" class="Symbol">{</a><a id="11229" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="11230" class="Symbol">}{</a><a id="11232" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="11233" class="Symbol">}</a> <a id="11235" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="11237" class="Symbol">→</a> <a id="11239" class="Symbol">(</a><a id="11240" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="11242" class="Symbol">→</a> <a id="11244" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11246" href="Varieties.FreeAlgebras.html#11204" class="Bound">𝑨</a> <a id="11248" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="11249" class="Symbol">)</a> <a id="11251" class="Symbol">→</a> <a id="11253" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="11257" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="11259" href="Varieties.FreeAlgebras.html#11204" class="Bound">𝑨</a>
 <a id="11262" href="Varieties.FreeAlgebras.html#11190" class="Function">𝔽-lift-hom</a> <a id="11273" href="Varieties.FreeAlgebras.html#11273" class="Bound">𝑨</a> <a id="11275" href="Varieties.FreeAlgebras.html#11275" class="Bound">skA</a> <a id="11279" href="Varieties.FreeAlgebras.html#11279" class="Bound">h</a> <a id="11281" class="Symbol">=</a> <a id="11283" href="Overture.Preliminaries.html#13836" class="Function">fst</a><a id="11286" class="Symbol">(</a><a id="11287" href="Homomorphisms.Noether.html#10429" class="Function">HomFactor</a> <a id="11297" href="Varieties.FreeAlgebras.html#8352" class="Bound">fe₀</a> <a id="11301" href="Varieties.FreeAlgebras.html#8331" class="Bound">fuu</a> <a id="11305" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a> <a id="11309" class="Symbol">(</a><a id="11310" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="11312" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="11313" class="Symbol">){</a><a id="11315" href="Varieties.FreeAlgebras.html#11273" class="Bound">𝑨</a><a id="11316" class="Symbol">}{</a><a id="11318" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a><a id="11319" class="Symbol">}(</a><a id="11321" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="11330" href="Varieties.FreeAlgebras.html#11273" class="Bound">𝑨</a> <a id="11332" href="Varieties.FreeAlgebras.html#11279" class="Bound">h</a><a id="11333" class="Symbol">)</a> <a id="11335" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="11340" href="Varieties.FreeAlgebras.html#10394" class="Function">hom𝔽-is-epic</a> <a id="11353" class="Symbol">(</a><a id="11354" href="Varieties.FreeAlgebras.html#10668" class="Function">ψlemma0-ap</a> <a id="11365" href="Varieties.FreeAlgebras.html#11275" class="Bound">skA</a><a id="11368" class="Symbol">))</a>

</pre>


#### <a id="k-models-psi">𝒦 models ψ</a>

The goal of this subsection is to prove that `𝒦` models `ψ 𝒦`. In other terms, for all pairs `(p , q) ∈ Term X × Term X` of terms, if `(p , q) ∈ ψ 𝒦`, then `𝒦 ⊧ p ≋ q`.

Next we define the lift of the natural embedding from `X` into 𝔽. We denote this homomorphism by `𝔑 : hom (𝑻 X) 𝔽` and define it as follows.

<pre class="Agda">

 <a id="HSPTheorem.X↪𝔽"></a><a id="11754" href="Varieties.FreeAlgebras.html#11754" class="Function">X↪𝔽</a> <a id="11758" class="Symbol">:</a> <a id="11760" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="11762" class="Symbol">→</a> <a id="11764" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11766" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="11768" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
 <a id="11771" href="Varieties.FreeAlgebras.html#11754" class="Function">X↪𝔽</a> <a id="11775" href="Varieties.FreeAlgebras.html#11775" class="Bound">x</a> <a id="11777" class="Symbol">=</a> <a id="11779" href="Relations.Quotients.html#4292" class="Function Operator">⟪</a> <a id="11781" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="11783" href="Varieties.FreeAlgebras.html#11775" class="Bound">x</a> <a id="11785" href="Relations.Quotients.html#4292" class="Function Operator">⟫</a>

 <a id="HSPTheorem.𝔑"></a><a id="11789" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="11791" class="Symbol">:</a> <a id="11793" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="11797" class="Symbol">(</a><a id="11798" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="11800" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="11801" class="Symbol">)</a> <a id="11803" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a>
 <a id="11806" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="11808" class="Symbol">=</a> <a id="11810" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="11819" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="11821" href="Varieties.FreeAlgebras.html#11754" class="Function">X↪𝔽</a>

</pre>

It turns out that the homomorphism so defined is equivalent to `hom𝔽`.

<pre class="Agda">

 <a id="HSPTheorem.hom𝔽-is-lift-hom"></a><a id="11925" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a> <a id="11942" class="Symbol">:</a> <a id="11944" class="Symbol">∀</a> <a id="11946" href="Varieties.FreeAlgebras.html#11946" class="Bound">p</a> <a id="11948" class="Symbol">→</a> <a id="11950" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11952" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="11954" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11956" href="Varieties.FreeAlgebras.html#11946" class="Bound">p</a> <a id="11958" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="11960" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11962" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="11967" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="11969" href="Varieties.FreeAlgebras.html#11946" class="Bound">p</a>
 <a id="11972" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a> <a id="11989" class="Symbol">(</a><a id="11990" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="11992" href="Varieties.FreeAlgebras.html#11992" class="Bound">x</a><a id="11993" class="Symbol">)</a> <a id="11995" class="Symbol">=</a> <a id="11997" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>
 <a id="12003" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a> <a id="12020" class="Symbol">(</a><a id="12021" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="12026" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12028" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a><a id="12029" class="Symbol">)</a> <a id="12031" class="Symbol">=</a>
  <a id="12035" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12037" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12039" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12041" class="Symbol">(</a><a id="12042" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="12047" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12049" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a><a id="12050" class="Symbol">)</a>              <a id="12065" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12068" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12070" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12072" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12074" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12076" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a> <a id="12078" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="12082" class="Symbol">(</a><a id="12083" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12085" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="12087" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a><a id="12088" class="Symbol">)(λ</a> <a id="12092" href="Varieties.FreeAlgebras.html#12092" class="Bound">i</a> <a id="12094" class="Symbol">→</a> <a id="12096" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12098" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12100" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12101" class="Symbol">(</a><a id="12102" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a> <a id="12104" href="Varieties.FreeAlgebras.html#12092" class="Bound">i</a><a id="12105" class="Symbol">))</a>      <a id="12113" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12116" href="MGS-MLTT.html#6613" class="Function">ap</a><a id="12118" class="Symbol">(</a><a id="12119" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12121" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="12123" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a><a id="12124" class="Symbol">)(</a><a id="12126" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a> <a id="12131" class="Symbol">(λ</a> <a id="12134" href="Varieties.FreeAlgebras.html#12134" class="Bound">x</a> <a id="12136" class="Symbol">→</a> <a id="12138" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a><a id="12154" class="Symbol">(</a><a id="12155" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a> <a id="12157" href="Varieties.FreeAlgebras.html#12134" class="Bound">x</a><a id="12158" class="Symbol">)))</a> <a id="12162" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="12166" class="Symbol">(</a><a id="12167" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12169" href="Algebras.Algebras.html#3080" class="Function Operator">̂</a> <a id="12171" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a><a id="12172" class="Symbol">)(λ</a> <a id="12176" href="Varieties.FreeAlgebras.html#12176" class="Bound">i</a> <a id="12178" class="Symbol">→</a> <a id="12180" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12182" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="12187" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12189" class="Symbol">(</a><a id="12190" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a> <a id="12192" href="Varieties.FreeAlgebras.html#12176" class="Bound">i</a><a id="12193" class="Symbol">))</a>  <a id="12197" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12200" class="Symbol">(</a><a id="12201" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12203" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="12208" href="Overture.Preliminaries.html#13884" class="Function Operator">∥</a> <a id="12210" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12212" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a><a id="12213" class="Symbol">)</a><a id="12214" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="12217" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
  <a id="12221" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12223" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="12228" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12230" class="Symbol">(</a><a id="12231" href="Terms.Basic.html#2306" class="InductiveConstructor">node</a> <a id="12236" href="Varieties.FreeAlgebras.html#12026" class="Bound">𝑓</a> <a id="12238" href="Varieties.FreeAlgebras.html#12028" class="Bound">𝒕</a><a id="12239" class="Symbol">)</a>           <a id="12251" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>


</pre>

We need a three more lemmas before we are ready to tackle our main goal.

<pre class="Agda">

 <a id="HSPTheorem.ψlemma1"></a><a id="12356" href="Varieties.FreeAlgebras.html#12356" class="Function">ψlemma1</a> <a id="12364" class="Symbol">:</a> <a id="12366" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12373" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12375" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12377" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12379" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="12381" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="12383" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
 <a id="12386" href="Varieties.FreeAlgebras.html#12356" class="Function">ψlemma1</a> <a id="12394" class="Symbol">{</a><a id="12395" href="Varieties.FreeAlgebras.html#12395" class="Bound">p</a> <a id="12397" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12399" href="Varieties.FreeAlgebras.html#12399" class="Bound">q</a><a id="12400" class="Symbol">}</a> <a id="12402" href="Varieties.FreeAlgebras.html#12402" class="Bound">𝔑pq</a> <a id="12406" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a> <a id="12408" href="Varieties.FreeAlgebras.html#12408" class="Bound">sA</a> <a id="12411" href="Varieties.FreeAlgebras.html#12411" class="Bound">h</a> <a id="12413" class="Symbol">=</a> <a id="12415" href="Varieties.FreeAlgebras.html#12691" class="Function">γ</a>
  <a id="12419" class="Keyword">where</a>
   <a id="12428" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12430" class="Symbol">:</a> <a id="12432" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="12436" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="12438" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a>
   <a id="12443" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12445" class="Symbol">=</a> <a id="12447" href="Varieties.FreeAlgebras.html#11190" class="Function">𝔽-lift-hom</a> <a id="12458" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a> <a id="12460" href="Varieties.FreeAlgebras.html#12408" class="Bound">sA</a> <a id="12463" href="Varieties.FreeAlgebras.html#12411" class="Bound">h</a>

   <a id="12469" href="Varieties.FreeAlgebras.html#12469" class="Function">h&#39;</a> <a id="12472" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12474" class="Symbol">:</a> <a id="12476" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="12480" class="Symbol">(</a><a id="12481" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="12483" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="12484" class="Symbol">)</a> <a id="12486" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a>
   <a id="12491" href="Varieties.FreeAlgebras.html#12469" class="Function">h&#39;</a> <a id="12494" class="Symbol">=</a> <a id="12496" href="Homomorphisms.Noether.html#7466" class="Function">∘-hom</a> <a id="12502" class="Symbol">(</a><a id="12503" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="12505" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="12506" class="Symbol">)</a> <a id="12508" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a> <a id="12510" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12512" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a>
   <a id="12517" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12519" class="Symbol">=</a> <a id="12521" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="12530" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a> <a id="12532" href="Varieties.FreeAlgebras.html#12411" class="Bound">h</a>

   <a id="12538" href="Varieties.FreeAlgebras.html#12538" class="Function">f𝔑≡φ</a> <a id="12543" class="Symbol">:</a> <a id="12545" class="Symbol">∀</a> <a id="12547" href="Varieties.FreeAlgebras.html#12547" class="Bound">x</a> <a id="12549" class="Symbol">→</a> <a id="12551" class="Symbol">(</a><a id="12552" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12554" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12556" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12558" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="12560" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12562" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12564" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12565" class="Symbol">)(</a><a id="12567" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="12569" href="Varieties.FreeAlgebras.html#12547" class="Bound">x</a><a id="12570" class="Symbol">)</a> <a id="12572" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12574" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12576" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12578" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12579" class="Symbol">(</a><a id="12580" href="Terms.Operations.html#665" class="InductiveConstructor">ℊ</a> <a id="12582" href="Varieties.FreeAlgebras.html#12547" class="Bound">x</a><a id="12583" class="Symbol">)</a>
   <a id="12588" href="Varieties.FreeAlgebras.html#12538" class="Function">f𝔑≡φ</a> <a id="12593" href="Varieties.FreeAlgebras.html#12593" class="Bound">x</a> <a id="12595" class="Symbol">=</a> <a id="12597" href="Identity-Type.html#162" class="InductiveConstructor">refl</a>

   <a id="12606" href="Varieties.FreeAlgebras.html#12606" class="Function">h≡φ</a> <a id="12610" class="Symbol">:</a> <a id="12612" class="Symbol">∀</a> <a id="12614" href="Varieties.FreeAlgebras.html#12614" class="Bound">t</a> <a id="12616" class="Symbol">→</a> <a id="12618" class="Symbol">(</a><a id="12619" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12621" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12623" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12625" href="MGS-MLTT.html#3813" class="Function Operator">∘</a> <a id="12627" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12629" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12631" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="12632" class="Symbol">)</a> <a id="12634" href="Varieties.FreeAlgebras.html#12614" class="Bound">t</a> <a id="12636" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12638" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12640" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12642" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12644" href="Varieties.FreeAlgebras.html#12614" class="Bound">t</a>
   <a id="12649" href="Varieties.FreeAlgebras.html#12606" class="Function">h≡φ</a> <a id="12653" href="Varieties.FreeAlgebras.html#12653" class="Bound">t</a> <a id="12655" class="Symbol">=</a> <a id="12657" href="Terms.Basic.html#5537" class="Function">free-unique</a> <a id="12669" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a> <a id="12673" href="Varieties.FreeAlgebras.html#12406" class="Bound">𝑨</a> <a id="12675" href="Varieties.FreeAlgebras.html#12469" class="Function">h&#39;</a> <a id="12678" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12680" href="Varieties.FreeAlgebras.html#12538" class="Function">f𝔑≡φ</a> <a id="12685" href="Varieties.FreeAlgebras.html#12653" class="Bound">t</a>

   <a id="12691" href="Varieties.FreeAlgebras.html#12691" class="Function">γ</a> <a id="12693" class="Symbol">:</a> <a id="12695" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12697" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12699" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12701" href="Varieties.FreeAlgebras.html#12395" class="Bound">p</a> <a id="12703" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12705" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12707" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12709" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12711" href="Varieties.FreeAlgebras.html#12399" class="Bound">q</a>
   <a id="12716" href="Varieties.FreeAlgebras.html#12691" class="Function">γ</a> <a id="12718" class="Symbol">=</a> <a id="12720" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12722" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12724" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12726" href="Varieties.FreeAlgebras.html#12395" class="Bound">p</a>             <a id="12740" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12743" class="Symbol">(</a><a id="12744" href="Varieties.FreeAlgebras.html#12606" class="Function">h≡φ</a> <a id="12748" href="Varieties.FreeAlgebras.html#12395" class="Bound">p</a><a id="12749" class="Symbol">)</a><a id="12750" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="12753" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12762" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12764" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12766" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12768" class="Symbol">(</a> <a id="12770" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12772" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12774" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12776" href="Varieties.FreeAlgebras.html#12395" class="Bound">p</a> <a id="12778" class="Symbol">)</a>   <a id="12782" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12785" href="MGS-MLTT.html#6613" class="Function">ap</a> <a id="12788" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12790" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12792" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12794" href="Varieties.FreeAlgebras.html#12402" class="Bound">𝔑pq</a> <a id="12798" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12807" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12809" href="Varieties.FreeAlgebras.html#12428" class="Function">f</a> <a id="12811" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12813" class="Symbol">(</a> <a id="12815" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12817" href="Varieties.FreeAlgebras.html#11789" class="Function">𝔑</a> <a id="12819" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12821" href="Varieties.FreeAlgebras.html#12399" class="Bound">q</a> <a id="12823" class="Symbol">)</a>   <a id="12827" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="12830" href="Varieties.FreeAlgebras.html#12606" class="Function">h≡φ</a> <a id="12834" href="Varieties.FreeAlgebras.html#12399" class="Bound">q</a> <a id="12836" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
       <a id="12845" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12847" href="Varieties.FreeAlgebras.html#12472" class="Function">φ</a> <a id="12849" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12851" href="Varieties.FreeAlgebras.html#12399" class="Bound">q</a>             <a id="12865" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>


 <a id="HSPTheorem.ψlemma2"></a><a id="12870" href="Varieties.FreeAlgebras.html#12870" class="Function">ψlemma2</a> <a id="12878" class="Symbol">:</a> <a id="12880" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="12887" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12889" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="12894" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="12896" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="12898" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="12900" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
 <a id="12903" href="Varieties.FreeAlgebras.html#12870" class="Function">ψlemma2</a> <a id="12911" class="Symbol">{</a><a id="12912" href="Varieties.FreeAlgebras.html#12912" class="Bound">p</a> <a id="12914" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12916" href="Varieties.FreeAlgebras.html#12916" class="Bound">q</a><a id="12917" class="Symbol">}</a> <a id="12919" href="Varieties.FreeAlgebras.html#12919" class="Bound">hyp</a> <a id="12923" class="Symbol">=</a> <a id="12925" href="Varieties.FreeAlgebras.html#12356" class="Function">ψlemma1</a> <a id="12933" class="Symbol">{</a><a id="12934" href="Varieties.FreeAlgebras.html#12912" class="Bound">p</a> <a id="12936" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="12938" href="Varieties.FreeAlgebras.html#12916" class="Bound">q</a><a id="12939" class="Symbol">}</a> <a id="12941" href="Varieties.FreeAlgebras.html#12956" class="Function">γ</a>
   <a id="12946" class="Keyword">where</a>
    <a id="12956" href="Varieties.FreeAlgebras.html#12956" class="Function">γ</a> <a id="12958" class="Symbol">:</a> <a id="12960" class="Symbol">(</a><a id="12961" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="12971" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="12973" href="Varieties.FreeAlgebras.html#11754" class="Function">X↪𝔽</a><a id="12976" class="Symbol">)</a> <a id="12978" href="Varieties.FreeAlgebras.html#12912" class="Bound">p</a> <a id="12980" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="12982" class="Symbol">(</a><a id="12983" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="12993" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="12995" href="Varieties.FreeAlgebras.html#11754" class="Function">X↪𝔽</a><a id="12998" class="Symbol">)</a> <a id="13000" href="Varieties.FreeAlgebras.html#12916" class="Bound">q</a>
    <a id="13006" href="Varieties.FreeAlgebras.html#12956" class="Function">γ</a> <a id="13008" class="Symbol">=</a> <a id="13010" class="Symbol">(</a><a id="13011" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a> <a id="13028" href="Varieties.FreeAlgebras.html#12912" class="Bound">p</a><a id="13029" class="Symbol">)</a> <a id="13031" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="13033" href="Varieties.FreeAlgebras.html#12919" class="Bound">hyp</a> <a id="13037" href="MGS-MLTT.html#5910" class="Function Operator">∙</a> <a id="13039" class="Symbol">(</a><a id="13040" href="Varieties.FreeAlgebras.html#11925" class="Function">hom𝔽-is-lift-hom</a> <a id="13057" href="Varieties.FreeAlgebras.html#12916" class="Bound">q</a><a id="13058" class="Symbol">)</a><a id="13059" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>


 <a id="HSPTheorem.ψlemma3"></a><a id="13065" href="Varieties.FreeAlgebras.html#13065" class="Function">ψlemma3</a> <a id="13073" class="Symbol">:</a> <a id="13075" class="Symbol">∀</a> <a id="13077" href="Varieties.FreeAlgebras.html#13077" class="Bound">p</a> <a id="13079" href="Varieties.FreeAlgebras.html#13079" class="Bound">q</a> <a id="13081" class="Symbol">→</a> <a id="13083" class="Symbol">(</a><a id="13084" href="Varieties.FreeAlgebras.html#13077" class="Bound">p</a> <a id="13086" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="13088" href="Varieties.FreeAlgebras.html#13079" class="Bound">q</a><a id="13089" class="Symbol">)</a> <a id="13091" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="13093" href="Varieties.FreeAlgebras.html#3710" class="Function">ψ</a> <a id="13095" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="13097" class="Symbol">→</a> <a id="13099" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="13101" href="Varieties.EquationalLogic.html#2776" class="Function Operator">⊧</a> <a id="13103" href="Varieties.FreeAlgebras.html#13077" class="Bound">p</a> <a id="13105" href="Varieties.EquationalLogic.html#2776" class="Function Operator">≋</a> <a id="13107" href="Varieties.FreeAlgebras.html#13079" class="Bound">q</a>
 <a id="13110" href="Varieties.FreeAlgebras.html#13065" class="Function">ψlemma3</a> <a id="13118" href="Varieties.FreeAlgebras.html#13118" class="Bound">p</a> <a id="13120" href="Varieties.FreeAlgebras.html#13120" class="Bound">q</a> <a id="13122" href="Varieties.FreeAlgebras.html#13122" class="Bound">pψq</a> <a id="13126" class="Symbol">{</a><a id="13127" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a><a id="13128" class="Symbol">}</a> <a id="13130" href="Varieties.FreeAlgebras.html#13130" class="Bound">kA</a> <a id="13133" class="Symbol">=</a> <a id="13135" href="Varieties.FreeAlgebras.html#13206" class="Function">γ</a>
  <a id="13139" class="Keyword">where</a>
   <a id="13148" href="Varieties.FreeAlgebras.html#13148" class="Function">skA</a> <a id="13152" class="Symbol">:</a> <a id="13154" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13156" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="13158" href="Varieties.Varieties.html#2859" class="Datatype">S</a> <a id="13160" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
   <a id="13165" href="Varieties.FreeAlgebras.html#13148" class="Function">skA</a> <a id="13169" class="Symbol">=</a> <a id="13171" href="Varieties.Varieties.html#3211" class="InductiveConstructor">siso</a> <a id="13176" class="Symbol">(</a><a id="13177" href="Varieties.Varieties.html#2950" class="InductiveConstructor">sbase</a> <a id="13183" href="Varieties.FreeAlgebras.html#13130" class="Bound">kA</a><a id="13185" class="Symbol">)</a> <a id="13187" class="Symbol">(</a><a id="13188" href="Homomorphisms.Isomorphisms.html#1560" class="Function">≅-sym</a> <a id="13194" href="Homomorphisms.Isomorphisms.html#2754" class="Function">Lift-≅</a><a id="13200" class="Symbol">)</a>

   <a id="13206" href="Varieties.FreeAlgebras.html#13206" class="Function">γ</a> <a id="13208" class="Symbol">:</a> <a id="13210" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13212" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13214" href="Varieties.FreeAlgebras.html#13118" class="Bound">p</a> <a id="13216" href="Terms.Operations.html#1672" class="Function Operator">⟧</a> <a id="13218" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="13220" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13222" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13224" href="Varieties.FreeAlgebras.html#13120" class="Bound">q</a> <a id="13226" href="Terms.Operations.html#1672" class="Function Operator">⟧</a>
   <a id="13231" href="Varieties.FreeAlgebras.html#13206" class="Function">γ</a> <a id="13233" class="Symbol">=</a> <a id="13235" href="Varieties.FreeAlgebras.html#8331" class="Bound">fuu</a> <a id="13239" class="Symbol">λ</a> <a id="13241" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a> <a id="13243" class="Symbol">→</a> <a id="13245" class="Symbol">(</a><a id="13246" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13248" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13250" href="Varieties.FreeAlgebras.html#13118" class="Bound">p</a> <a id="13252" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="13253" class="Symbol">)</a> <a id="13255" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a>       <a id="13263" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13266" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13283" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a> <a id="13287" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13289" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a> <a id="13291" href="Varieties.FreeAlgebras.html#13118" class="Bound">p</a> <a id="13293" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13312" class="Symbol">(</a><a id="13313" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="13323" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13325" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a><a id="13326" class="Symbol">)</a> <a id="13328" href="Varieties.FreeAlgebras.html#13118" class="Bound">p</a> <a id="13330" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13333" href="Varieties.FreeAlgebras.html#13122" class="Bound">pψq</a> <a id="13337" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13339" href="Varieties.FreeAlgebras.html#13148" class="Function">skA</a> <a id="13343" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a> <a id="13345" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13364" class="Symbol">(</a><a id="13365" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="13375" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13377" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a><a id="13378" class="Symbol">)</a> <a id="13380" href="Varieties.FreeAlgebras.html#13120" class="Bound">q</a> <a id="13382" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="13385" class="Symbol">(</a><a id="13386" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="13403" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a> <a id="13407" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13409" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a> <a id="13411" href="Varieties.FreeAlgebras.html#13120" class="Bound">q</a><a id="13412" class="Symbol">)</a><a id="13413" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a>  <a id="13417" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
                 <a id="13436" class="Symbol">(</a><a id="13437" href="Varieties.FreeAlgebras.html#13127" class="Bound">𝑨</a> <a id="13439" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="13441" href="Varieties.FreeAlgebras.html#13120" class="Bound">q</a> <a id="13443" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="13444" class="Symbol">)</a> <a id="13446" href="Varieties.FreeAlgebras.html#13241" class="Bound">h</a>       <a id="13454" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

</pre>

With these results in hand, it is now trivial to prove the main theorem of this subsection.

<pre class="Agda">

 <a id="HSPTheorem.class-models-kernel"></a><a id="13577" href="Varieties.FreeAlgebras.html#13577" class="Function">class-models-kernel</a> <a id="13597" class="Symbol">:</a> <a id="13599" class="Symbol">∀</a> <a id="13601" href="Varieties.FreeAlgebras.html#13601" class="Bound">p</a> <a id="13603" href="Varieties.FreeAlgebras.html#13603" class="Bound">q</a> <a id="13605" class="Symbol">→</a> <a id="13607" class="Symbol">(</a><a id="13608" href="Varieties.FreeAlgebras.html#13601" class="Bound">p</a> <a id="13610" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="13612" href="Varieties.FreeAlgebras.html#13603" class="Bound">q</a><a id="13613" class="Symbol">)</a> <a id="13615" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="13617" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="13624" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13626" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="13631" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="13633" class="Symbol">→</a> <a id="13635" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="13637" href="Varieties.EquationalLogic.html#2776" class="Function Operator">⊧</a> <a id="13639" href="Varieties.FreeAlgebras.html#13601" class="Bound">p</a> <a id="13641" href="Varieties.EquationalLogic.html#2776" class="Function Operator">≋</a> <a id="13643" href="Varieties.FreeAlgebras.html#13603" class="Bound">q</a>
 <a id="13646" href="Varieties.FreeAlgebras.html#13577" class="Function">class-models-kernel</a>  <a id="13667" href="Varieties.FreeAlgebras.html#13667" class="Bound">p</a> <a id="13669" href="Varieties.FreeAlgebras.html#13669" class="Bound">q</a> <a id="13671" href="Varieties.FreeAlgebras.html#13671" class="Bound">hyp</a> <a id="13675" class="Symbol">=</a> <a id="13677" href="Varieties.FreeAlgebras.html#13065" class="Function">ψlemma3</a> <a id="13685" href="Varieties.FreeAlgebras.html#13667" class="Bound">p</a> <a id="13687" href="Varieties.FreeAlgebras.html#13669" class="Bound">q</a> <a id="13689" class="Symbol">(</a><a id="13690" href="Varieties.FreeAlgebras.html#12870" class="Function">ψlemma2</a> <a id="13698" href="Varieties.FreeAlgebras.html#13671" class="Bound">hyp</a><a id="13701" class="Symbol">)</a>

</pre>


#### <a id="the-homomorphic-images-of-F">The homomorphic images of 𝔽</a>

Finally we come to one of the main theorems of this module; it asserts that every algebra in `Mod X (Th 𝕍𝒦)` is a homomorphic image of 𝔽.  We prove this below as the function (or proof object) `𝔽-ModTh-epi`.  Before that, we prove two auxiliary lemmas.

<pre class="Agda">

 <a id="14060" class="Keyword">open</a> <a id="14065" href="Varieties.Preservation.html#7083" class="Module">cids</a> <a id="14070" class="Symbol">{</a><a id="14071" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14072" class="Symbol">}{</a><a id="14074" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="14075" class="Symbol">}{</a><a id="14077" class="Argument">fuu</a> <a id="14081" class="Symbol">=</a> <a id="14083" href="Varieties.FreeAlgebras.html#8331" class="Bound">fuu</a><a id="14086" class="Symbol">}{</a><a id="14088" class="Argument">fvu</a> <a id="14092" class="Symbol">=</a> <a id="14094" href="Varieties.FreeAlgebras.html#8542" class="Bound">fvu</a><a id="14097" class="Symbol">}{</a><a id="14099" class="Argument">fe₀</a> <a id="14103" class="Symbol">=</a> <a id="14105" href="Varieties.FreeAlgebras.html#8378" class="Bound">fe₁</a><a id="14108" class="Symbol">}{</a><a id="14110" class="Argument">fe₁</a> <a id="14114" class="Symbol">=</a> <a id="14116" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a><a id="14120" class="Symbol">}{</a><a id="14122" class="Argument">fe₂</a> <a id="14126" class="Symbol">=</a> <a id="14128" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a><a id="14131" class="Symbol">}{</a><a id="14133" class="Argument">fe₃</a> <a id="14137" class="Symbol">=</a> <a id="14139" href="Varieties.FreeAlgebras.html#8408" class="Bound">fe₂</a><a id="14142" class="Symbol">}{</a><a id="14144" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="14145" class="Symbol">}</a>




 <a id="HSPTheorem.kernel-in-theory"></a><a id="14152" href="Varieties.FreeAlgebras.html#14152" class="Function">kernel-in-theory</a> <a id="14169" class="Symbol">:</a> <a id="14171" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="14178" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14180" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="14185" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14187" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="14189" href="Varieties.EquationalLogic.html#3654" class="Function">Th</a> <a id="14192" class="Symbol">(</a><a id="14193" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="14195" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="14196" class="Symbol">)</a>
 <a id="14199" href="Varieties.FreeAlgebras.html#14152" class="Function">kernel-in-theory</a> <a id="14216" class="Symbol">{</a><a id="14217" href="Varieties.FreeAlgebras.html#14217" class="Bound">p</a> <a id="14219" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="14221" href="Varieties.FreeAlgebras.html#14221" class="Bound">q</a><a id="14222" class="Symbol">}</a> <a id="14224" href="Varieties.FreeAlgebras.html#14224" class="Bound">pKq</a> <a id="14228" class="Symbol">=</a> <a id="14230" class="Symbol">(</a><a id="14231" href="Varieties.Preservation.html#9431" class="Function">class-ids-⇒</a> <a id="14243" href="Varieties.FreeAlgebras.html#14217" class="Bound">p</a> <a id="14245" href="Varieties.FreeAlgebras.html#14221" class="Bound">q</a> <a id="14247" class="Symbol">(</a><a id="14248" href="Varieties.FreeAlgebras.html#13577" class="Function">class-models-kernel</a> <a id="14268" href="Varieties.FreeAlgebras.html#14217" class="Bound">p</a> <a id="14270" href="Varieties.FreeAlgebras.html#14221" class="Bound">q</a> <a id="14272" href="Varieties.FreeAlgebras.html#14224" class="Bound">pKq</a><a id="14275" class="Symbol">))</a>

 <a id="14280" class="Keyword">open</a> <a id="14285" href="Algebras.Congruences.html#1166" class="Module">Congruence</a>

 <a id="HSPTheorem.free-quot-subalg-ℭ"></a><a id="14298" href="Varieties.FreeAlgebras.html#14298" class="Function">free-quot-subalg-ℭ</a> <a id="14317" class="Symbol">:</a> <a id="14319" href="MGS-FunExt-from-Univalence.html#2039" class="Function">dfunext</a> <a id="14327" href="Varieties.FreeAlgebras.html#1017" class="Bound">𝓥</a> <a id="14329" class="Symbol">(</a><a id="14330" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14333" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="14335" class="Symbol">)</a> <a id="14337" class="Symbol">→</a> <a id="14339" href="Relations.Truncation.html#7801" class="Function">prop-ext</a> <a id="14348" class="Symbol">(</a><a id="14349" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14352" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14353" class="Symbol">)</a> <a id="14355" class="Symbol">(</a><a id="14356" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14359" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14360" class="Symbol">)</a> <a id="14362" class="Symbol">→</a> <a id="14364" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="14371" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14373" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14375" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
  <a id="14379" class="Symbol">→</a>                   <a id="14399" class="Symbol">(∀</a> <a id="14402" href="Varieties.FreeAlgebras.html#14402" class="Bound">p</a> <a id="14404" href="Varieties.FreeAlgebras.html#14404" class="Bound">q</a> <a id="14406" class="Symbol">→</a> <a id="14408" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14424" class="Symbol">(</a><a id="14425" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14427" href="Homomorphisms.Basic.html#7050" class="Function">kercon</a> <a id="14434" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="14437" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14439" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="14444" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14446" href="Varieties.FreeAlgebras.html#14402" class="Bound">p</a> <a id="14448" href="Varieties.FreeAlgebras.html#14404" class="Bound">q</a> <a id="14450" class="Symbol">))</a>
  <a id="14455" class="Symbol">→</a>                   <a id="14475" class="Symbol">(∀</a> <a id="14478" href="Varieties.FreeAlgebras.html#14478" class="Bound">C</a> <a id="14480" class="Symbol">→</a> <a id="14482" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14498" class="Symbol">(</a><a id="14499" href="Relations.Quotients.html#3660" class="Function">𝒞</a> <a id="14501" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14503" href="Homomorphisms.Basic.html#7050" class="Function">kercon</a> <a id="14510" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="14513" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14515" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="14520" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="14522" href="Varieties.FreeAlgebras.html#14478" class="Bound">C</a><a id="14523" class="Symbol">))</a>
                      <a id="14548" class="Comment">--------------------------------------------------------</a>
  <a id="14607" class="Symbol">→</a>                   <a id="14627" class="Symbol">(((</a><a id="14630" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="14632" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="14633" class="Symbol">)</a> <a id="14635" href="Homomorphisms.Basic.html#7519" class="Function Operator">[</a> <a id="14637" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14639" href="Homomorphisms.Basic.html#7519" class="Function Operator">]/ker</a> <a id="14645" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a><a id="14649" class="Symbol">){</a><a id="14651" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a><a id="14653" class="Symbol">})</a> <a id="14656" href="Subalgebras.Subalgebras.html#3794" class="Function Operator">≤</a> <a id="14658" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a>

 <a id="14662" href="Varieties.FreeAlgebras.html#14298" class="Function">free-quot-subalg-ℭ</a> <a id="14681" href="Varieties.FreeAlgebras.html#14681" class="Bound">fe</a> <a id="14684" href="Varieties.FreeAlgebras.html#14684" class="Bound">pe</a> <a id="14687" href="Varieties.FreeAlgebras.html#14687" class="Bound">UIPc</a> <a id="14692" href="Varieties.FreeAlgebras.html#14692" class="Bound">URPk</a> <a id="14697" href="Varieties.FreeAlgebras.html#14697" class="Bound">UIPb</a> <a id="14702" class="Symbol">=</a> <a id="14704" href="Subalgebras.Subalgebras.html#2562" class="Function">FirstHomColly</a> <a id="14718" class="Symbol">(</a><a id="14719" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="14721" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="14722" class="Symbol">)</a> <a id="14724" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14726" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="14731" href="Varieties.FreeAlgebras.html#14684" class="Bound">pe</a> <a id="14734" href="Varieties.FreeAlgebras.html#14681" class="Bound">fe</a> <a id="14737" href="Varieties.FreeAlgebras.html#14687" class="Bound">UIPc</a> <a id="14742" href="Varieties.FreeAlgebras.html#14692" class="Bound">URPk</a> <a id="14747" href="Varieties.FreeAlgebras.html#14697" class="Bound">UIPb</a>


 <a id="14755" class="Keyword">module</a> <a id="14762" href="Varieties.FreeAlgebras.html#14762" class="Module">_</a> <a id="14764" class="Comment">-- extensionality assumptions:</a>
          <a id="14805" class="Symbol">(</a><a id="14806" href="Varieties.FreeAlgebras.html#14806" class="Bound">hfe</a> <a id="14810" class="Symbol">:</a> <a id="14812" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="14820" class="Symbol">(</a><a id="14821" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14824" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14825" class="Symbol">)(</a><a id="14827" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14830" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14831" class="Symbol">))</a>
          <a id="14844" class="Symbol">(</a><a id="14845" href="Varieties.FreeAlgebras.html#14845" class="Bound">pe</a> <a id="14848" class="Symbol">:</a> <a id="14850" href="Relations.Truncation.html#7801" class="Function">prop-ext</a> <a id="14859" class="Symbol">(</a><a id="14860" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14863" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14864" class="Symbol">)(</a><a id="14866" href="Algebras.Products.html#2231" class="Function">ov</a> <a id="14869" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="14870" class="Symbol">))</a>

          <a id="14884" class="Comment">-- truncation assumptions:</a>
          <a id="14921" class="Symbol">(</a><a id="14922" href="Varieties.FreeAlgebras.html#14922" class="Bound">Cset</a> <a id="14927" class="Symbol">:</a> <a id="14929" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="14936" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="14938" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14940" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="14941" class="Symbol">)</a>
          <a id="14953" class="Symbol">(</a><a id="14954" href="Varieties.FreeAlgebras.html#14954" class="Bound">ssR</a> <a id="14958" class="Symbol">:</a> <a id="14960" class="Symbol">∀</a> <a id="14962" href="Varieties.FreeAlgebras.html#14962" class="Bound">p</a> <a id="14964" href="Varieties.FreeAlgebras.html#14964" class="Bound">q</a> <a id="14966" class="Symbol">→</a> <a id="14968" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="14984" class="Symbol">(</a><a id="14985" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="14987" href="Homomorphisms.Basic.html#7050" class="Function">kercon</a> <a id="14994" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="14997" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="14999" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="15004" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="15006" href="Varieties.FreeAlgebras.html#14962" class="Bound">p</a> <a id="15008" href="Varieties.FreeAlgebras.html#14964" class="Bound">q</a><a id="15009" class="Symbol">))</a>
          <a id="15022" class="Symbol">(</a><a id="15023" href="Varieties.FreeAlgebras.html#15023" class="Bound">ssC</a> <a id="15027" class="Symbol">:</a> <a id="15029" class="Symbol">∀</a> <a id="15031" href="Varieties.FreeAlgebras.html#15031" class="Bound">C</a> <a id="15033" class="Symbol">→</a> <a id="15035" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="15051" class="Symbol">(</a><a id="15052" href="Relations.Quotients.html#3660" class="Function">𝒞</a> <a id="15054" href="Algebras.Congruences.html#1259" class="Field Operator">⟨</a> <a id="15056" href="Homomorphisms.Basic.html#7050" class="Function">kercon</a> <a id="15063" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="15066" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="15068" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a> <a id="15073" href="Algebras.Congruences.html#1259" class="Field Operator">⟩</a> <a id="15075" href="Varieties.FreeAlgebras.html#15031" class="Bound">C</a><a id="15076" class="Symbol">))</a>

  <a id="15082" class="Keyword">where</a>

  <a id="15091" href="Varieties.FreeAlgebras.html#15091" class="Function">𝔽≤ℭ</a> <a id="15095" class="Symbol">:</a> <a id="15097" class="Symbol">(((</a><a id="15100" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="15102" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="15103" class="Symbol">)</a> <a id="15105" href="Homomorphisms.Basic.html#7519" class="Function Operator">[</a> <a id="15107" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a> <a id="15109" href="Homomorphisms.Basic.html#7519" class="Function Operator">]/ker</a> <a id="15115" href="Varieties.FreeAlgebras.html#9797" class="Function">homℭ</a><a id="15119" class="Symbol">){</a><a id="15121" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a><a id="15123" class="Symbol">})</a> <a id="15126" href="Subalgebras.Subalgebras.html#3794" class="Function Operator">≤</a> <a id="15128" href="Varieties.FreeAlgebras.html#9601" class="Function">ℭ</a>
  <a id="15132" href="Varieties.FreeAlgebras.html#15091" class="Function">𝔽≤ℭ</a> <a id="15136" class="Symbol">=</a> <a id="15138" href="Varieties.FreeAlgebras.html#14298" class="Function">free-quot-subalg-ℭ</a> <a id="15157" href="Varieties.FreeAlgebras.html#8563" class="Bound">fe</a> <a id="15160" href="Varieties.FreeAlgebras.html#14845" class="Bound">pe</a> <a id="15163" href="Varieties.FreeAlgebras.html#14922" class="Bound">Cset</a> <a id="15168" href="Varieties.FreeAlgebras.html#14954" class="Bound">ssR</a> <a id="15172" href="Varieties.FreeAlgebras.html#15023" class="Bound">ssC</a>

  <a id="15179" href="Varieties.FreeAlgebras.html#15179" class="Function">𝕍𝒦</a> <a id="15182" class="Symbol">:</a> <a id="15184" href="Relations.Discrete.html#1534" class="Function">Pred</a> <a id="15189" class="Symbol">(</a><a id="15190" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="15198" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="15203" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="15204" class="Symbol">)</a> <a id="15206" href="Varieties.FreeAlgebras.html#3378" class="Function">𝓸𝓿𝓾++</a>
  <a id="15214" href="Varieties.FreeAlgebras.html#15179" class="Function">𝕍𝒦</a> <a id="15217" class="Symbol">=</a> <a id="15219" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="15220" class="Symbol">{</a><a id="15221" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="15222" class="Symbol">}{</a><a id="15224" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a><a id="15228" class="Symbol">}</a> <a id="15230" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>


</pre>

The last piece we need to prove that every model of `Th 𝕍𝒦` is a homomorphic image of `𝔽` is a crucial assumption that is taken for granted throughout informal universal algebra---namely, that our collection `X` of variable symbols is arbitrarily large and that we have an *environment* which interprets the variable symbols in every algebra under consideration. In other terms, an environment provides, for every algebra `𝑨`, a surjective mapping `η : X → ∣ 𝑨 ∣` from `X` onto the domain of `𝑨`.

We do *not* assert that for an arbitrary type `X` such surjective maps exist.  Indeed, our `X` must is quite special to have this property.  Later, we will construct such an `X`, but for now we simply postulate its existence. Note that this assumption that an environment exists is only required in the proof of the theorem `𝔽-ModTh-epi`.

<pre class="Agda">

  <a id="16100" href="Varieties.FreeAlgebras.html#16100" class="Function Operator">_↠_</a> <a id="16104" class="Symbol">:</a> <a id="16106" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a> <a id="16108" href="Universes.html#403" class="Function Operator">̇</a> <a id="16110" class="Symbol">→</a> <a id="16112" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="16120" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="16125" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a> <a id="16127" class="Symbol">→</a> <a id="16129" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="16134" href="Universes.html#403" class="Function Operator">̇</a>
  <a id="16138" href="Varieties.FreeAlgebras.html#16138" class="Bound">X</a> <a id="16140" href="Varieties.FreeAlgebras.html#16100" class="Function Operator">↠</a> <a id="16142" href="Varieties.FreeAlgebras.html#16142" class="Bound">𝑨</a> <a id="16144" class="Symbol">=</a> <a id="16146" href="MGS-MLTT.html#3074" class="Function">Σ</a> <a id="16148" href="Varieties.FreeAlgebras.html#16148" class="Bound">h</a> <a id="16150" href="MGS-MLTT.html#3074" class="Function">꞉</a> <a id="16152" class="Symbol">(</a><a id="16153" href="Varieties.FreeAlgebras.html#16138" class="Bound">X</a> <a id="16155" class="Symbol">→</a> <a id="16157" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16159" href="Varieties.FreeAlgebras.html#16142" class="Bound">𝑨</a> <a id="16161" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a><a id="16162" class="Symbol">)</a> <a id="16164" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="16166" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="16171" href="Varieties.FreeAlgebras.html#16148" class="Bound">h</a>

  <a id="16176" href="Varieties.FreeAlgebras.html#16176" class="Function">𝔽-ModTh-epi</a> <a id="16188" class="Symbol">:</a> <a id="16190" class="Symbol">(</a><a id="16191" href="Varieties.FreeAlgebras.html#16191" class="Bound">𝑨</a> <a id="16193" class="Symbol">:</a> <a id="16195" href="Algebras.Algebras.html#844" class="Function">Algebra</a> <a id="16203" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a> <a id="16208" href="Varieties.FreeAlgebras.html#1001" class="Bound">𝑆</a><a id="16209" class="Symbol">)</a> <a id="16211" class="Symbol">→</a> <a id="16213" class="Symbol">(</a><a id="16214" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="16216" href="Varieties.FreeAlgebras.html#16100" class="Function Operator">↠</a> <a id="16218" href="Varieties.FreeAlgebras.html#16191" class="Bound">𝑨</a><a id="16219" class="Symbol">)</a> <a id="16221" class="Symbol">→</a> <a id="16223" href="Varieties.FreeAlgebras.html#16191" class="Bound">𝑨</a> <a id="16225" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="16227" href="Varieties.EquationalLogic.html#3942" class="Function">Mod</a> <a id="16231" class="Symbol">(</a><a id="16232" href="Varieties.EquationalLogic.html#3654" class="Function">Th</a> <a id="16235" href="Varieties.FreeAlgebras.html#15179" class="Function">𝕍𝒦</a><a id="16237" class="Symbol">)</a> <a id="16239" class="Symbol">→</a> <a id="16241" href="Homomorphisms.Basic.html#4022" class="Function">epi</a> <a id="16245" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="16247" href="Varieties.FreeAlgebras.html#16191" class="Bound">𝑨</a>
  <a id="16251" href="Varieties.FreeAlgebras.html#16176" class="Function">𝔽-ModTh-epi</a> <a id="16263" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16265" class="Symbol">(</a><a id="16266" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a> <a id="16268" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16270" href="Varieties.FreeAlgebras.html#16270" class="Bound">ηE</a><a id="16272" class="Symbol">)</a> <a id="16274" href="Varieties.FreeAlgebras.html#16274" class="Bound">AinMTV</a> <a id="16281" class="Symbol">=</a> <a id="16283" href="Varieties.FreeAlgebras.html#16979" class="Function">γ</a>
   <a id="16288" class="Keyword">where</a>
    <a id="16298" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16300" class="Symbol">:</a> <a id="16302" href="Homomorphisms.Basic.html#2004" class="Function">hom</a> <a id="16306" class="Symbol">(</a><a id="16307" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="16309" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="16310" class="Symbol">)</a> <a id="16312" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a>
    <a id="16318" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16320" class="Symbol">=</a> <a id="16322" href="Terms.Basic.html#5155" class="Function">lift-hom</a> <a id="16331" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16333" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a>

    <a id="16340" href="Varieties.FreeAlgebras.html#16340" class="Function">φE</a> <a id="16343" class="Symbol">:</a> <a id="16345" href="Overture.Inverses.html#2003" class="Function">Epic</a> <a id="16350" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16352" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16354" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
    <a id="16360" href="Varieties.FreeAlgebras.html#16340" class="Function">φE</a> <a id="16363" class="Symbol">=</a> <a id="16365" href="Terms.Basic.html#6934" class="Function">lift-of-epi-is-epi</a> <a id="16384" href="Varieties.FreeAlgebras.html#16270" class="Bound">ηE</a>

    <a id="16392" href="Varieties.FreeAlgebras.html#16392" class="Function">pqlem2</a> <a id="16399" class="Symbol">:</a> <a id="16401" class="Symbol">∀</a> <a id="16403" href="Varieties.FreeAlgebras.html#16403" class="Bound">p</a> <a id="16405" href="Varieties.FreeAlgebras.html#16405" class="Bound">q</a> <a id="16407" class="Symbol">→</a> <a id="16409" class="Symbol">(</a><a id="16410" href="Varieties.FreeAlgebras.html#16403" class="Bound">p</a> <a id="16412" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16414" href="Varieties.FreeAlgebras.html#16405" class="Bound">q</a><a id="16415" class="Symbol">)</a> <a id="16417" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="16419" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16426" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16428" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="16433" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16435" class="Symbol">→</a> <a id="16437" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16439" href="Varieties.EquationalLogic.html#2694" class="Function Operator">⊧</a> <a id="16441" href="Varieties.FreeAlgebras.html#16403" class="Bound">p</a> <a id="16443" href="Varieties.EquationalLogic.html#2694" class="Function Operator">≈</a> <a id="16445" href="Varieties.FreeAlgebras.html#16405" class="Bound">q</a>
    <a id="16451" href="Varieties.FreeAlgebras.html#16392" class="Function">pqlem2</a> <a id="16458" href="Varieties.FreeAlgebras.html#16458" class="Bound">p</a> <a id="16460" href="Varieties.FreeAlgebras.html#16460" class="Bound">q</a> <a id="16462" href="Varieties.FreeAlgebras.html#16462" class="Bound">hyp</a> <a id="16466" class="Symbol">=</a> <a id="16468" href="Varieties.FreeAlgebras.html#16274" class="Bound">AinMTV</a> <a id="16475" href="Varieties.FreeAlgebras.html#16458" class="Bound">p</a> <a id="16477" href="Varieties.FreeAlgebras.html#16460" class="Bound">q</a> <a id="16479" class="Symbol">(</a><a id="16480" href="Varieties.FreeAlgebras.html#14152" class="Function">kernel-in-theory</a> <a id="16497" href="Varieties.FreeAlgebras.html#16462" class="Bound">hyp</a><a id="16500" class="Symbol">)</a>

    <a id="16507" href="Varieties.FreeAlgebras.html#16507" class="Function">kerincl</a> <a id="16515" class="Symbol">:</a> <a id="16517" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16524" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16526" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="16531" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16533" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="16535" href="Relations.Discrete.html#7365" class="Function">kernel</a> <a id="16542" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16544" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16546" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a>
    <a id="16552" href="Varieties.FreeAlgebras.html#16507" class="Function">kerincl</a> <a id="16560" class="Symbol">{</a><a id="16561" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16563" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="16565" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a><a id="16566" class="Symbol">}</a> <a id="16568" href="Varieties.FreeAlgebras.html#16568" class="Bound">x</a> <a id="16570" class="Symbol">=</a> <a id="16572" href="Varieties.FreeAlgebras.html#16638" class="Function">γ</a>
     <a id="16579" class="Keyword">where</a>
      <a id="16591" href="Varieties.FreeAlgebras.html#16591" class="Function">Apq</a> <a id="16595" class="Symbol">:</a> <a id="16597" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16599" href="Varieties.EquationalLogic.html#2694" class="Function Operator">⊧</a> <a id="16601" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16603" href="Varieties.EquationalLogic.html#2694" class="Function Operator">≈</a> <a id="16605" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a>
      <a id="16613" href="Varieties.FreeAlgebras.html#16591" class="Function">Apq</a> <a id="16617" class="Symbol">=</a> <a id="16619" href="Varieties.FreeAlgebras.html#16392" class="Function">pqlem2</a> <a id="16626" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16628" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a> <a id="16630" href="Varieties.FreeAlgebras.html#16568" class="Bound">x</a>
      <a id="16638" href="Varieties.FreeAlgebras.html#16638" class="Function">γ</a> <a id="16640" class="Symbol">:</a> <a id="16642" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16644" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16646" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16648" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16650" href="Overture.Equality.html#2388" class="Datatype Operator">≡</a> <a id="16652" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16654" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16656" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16658" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a>
      <a id="16666" href="Varieties.FreeAlgebras.html#16638" class="Function">γ</a> <a id="16668" class="Symbol">=</a> <a id="16670" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16672" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16674" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16676" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a>                    <a id="16697" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16700" href="Identity-Type.html#162" class="InductiveConstructor">refl</a> <a id="16705" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16717" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="16727" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16729" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a> <a id="16731" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a>   <a id="16735" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16738" class="Symbol">(</a><a id="16739" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="16756" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a> <a id="16761" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16763" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a> <a id="16765" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a><a id="16766" class="Symbol">)</a><a id="16767" href="MGS-MLTT.html#6125" class="Function Operator">⁻¹</a> <a id="16770" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16782" class="Symbol">(</a><a id="16783" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16785" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="16787" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16789" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="16790" class="Symbol">)</a> <a id="16792" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a>          <a id="16803" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16806" href="Overture.Extensionality.html#6472" class="Function">extfun</a> <a id="16813" class="Symbol">(</a><a id="16814" href="Varieties.FreeAlgebras.html#16392" class="Function">pqlem2</a> <a id="16821" href="Varieties.FreeAlgebras.html#16561" class="Bound">p</a> <a id="16823" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a> <a id="16825" href="Varieties.FreeAlgebras.html#16568" class="Bound">x</a><a id="16826" class="Symbol">)</a> <a id="16828" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a>  <a id="16831" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16843" class="Symbol">(</a><a id="16844" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16846" href="Terms.Operations.html#1672" class="Function Operator">⟦</a> <a id="16848" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a> <a id="16850" href="Terms.Operations.html#1672" class="Function Operator">⟧</a><a id="16851" class="Symbol">)</a> <a id="16853" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a>          <a id="16864" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16867" href="Terms.Operations.html#2120" class="Function">free-lift-interp</a> <a id="16884" href="Varieties.FreeAlgebras.html#8588" class="Bound">fvou</a> <a id="16889" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16891" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a> <a id="16893" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a> <a id="16895" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16907" href="Terms.Basic.html#4435" class="Function">free-lift</a> <a id="16917" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a> <a id="16919" href="Varieties.FreeAlgebras.html#16266" class="Bound">η</a> <a id="16921" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a>   <a id="16925" href="MGS-MLTT.html#5997" class="Function Operator">≡⟨</a> <a id="16928" href="Identity-Type.html#162" class="InductiveConstructor">refl</a> <a id="16933" href="MGS-MLTT.html#5997" class="Function Operator">⟩</a>
          <a id="16945" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16947" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="16949" href="Overture.Preliminaries.html#13832" class="Function Operator">∣</a> <a id="16951" href="Varieties.FreeAlgebras.html#16565" class="Bound">q</a>                    <a id="16972" href="MGS-MLTT.html#6079" class="Function Operator">∎</a>

    <a id="16979" href="Varieties.FreeAlgebras.html#16979" class="Function">γ</a> <a id="16981" class="Symbol">:</a> <a id="16983" href="Homomorphisms.Basic.html#4022" class="Function">epi</a> <a id="16987" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="16989" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a>
    <a id="16995" href="Varieties.FreeAlgebras.html#16979" class="Function">γ</a> <a id="16997" class="Symbol">=</a> <a id="16999" href="Overture.Preliminaries.html#13836" class="Function">fst</a> <a id="17003" class="Symbol">(</a><a id="17004" href="Homomorphisms.Noether.html#11843" class="Function">HomFactorEpi</a> <a id="17017" href="Varieties.FreeAlgebras.html#8469" class="Bound">fe₄</a> <a id="17021" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a> <a id="17025" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a> <a id="17029" class="Symbol">(</a><a id="17030" href="Terms.Basic.html#3732" class="Function">𝑻</a> <a id="17032" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="17033" class="Symbol">){</a><a id="17035" href="Varieties.FreeAlgebras.html#16263" class="Bound">𝑨</a><a id="17036" class="Symbol">}{</a><a id="17038" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a><a id="17039" class="Symbol">}</a> <a id="17041" href="Varieties.FreeAlgebras.html#16298" class="Function">φ</a> <a id="17043" href="Varieties.FreeAlgebras.html#10347" class="Function">hom𝔽</a> <a id="17048" href="Varieties.FreeAlgebras.html#16340" class="Function">φE</a> <a id="17051" href="Varieties.FreeAlgebras.html#10394" class="Function">hom𝔽-is-epic</a>  <a id="17065" href="Varieties.FreeAlgebras.html#16507" class="Function">kerincl</a><a id="17072" class="Symbol">)</a>


</pre>

#### <a id="F-in-VK">𝔽 ∈ V(𝒦)</a>

With this result in hand, along with what we proved earlier---namely, `PS(𝒦) ⊆ SP(𝒦) ⊆ HSP(𝒦) ≡ V 𝒦`---it is not hard to show that `𝔽` belongs to `V 𝒦`.

<pre class="Agda">

  <a id="17293" class="Keyword">open</a> <a id="17298" href="Varieties.Varieties.html#16395" class="Module">Vlift</a> <a id="17304" class="Symbol">{</a><a id="17305" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="17306" class="Symbol">}{</a><a id="17308" href="Varieties.FreeAlgebras.html#8352" class="Bound">fe₀</a><a id="17311" class="Symbol">}{</a><a id="17313" href="Varieties.FreeAlgebras.html#8503" class="Bound">fe₅</a><a id="17316" class="Symbol">}{</a><a id="17318" href="Varieties.FreeAlgebras.html#8438" class="Bound">fe₃</a><a id="17321" class="Symbol">}{</a><a id="17323" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="17324" class="Symbol">}</a>

  <a id="17329" href="Varieties.FreeAlgebras.html#17329" class="Function">𝔽∈SP</a> <a id="17334" class="Symbol">:</a> <a id="17336" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="17338" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17340" class="Symbol">(</a><a id="17341" href="Varieties.Varieties.html#2859" class="Datatype">S</a><a id="17342" class="Symbol">{</a><a id="17343" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="17346" class="Symbol">}{</a><a id="17348" href="Varieties.FreeAlgebras.html#3373" class="Function">𝓸𝓿𝓾+</a><a id="17352" class="Symbol">}</a> <a id="17354" class="Symbol">(</a><a id="17355" href="Varieties.Varieties.html#3548" class="Datatype">P</a><a id="17356" class="Symbol">{</a><a id="17357" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="17358" class="Symbol">}{</a><a id="17360" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="17363" class="Symbol">}</a> <a id="17365" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="17366" class="Symbol">))</a>
  <a id="17371" href="Varieties.FreeAlgebras.html#17329" class="Function">𝔽∈SP</a> <a id="17376" class="Symbol">=</a> <a id="17378" href="Varieties.Varieties.html#3070" class="InductiveConstructor">ssub</a> <a id="17383" class="Symbol">(</a><a id="17384" href="Varieties.Varieties.html#22022" class="Function">class-prod-s-∈-sp</a> <a id="17402" href="Varieties.FreeAlgebras.html#14806" class="Bound">hfe</a><a id="17405" class="Symbol">)</a> <a id="17407" href="Varieties.FreeAlgebras.html#15091" class="Function">𝔽≤ℭ</a>

  <a id="17414" href="Varieties.FreeAlgebras.html#17414" class="Function">𝔽∈𝕍</a> <a id="17418" class="Symbol">:</a> <a id="17420" href="Varieties.FreeAlgebras.html#10248" class="Function">𝔽</a> <a id="17422" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17424" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17426" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>
  <a id="17430" href="Varieties.FreeAlgebras.html#17414" class="Function">𝔽∈𝕍</a> <a id="17434" class="Symbol">=</a> <a id="17436" href="Varieties.Varieties.html#18376" class="Function">SP⊆V&#39;</a> <a id="17442" href="Varieties.FreeAlgebras.html#17329" class="Function">𝔽∈SP</a>

</pre>

#### <a id="the-hsp-theorem"> The HSP Theorem</a>

Now that we have all of the necessary ingredients, it is all but trivial to combine them to prove Birkhoff's HSP theorem. (Note that since the proof enlists the help of the `𝔽-ModTh-epi` theorem, we must assume an environment exists, which is manifested in the premise `∀ 𝑨 → X ↠ 𝑨`.

<pre class="Agda">

  <a id="17812" href="Varieties.FreeAlgebras.html#17812" class="Function">birkhoff</a> <a id="17821" class="Symbol">:</a> <a id="17823" class="Symbol">(∀</a> <a id="17826" href="Varieties.FreeAlgebras.html#17826" class="Bound">𝑨</a> <a id="17828" class="Symbol">→</a> <a id="17830" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a> <a id="17832" href="Varieties.FreeAlgebras.html#16100" class="Function Operator">↠</a> <a id="17834" href="Varieties.FreeAlgebras.html#17826" class="Bound">𝑨</a><a id="17835" class="Symbol">)</a> <a id="17837" class="Symbol">→</a> <a id="17839" href="Varieties.EquationalLogic.html#3942" class="Function">Mod</a> <a id="17843" class="Symbol">(</a><a id="17844" href="Varieties.EquationalLogic.html#3654" class="Function">Th</a> <a id="17847" class="Symbol">(</a><a id="17848" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17850" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="17851" class="Symbol">))</a> <a id="17854" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="17856" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17858" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a>

  <a id="17863" href="Varieties.FreeAlgebras.html#17812" class="Function">birkhoff</a> <a id="17872" href="Varieties.FreeAlgebras.html#17872" class="Bound">𝕏</a> <a id="17874" class="Symbol">{</a><a id="17875" href="Varieties.FreeAlgebras.html#17875" class="Bound">𝑨</a><a id="17876" class="Symbol">}</a> <a id="17878" href="Varieties.FreeAlgebras.html#17878" class="Bound">α</a> <a id="17880" class="Symbol">=</a> <a id="17882" href="Varieties.FreeAlgebras.html#17897" class="Function">γ</a>
   <a id="17887" class="Keyword">where</a>
    <a id="17897" href="Varieties.FreeAlgebras.html#17897" class="Function">γ</a> <a id="17899" class="Symbol">:</a> <a id="17901" href="Varieties.FreeAlgebras.html#17875" class="Bound">𝑨</a> <a id="17903" href="Relations.Discrete.html#2402" class="Function Operator">∈</a> <a id="17905" class="Symbol">(</a><a id="17906" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="17908" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="17909" class="Symbol">)</a>
    <a id="17915" href="Varieties.FreeAlgebras.html#17897" class="Function">γ</a> <a id="17917" class="Symbol">=</a> <a id="17919" href="Varieties.Varieties.html#4771" class="InductiveConstructor">vhimg</a> <a id="17925" href="Varieties.FreeAlgebras.html#17414" class="Function">𝔽∈𝕍</a> <a id="17929" class="Symbol">((</a><a id="17931" href="Varieties.FreeAlgebras.html#17875" class="Bound">𝑨</a> <a id="17933" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="17935" href="Varieties.FreeAlgebras.html#16176" class="Function">𝔽-ModTh-epi</a> <a id="17947" href="Varieties.FreeAlgebras.html#17875" class="Bound">𝑨</a> <a id="17949" class="Symbol">(</a><a id="17950" href="Varieties.FreeAlgebras.html#17872" class="Bound">𝕏</a> <a id="17952" href="Varieties.FreeAlgebras.html#17875" class="Bound">𝑨</a><a id="17953" class="Symbol">)</a> <a id="17955" href="Varieties.FreeAlgebras.html#17878" class="Bound">α</a> <a id="17957" class="Symbol">)</a> <a id="17959" href="Overture.Preliminaries.html#13136" class="InductiveConstructor Operator">,</a> <a id="17961" href="Homomorphisms.Isomorphisms.html#1451" class="Function">≅-refl</a><a id="17967" class="Symbol">)</a>

</pre>

The converse inclusion, `V 𝒦 ⊆ Mod X (Th (V 𝒦))`, is a simple consequence of the fact that `Mod Th` is a closure operator. Nonetheless, completeness demands that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

  <a id="18225" href="Varieties.FreeAlgebras.html#18225" class="Function">birkhoff&#39;</a> <a id="18235" class="Symbol">:</a> <a id="18237" href="Varieties.Varieties.html#4487" class="Datatype">V</a><a id="18238" class="Symbol">{</a><a id="18239" href="Varieties.FreeAlgebras.html#8306" class="Bound">𝓤</a><a id="18240" class="Symbol">}{</a><a id="18242" href="Varieties.FreeAlgebras.html#3369" class="Function">𝓸𝓿𝓾</a><a id="18245" class="Symbol">}</a> <a id="18247" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a> <a id="18249" href="Relations.Discrete.html#2587" class="Function Operator">⊆</a> <a id="18251" href="Varieties.EquationalLogic.html#3942" class="Function">Mod</a> <a id="18255" class="Symbol">{</a><a id="18256" class="Argument">X</a> <a id="18258" class="Symbol">=</a> <a id="18260" href="Varieties.FreeAlgebras.html#8320" class="Bound">X</a><a id="18261" class="Symbol">}(</a><a id="18263" href="Varieties.EquationalLogic.html#3654" class="Function">Th</a> <a id="18266" class="Symbol">(</a><a id="18267" href="Varieties.Varieties.html#4487" class="Datatype">V</a> <a id="18269" href="Varieties.FreeAlgebras.html#8617" class="Bound">𝒦</a><a id="18270" class="Symbol">))</a>
  <a id="18275" href="Varieties.FreeAlgebras.html#18225" class="Function">birkhoff&#39;</a> <a id="18285" href="Varieties.FreeAlgebras.html#18285" class="Bound">α</a> <a id="18287" href="Varieties.FreeAlgebras.html#18287" class="Bound">p</a> <a id="18289" href="Varieties.FreeAlgebras.html#18289" class="Bound">q</a> <a id="18291" href="Varieties.FreeAlgebras.html#18291" class="Bound">pThq</a> <a id="18296" class="Symbol">=</a> <a id="18298" href="Varieties.FreeAlgebras.html#18291" class="Bound">pThq</a> <a id="18303" href="Varieties.FreeAlgebras.html#18285" class="Bound">α</a>

</pre>

We have thus proved that every variety is an equational class.  Readers familiar with the classical formulation of the Birkhoff HSP theorem, as an "if and only if" result, might worry that we haven't completed the proof.  But recall that in the [Varieties.Preservation][] module we proved the following identity preservation lemmas:

* [(H-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#964) 𝒦 ⊧ p ≋ q → H 𝒦 ⊧ p ≋ q
* [(S-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#2592) 𝒦 ⊧ p ≋ q → S 𝒦 ⊧ p ≋ q
* [(P-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#4111) 𝒦 ⊧ p ≋ q → P 𝒦 ⊧ p ≋ q

From these it follows that every equational class is a variety. Thus, our formal proof of Birkhoff's theorem is complete.

----------------------------

<sup>1</sup><span class="footnote" id="fn1"> Since `X` is not a subset of `𝔉`, technically it doesn't make sense to say "`X` generates `𝔉`." But as long as 𝒦 contains a nontrivial algebra, we will have `ψ(𝒦, 𝑻 𝑋) ∩ X² ≠ ∅`, and we can identify `X` with `X / ψ(𝒦, 𝑻 X)` which does belong to 𝔉.</span>

<sup>2</sup><span class="footnote" id="fn2"> In the previous version of the [UALib][] this section was part of a module called HSPTheorem module.</span>

<sup>3</sup><span class="footnote" id="fn3"> In earlier versions of the [Agda UALib][], the free algebra 𝔉 developed above played the role of the algebra 𝔽 with properties 1 and 2.  However, we found a more direct path to the proof using the algebra `𝔽 := (𝑻 X) [ ℭ ]/ker homℭ`.</span>

<sup>4</sup><span class="footnote" id="fn4"> It might be an instructive exercise to prove that `𝔽` is, in fact, isomorphic to the algebra `𝔉` that we defined earlier.</span>

<br>
<br>


[← Varieties.Preservation](Varieties.Preservation.html)
<span style="float:right;">[Varieties ↑](Varieties.html)</span>

{% include UALib.Links.md %}
