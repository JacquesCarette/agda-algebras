
\noindent \textbf{Notation}. Here are some acronyms that we use frequently.

\begin{itemize}
\tightlist
\item \mhe = \MHE
\item \mltt = \MLTT
\end{itemize}

\subsubsection{Options and imports}\label{options-and-imports}
Agda programs typically begin by setting some options and by importing from existing libraries.
Options are specified with the \AgdaKeyword{OPTIONS} \emph{pragma} and control the way Agda behaves by, for example, specifying which logical foundations should be assumed when the program is type-checked to verify its correctness.  
All Agda programs in the \ualib begin with the pragma
\ccpad
\begin{code}[number=code:options]
\>[0]\AgdaSymbol{\{-\#}\AgdaSpace{}%
\AgdaKeyword{OPTIONS}\AgdaSpace{}%
\AgdaPragma{--without-K}\AgdaSpace{}%
\AgdaPragma{--exact-split}\AgdaSpace{}%
\AgdaPragma{--safe}\AgdaSpace{}%
\AgdaSymbol{\#-\}}\<%
\end{code}
\ccpad
This has the following effects:
\begin{enumerate}
\item
  \texttt{without-K} disables \axiomk; see~\cite{agdaref-axiomk};
\item
  \texttt{exact-split} makes Agda accept only definitions that are \emph{judgmental} or \emph{definitional} equalities. As \escardo explains, this ``makes sure that pattern matching corresponds to Martin-L√∂f eliminators;'' for more details see~\cite{agdatools-patternmatching};
\item
  \texttt{safe} ensures that nothing is postulated outright---every non-MLTT axiom has to be an explicit assumption (e.g., an argument to a function or module); see~\cite{agdaref-safeagda} and~\cite{agdatools-patternmatching}.
\end{enumerate}
Throughout the \ualib documentation assumptions 1--3 are taken for granted without mentioning them explicitly.




\subsubsection{Modules}\label{modules}

The \AgdaKeyword{OPTIONS} pragma is followed by some imports or the start of a module. Sometimes we want to pass in parameters that will be assumed throughout the module. For instance, when working with algebras we often assume they come from a particular fixed signature \AgdaBound{ùëÜ}, which we could fix as a parameter at the start of a module. We'll see many examples later, but here's an example:
\AgdaKeyword{module}\AgdaSpace{}\AgdaModule{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùëÜ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaGeneralizable{ùìû}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaKeyword{where}.





\subsubsection{Imports from Type Topology}\label{imports-from-type-topology}
Throughout we use many of the nice tools that \escardo has developed and made available in the \TypeTopology repository of Agda code for the ``Univalent Foundations'' of mathematics. (See~\cite{MHE} for more details.) We import these as follows.
\ccpad
\begin{code}%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{universes}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Identity-Type}\AgdaSpace{}%
\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaKeyword{infix}\AgdaSpace{}%
\AgdaNumber{0}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{;}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaInductiveConstructor{ùìá‚ÑØùíªùìÅ}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{pattern}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{ùìá‚ÑØùíªùìÅ}\AgdaSpace{}%
\AgdaSymbol{\{}x \AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{\}}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{Sigma-Type}\AgdaSpace{}%
\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaKeyword{infixr}\AgdaSpace{}%
\AgdaNumber{50}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-MLTT}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àò\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{domain}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{codomain}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{transport}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚â°‚ü®\AgdaUnderscore{}‚ü©\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àé}}\AgdaSymbol{;}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{pr‚ÇÅ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{pr‚ÇÇ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{-Œ£}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ùïÅ}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Œ†}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{¬¨}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}√ó\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ùëñùëë}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àº\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}+\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ùüò}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ùüô}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ùüö}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚áî\AgdaUnderscore{}}}\AgdaSymbol{;}\<%
\\
%
\>[1]\AgdaFunction{lr-implication}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{rl-implication}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{id}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚Åª¬π}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{ap}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Equivalences}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{is-equiv}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{inverse}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{invertible}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Subsingleton-Theorems}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{funext}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{global-hfunext}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{dfunext}\AgdaSymbol{;}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{is-singleton}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{is-subsingleton}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{is-prop}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Univalence}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{global-dfunext}\AgdaSymbol{;}\<%
\\
%
\>[1]\AgdaFunction{univalence-gives-global-dfunext}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚óè\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚âÉ\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Œ†-is-subsingleton}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Œ£-is-subsingleton}\AgdaSymbol{;}\<%
\\
%
\>[1]\AgdaFunction{logically-equivalent-subsingletons-are-equivalent}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Powerset}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaKeyword{renaming}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àà\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àà‚ÇÄ\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚äÜ\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚äÜ‚ÇÄ\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{‚àà-is-subsingleton}\AgdaSpace{}%
\AgdaSymbol{to}\AgdaSpace{}%
\AgdaFunction{‚àà‚ÇÄ-is-subsingleton}\AgdaSymbol{)}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{ùìü}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{equiv-to-subsingleton}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{powersets-are-sets'}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{subset-extensionality'}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{propext}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}holds}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{Œ©}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Embeddings}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{Nat}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{NatŒ†}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{NatŒ†-is-embedding}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{is-embedding}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{pr‚ÇÅ-embedding}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{‚àò-embedding}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{is-set}\AgdaSymbol{;}\AgdaSpace{}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚Ü™\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{embedding-gives-ap-is-equiv}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{embeddings-are-lc}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{√ó-is-subsingleton}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{id-is-embedding}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Solved-Exercises}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{to-subtype-‚â°}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Unique-Existence}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{‚àÉ!}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{-‚àÉ!}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\\
%
\>[0]\AgdaKeyword{open}\AgdaSpace{}%
\AgdaKeyword{import}\AgdaSpace{}%
\AgdaModule{MGS-Subsingleton-Truncation}\AgdaSpace{}%
\AgdaKeyword{using}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àô\AgdaUnderscore{}}}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{to-Œ£-‚â°}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{equivs-are-embeddings}\AgdaSymbol{;}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{invertibles-are-equivs}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{fiber}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{‚äÜ-refl-consequence}\AgdaSymbol{;}\AgdaSpace{}%
\AgdaFunction{hfunext}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaKeyword{public}\<%
\end{code}
\ccpad
Notice that we carefully specify which definitions and theorems we want to import from each module. This is not absolutely necessary, but it helps us avoid name clashes and, more importantly, makes explicit on which components of the type theory our development depends.

\subsubsection{Special notation for Agda universes}
\label{special-notation-for-agda-universes}
The first import in the list of \AgdaKeyword{open}\AgdaSpace{}\AgdaKeyword{import} directives above imports the \universes module from Martin Escardo's \TypeTopology library. This provides, among other things, an elegant notation for type universes that we have fully adopted and we use it throughout the \agdaualib.\footnote{We won't discuss every line of the \universes module of the \typetopology library. Instead we merely touch upon the few lines of code that define the notational devices we adopt throughout the \ualib. For those who wish for more details, \mhe has made available an excellent set of notes from his course, \MGSnineteen. We highly recommend \href{https://www.cs.bham.ac.uk/~mhe/HoTT-UF-in-Agda-Lecture-Notes/index.html}{Martin's notes} to anyone who wants more information than we provide here about \MLTT and the Univalent Foundations/HoTT extensions thereof.}



The \agdaualib adopts the notation of the \typetopology library. In particular, universes are denoted by capitalized script letters from the second half of the alphabet, e.g., \ab ùì§, \ab ùì•, \ab ùì¶, etc. Also defined in \typetopology are the operators~\af Ãá~and~\af ‚Å∫. These map a universe \ab ùì§ to \ab ùì§ \af Ãá := \Set \ab ùì§ and \ab ùì§ \af ‚Å∫ \aod := \lsuc \ab ùì§, respectively.  Thus, \ab ùì§ \af Ãá is simply an alias for \Set \ab ùì§, and we have \ab ùì§ \af Ãá \as : (\ab ùì§ \af ‚Å∫) \af Ãá. Table~\ref{tab:dictionary} translates between standard \agda syntax and \typetopology/\ualib notation.

\begin{table}
\begin{tabular}{r|l}
Standard \agda                        &          \typetopology/\ualib \\
\hline
\AgdaKeyword{Level}          &   \AgdaFunction{Universe}\\
\ab ùì§ : \AgdaKeyword{Level}  & \ab ùì§ : \AgdaFunction{Universe}\\
\Set \ab ùì§                  &       \ab ùì§ Ãá \\
\lsuc \ab ùì§                   &    \ab ùì§ ‚Å∫\\
\Set (\lsuc \ab ùì§) &    \ab ùì§ ‚Å∫ Ãá\\
\lzero                       &         \AgdaBound{ùì§‚ÇÄ}\\
\AgdaFunction{Setœâ}  &         \AgdaFunction{ùì§œâ}
\end{tabular}
\caption{Special notation for universe levels}
\label{tab:dictionary}
\end{table}


%% Following \mhe, we refer to universes using capitalized script letters from near the end of the alphabet, e.g., \ab ùì§, \ab ùì•, \ab ùì¶, \ab ùìß, \ab ùì®, \ab ùì©, etc. Also, in the \universes module \mhe defines the \af Ãá operator which maps a universe \ab ùì§ (i.e., a level) to \Set \ab ùì§, and the latter has type \Set(\lsuc \ab ùì§). The level \lzero is renamed \AgdaBound{ùì§‚ÇÄ}, so \AgdaBound{ùì§‚ÇÄ}\af Ãá is an alias for \Set \lzero.\footnote{Incidentally, \Set \lzero corresponds to \texttt{Sort\sP{3}0} in the \href{https://leanprover.github.io/}{Lean} proof assistant language.}

%% Thus, \ab ùì§ Ãá is simply an alias for \Set \ab ùì§, and we have \Set \ab ùì§ : \Set (\lsuc \ab ùì§). Finally, \Set(\lsuc \lzero) is denoted by \Set \AgdaBound{ùì§‚ÇÄ} ‚Å∫ which we (and \mhe) denote by \AgdaBound{ùì§‚ÇÄ} ‚Å∫ Ãá.

%% Table~\ref{tab:dictionary} translates between standard \agda syntax and \mhe/\ualib notation.

%% \begin{table}
%% \begin{tabular}{r|l}
%% Standard \agda                        &          \mhe/\ualib \\
%% \hline
%% \AgdaKeyword{Level}          &   \AgdaFunction{Universe}\\
%% \ab ùì§ : \AgdaKeyword{Level}  & \ab ùì§ : \AgdaFunction{Universe}\\
%% \Set \ab ùì§                  &       \ab ùì§ Ãá \\
%% \lsuc \ab ùì§                   &    \ab ùì§ ‚Å∫\\
%% \Set (\lsuc \ab ùì§) &    \ab ùì§ ‚Å∫ Ãá\\
%% \lzero                       &         \AgdaBound{ùì§‚ÇÄ}\\
%% \Set \lzero              &    \AgdaBound{ùì§‚ÇÄ}~~Ãá\\
%% \lsuc \lzero                  &    \AgdaBound{ùì§‚ÇÄ}‚Å∫\\
%% \Set (\lsuc \lzero) & \AgdaBound{ùì§‚ÇÄ} ‚Å∫ Ãá\\
%% \AgdaFunction{Setœâ}  &         \AgdaFunction{ùì§œâ}
%% \end{tabular}
%% \caption{Special notation for universe levels}
%% \label{tab:dictionary}
%% \end{table}

To justify the introduction of this somewhat nonstandard notation for universe levels, \mhe points out that the Agda library uses \AgdaKeyword{Level} for universes (so what we write as \ab ùì§ Ãá is written \Set\sP{3}\ab ùì§ in standard Agda), but in univalent mathematics the types in \ab ùì§ Ãá need not be sets, so the standard Agda notation can be misleading.

There will be many occasions calling for a type living in the universe that is the least upper bound of two universes, say, \ab ùì§ Ãá and \ab ùì• Ãá . The universe (\ab ùì§ \AgdaSymbol{‚äî} \ab ùì•) Ãá denotes this least upper bound.\footnote{Actually, because \AgdaUnderscore{}\AgdaSymbol{‚äî}\AgdaUnderscore{} has higher precedence than \AgdaUnderscore{}Ãá, we could omit parentheses here and simply write \ab ùì§ \AgdaSymbol{‚äî} \ab ùì• Ãá.} Here \ab ùì§ \AgdaSymbol{‚äî} \ab ùì• is used to denote the universe level corresponding to the least upper bound of the levels \ab ùì§ and \ab ùì•, where the \AgdaUnderscore{}\AgdaSymbol{‚äî}\AgdaUnderscore{} is an \agda primitive designed for precisely this purpose.



















\subsubsection{Dependent pair type}\label{Preliminaries.sssec:dependent-pair-type}
\textit{Dependent pair types} (or \textit{Sigma types}) are defined in the \typetopology library as a record, as follows:
\ccpad
\begin{code}
\>[0]\AgdaKeyword{record}\AgdaSpace{}%
\AgdaRecord{Œ£}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{‚äî}}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}%
\>[52]\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[2]\AgdaKeyword{constructor}\AgdaSpace%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\<%
\\
%
\>[2]\AgdaKeyword{field}\<%
\\
\>[2][@{}l@{\AgdaIndent{0}}]%
\>[3]\AgdaField{pr‚ÇÅ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\<%
\\
%
\>[3]\AgdaField{pr‚ÇÇ}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSpace{}%
\AgdaField{pr‚ÇÅ}\<%
\\
%
\>[0]\AgdaKeyword{infixr}\AgdaSpace{}%
\AgdaNumber{50}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{\AgdaUnderscore{},\AgdaUnderscore{}}}\<%
\end{code}
\ccpad
We prefer the notation \AgdaRecord{Œ£}\sP{3}\ab x\sP{3}Íûâ\sP{3}\ab X\sP{3}\AgdaComma\sP{3}y, which is closer to the standard syntax appearing in the literature than Agda's default syntax (\AgdaRecord{Œ£}\sP{3}\AgdaSymbol{Œª}(\ab x\sP{3}Íûâ\sP{3}\ab X)\sP{3}\as ‚Üí\sP{3}\ab y). \mhe makes the preferred notation available by making the index type explicit, as follows.
\ccpad
\begin{code}
\>[0]\AgdaFunction{-Œ£}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{‚äî}}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\<%
\\
\>[0]\AgdaFunction{-Œ£}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaRecord{Œ£}\AgdaSpace{}%
\AgdaBound{Y}\<%
\\
\>[0]\AgdaKeyword{syntax}\AgdaSpace{}%
\AgdaFunction{-Œ£}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Œ£}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaFunction{Íûâ}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaFunction{,}\AgdaSpace{}%
\AgdaBound{y}\<%
\\
\>[0]\AgdaKeyword{infixr}\AgdaSpace{}%
\AgdaNumber{-1}\AgdaSpace{}%
\AgdaFunction{-Œ£}\<%
\end{code}%
\ccpad
\textbf{N.B.} The symbol Íûâ used here is not the same as the ordinary colon symbol (:), despite how similar they may appear. The symbol in the expression \AgdaRecord{Œ£}\sP{3}\ab x\sP{3}Íûâ\sP{3}\ab X\sP{3}\AgdaComma\sP{3}\ab y above is obtained by typing \texttt{\textbackslash{}:4} in \agdatwomode.

\newcommand\FstUnder{\AgdaOperator{\AgdaFunction{‚à£\AgdaUnderscore{}‚à£}}\xspace}
\newcommand\SndUnder{\AgdaOperator{\AgdaFunction{‚à•\AgdaUnderscore{}‚à•}}\xspace}
Our preferred notations for the first and second projections of a product are \FstUnder and \SndUnder, respectively; however, we sometimes use more standard alternatives, such as \AgdaFunction{pr‚ÇÅ} and \AgdaFunction{pr‚ÇÇ}, or \AgdaFunction{fst} and \AgdaFunction{snd}, or some combination of these, to improve readability, or to avoid notation clashes with other modules.
\ccpad
\begin{code}%
\>[0]\AgdaKeyword{module}\AgdaSpace{}%
\AgdaModule{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaKeyword{where}\<%
\\
\>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaOperator{\AgdaFunction{‚à£\AgdaUnderscore{}‚à£}}\AgdaSpace{}%
\AgdaFunction{fst}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}\{}\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaRecord{Œ£}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{X}\<%
\\
%
\>[1]\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à£}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\>[1]\AgdaFunction{fst}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\>[1]\AgdaOperator{\AgdaFunction{‚à•\AgdaUnderscore{}‚à•}}\AgdaSpace{}%
\AgdaFunction{snd}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}\{}\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaRecord{Œ£}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaFunction{pr‚ÇÅ}\AgdaSpace{}%
\AgdaBound{z}\AgdaSymbol{)}\<%
\\
%
\>[1]\AgdaOperator{\AgdaFunction{‚à•}}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚à•}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{y}\<%
\\
%
\>[1]\AgdaFunction{snd}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{y}\<%
\end{code}

\subsubsection{Dependent function type}\label{Preliminaries.sssec:dependent-function-type}
The so-called \textbf{dependent function type} (or ``Pi type'') is defined in the \typetopology library as follows.
\ccpad
\begin{code}
\>[0]\AgdaFunction{Œ†}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaGeneralizable{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{‚äî}}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\<%
\\
\>[0]\AgdaFunction{Œ†}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì•}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{X}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaBound{x}\<%
\end{code}
\ccpad
To make the syntax for \texttt{Œ†} conform to the standard notation for Pi types, \mhe uses the same trick as the one used above for Sigma types.
\ccpad
\begin{code}
\>[0]\AgdaFunction{-Œ†}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{‚äî}}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\<%
\\
\>[0]\AgdaFunction{-Œ†}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaBound{Y}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Œ†}\AgdaSpace{}%
\AgdaBound{Y}\<%
\\
%
\>[0]\AgdaKeyword{syntax}\AgdaSpace{}%
\AgdaFunction{-Œ†}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{b}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Œ†}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaFunction{Íûâ}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaFunction{,}\AgdaSpace{}%
\AgdaBound{b}\<%
\\
\>[0]\AgdaKeyword{infixr}\AgdaSpace{}%
\AgdaNumber{-1}\AgdaSpace{}%
\AgdaFunction{-Œ†}\<%
\end{code}

\subsubsection{Truncation and sets}\label{Preliminaries.sssec:truncation}
In general, we may have many inhabitants of a given type and, via the Curry-Howard correspondence, many proofs of a given proposition. For instance, suppose we have a type \ab X and an identity relation \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} on \ab X. Then, given two inhabitants \ab a and \ab b of type \ab X, we may ask whether \ab a \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} \ab b.

Suppose \ab p and \ab q inhabit the identity type \ab a \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} b; that is, \ab p and \ab q are proofs of \ab a \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} \ab b, in which case we write \ab p\sP{3}\sP{3}\ab q : \ab a \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} \ab b. Then we might wonder whether and in what sense are the two proofs \ab p and \ab q the ``same.'' We are asking about an identity type on the identity type \AgdaOperator{\AgdaDatatype{‚â°‚Çì}}, and whether there is some inhabitant \ab r of this type; i.e., whether there is a proof \ab r : \ab p \AgdaOperator{\AgdaDatatype{‚â°‚Çì‚ÇÅ}} \ab q that the proof of \ab a \AgdaOperator{\AgdaDatatype{‚â°‚Çì}} \ab b is unique. (This property is sometimes called \emph{uniqueness of identity proofs}.)

Perhaps we have two proofs, say, \ab r\sP{3}\sP{3} \ab s : \ab p \AgdaOperator{\AgdaDatatype{‚â°‚Çì‚ÇÅ}} \ab q. Then of course our next question will be whether \ab r \AgdaOperator{\AgdaDatatype{‚â°‚Çì‚ÇÇ}} \ab s has a proof!  But at some level we may decide that the potential to distinguish two proofs of an identity in a meaningful way (so-called \emph{proof relevance}) is not useful or desirable. At that point, say, at level \ab k, we might assume that there is at most one proof of any identity of the form \ab p  \AgdaOperator{\AgdaDatatype{‚â°‚Çì‚Çñ}} \ab q. This is called \href{https://www.cs.bham.ac.uk/~mhe/HoTT-UF-in-Agda-Lecture-Notes/HoTT-UF-Agda.html#truncation}{truncation}.

We will see some examples of trunction later when we require it to complete some of the \ualib modules leading up to the proof of Birkhoff's HSP Theorem. Readers who want more details should refer to \href{https://www.cs.bham.ac.uk/~mhe/HoTT-UF-in-Agda-Lecture-Notes/HoTT-UF-Agda.html\#truncation}{Section 34} and \href{https://www.cs.bham.ac.uk/~mhe/HoTT-UF-in-Agda-Lecture-Notes/HoTT-UF-Agda.html\#resizing}{35} of MHE's notes, or \href{https://homotopytypetheory.org/2012/09/16/truncations-and-truncated-higher-inductive-types/}{Guillaume Brunerie, Truncations and truncated higher inductive types}, or Section 7.1 of the \hottbook.

We take this opportunity to say what it means in type theory to say that a type is a \emph{set}. A type \ab X \as : \ab ùì§ \af Ãá with an identity relation \AgdaDatatype{‚â°‚Çì} is called a \textbf{set} (or 0-\textbf{groupoid}) if for every pair \ab a \ab b \as : \ab X of elements of type \ab X there is at most one proof of \ab a \AgdaDatatype{‚â°‚Çì} \ab b. This is formalized in the \TypeTopology library as follows:\footnote{As \mhe explains, ``at this point, with the definition of these notions, we are entering the realm of univalent mathematics, but not yet needing the univalence axiom.''}
\ccpad
\begin{code}
\>[0]\AgdaFunction{is-set}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaGeneralizable{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\<%
\\
\>[0]\AgdaFunction{is-set}\AgdaSpace{}%
\AgdaBound{X}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{X}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaFunction{is-subsingleton}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSymbol{)}\<%
\end{code}
