% -*- TeX-master: "ualib-part1.tex" -*-
%%% Local Variables: 
%%% mode: latex
%%% TeX-engine: 'xetex
%%% End:
\subsubsection{Definitional equality}\label{sec:defin-equal}
Here we discuss what is probably the most important type in \mltt. It is called \defn{definitional equality}. This concept is most understood, at least heuristically, with the following slogan: ``Definitional equality is the substitution-preserving equivalence relation generated by definitions.''
We will make this precise below, but first let us quote from a primary source. Per Martin-L\"of offers the following definition in~\cite[\S1.11]{MR0387009} (italics added):\footnote{The \defn{definiendum} is the left-hand side of a defining equation, the \defn{definiens} is the right-hand side.\\ For readers who have never generated an equivalence relation: the \defn{reflexive closure} of \ab R \af ‚äÜ \ab A \ad √ó \ab A is the union of \ab R and all pairs of the form (\ab a , \ab a); the \defn{symmetric closure} is the union of \ab R and its inverse \{(\ab y , \ab x) : (\ab x , \ab y) ‚àà \ab R\}; we leave it to the reader to come up with the correct definition of transitive closure.}
\begin{quote}
  \defn{Definitional equality} is defined to be the equivalence relation, that is, reflexive, symmetric and transitive relation, which is generated by the principles that a definiendum is always definitionally equal to its definiens and that definitional equality is preserved under substitution.
\end{quote}
To be sure we understand what this means, let $:=$ denote the relation with respect to which $x$ is related to $y$ (denoted $x := y$) if and only if $y$ \emph{is the definition of} $x$.  Then the definitional equality relation \ad ‚â° is the reflexive, symmetric, transitive, substitutive closure of $:=$. By \defn{subsitutive closure} we mean closure under the following \defn{substitution rule}.
% \{\ab A \as : \ab ùì§\af Ãá\}\{\ab B \as : \ab A \as ‚Üí \ab ùì¶\af Ãá\}\{\ab x \abt{y}{A}\} \as ‚Üí \ab x \ad ‚â° \ab y \as ‚Üí \ab B \ab x \ad ‚â° \ab B \ab y\\[4pt]
\vskip3mm\hskip1cm \infer[(subst)]{\ab B~\ab x~\ad ‚â°~\ab B~\ab y}{\{\ab A~\as :~\ab ùì§\af Ãá\}~\{\ab B~\as :~\ab A~\as ‚Üí~\ab ùì¶\af Ãá\}~\{\ab x~\abt{y}{A}\}  & \ab x~\ad ‚â°~\ab y}\\[-5pt]


% In~\cite[\S1.11, page 85]{MR0387009}, Per Martin-L\"of describes definitional equality as follows:
% \begin{quote}
% ``Definitional equality is intensional equality, or equality of meaning (synonymy)... Definitional equality ‚â° is a relation between linguistic expressions; it should not be confused with equality between objects (sets, elements of a set etc.)... Definitional equality is the equivalence relation generated by abbreviatory definitions, changes of bound variables and the principle of substituting equals for equals. Therefore it is decidable, but not in the sense that a ‚â° b ‚à® ¬¨(a ‚â° b) holds, simply because a ‚â° b is not a proposition in the sense of the present theory.''\\[-30pt]
% \begin{flushright}Per Martin-L\"of,\\
% \textit{Padua Lecture Notes}~\cite{MR769301}
% \end{flushright}
% \end{quote}

The datatype used in the \ualib to represent definitional equality is imported from the \am{Identity-Type} module of \typtop, but apart from superficial syntactic differences, it is equivalent to the identity type used in all other Agda libraries we know of.  We repeat the definition here for easy reference.
\ccpad
\begin{code}%
% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{hide-refl}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaKeyword{data}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaKeyword{where}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{x}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
% \AgdaKeyword{import}\AgdaSpace{}%
% \AgdaModule{Identity-Type}\AgdaSpace{}%
% \AgdaKeyword{renaming}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSpace{}%
% \AgdaSymbol{to}\AgdaSpace{}%
% \AgdaKeyword{infix}\AgdaSpace{}%
% \AgdaNumber{0}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{\AgdaUnderscore{}‚â°\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaKeyword{public}\<%
% \\
% \>[0]\<%
\end{code}
\ccpad
Whenever we need to complete a proof by simply asserting that \ab{x} is \defn{definitionally equal} to itself, we invoke \aic{refl}. If we need to make explicit the implicit argument \ab x, then we use \aic{refl}~\{\ab x~=~\ab x\}.

\paragraph*{Assumed module contexts}
Before proceeding, a word about a special convention we adopt in the sequel is in order. To reduce reader strain, we will often omit easily inferred typing judgments which would normally appear in the list of parameters of a module or at the start of a type definition, and we sometimes make an announcement like the following (which applies to the present section):
\context{\{\ab{ùì§}~\as :~\ap{Universe}\} \{\ab{A}~\as :~\ab ùì§\af Ãá\}}
\paragraph*{Definitional equality is an equivalence}
The relation \ad{‚â°} just defined is naturally an equivalence relation, and the formal proof of this fact is trivial. Indeed, we don't need to prove reflexivity, since that is the defining property of \ad{‚â°}, and the proofs of symmetry and transitivity are also immediate.
\ccpad
\begin{code}%
\>[1]\AgdaFunction{‚â°-symmetric}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\>[1]\AgdaFunction{‚â°-symmetric}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{‚â°-sym}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\>[1]\AgdaFunction{‚â°-sym}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{‚â°-transitive}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\<%
\\
%
\>[1]\AgdaFunction{‚â°-transitive}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\\
%
\\[\AgdaEmptyExtraSkip]%
%
\>[1]\AgdaFunction{‚â°-trans}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\<%
\\
%
\>[1]\AgdaFunction{‚â°-trans}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}
\ccpad
The only difference between \af{‚â°-symmetric} and \af{‚â°-sym} (resp., \af{‚â°-transitive} and \af{‚â°-trans}) is that \af{‚â°-sym} (resp., \af{‚â°-trans}) has fewer explicit arguments, which is sometimes convenient.

We prove that \ad ‚â° obeys the substitution rule (subst) in the next section (see \af{ap}~\S\ref{transport}), but first we define some syntactic sugar that will make it easier to apply symmetry and transitivity of \ad ‚â° in proofs.\footnote{%
\textbf{Unicode Hints} (\agdamode): \texttt{\textbackslash{}\^{}-\textbackslash{}\^{}1} ‚Üù \af{‚Åª¬π}; \texttt{\textbackslash{}Mii\textbackslash{}Mid} ‚Üù \af{ùëñùëë}; \texttt{\textbackslash{}.}‚Üù \af{‚àô}. In general, for information about a character, place the cursor on the character and type \texttt{M-x\ describe-char} (or \texttt{M-x\ h\ d\ c}).}
\ccpad
\begin{code}
% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{hide-sym-trans}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚Åª¬π}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
% \AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{x}\<%
\\
%
\>[1]\AgdaBound{p}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚Åª¬π}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚â°-sym}\AgdaSpace{}%
\AgdaBound{p}\<%
\end{code}
\ccpad
If we have a proof \ab p \as :~\ab x \aod ‚â° \ab y, and we need a proof of \ab y \aod ‚â° \ab x, then instead of \af{‚â°-sym} \ab p we can use the more intuitive \ab p \af{‚Åª¬π}. Similarly, the following syntactic sugar makes abundant appeals to transitivity easier to stomach.
\ccpad
\begin{code}%
\>[1]\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àô\AgdaUnderscore{}}}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
% \AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{z}\<%
\\
%
\>[1]\AgdaBound{p}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{‚àô}}\AgdaSpace{}%
\AgdaBound{q}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{‚â°-trans}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaBound{q}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
% \AgdaKeyword{import}\AgdaSpace{}%
% \AgdaModule{MGS-MLTT}\AgdaSpace{}%
% \AgdaKeyword{using}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚Åª¬π}}\AgdaSymbol{;}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{\AgdaUnderscore{}‚àô\AgdaUnderscore{}}}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaKeyword{public}\<%
\end{code}

\subsubsection{Transport}\label{transport}

Alonzo Church characterized equality by declaring two things equal if and only if no property (predicate) can distinguish them (see \cite{Church:1940}). In other terms, \ab x and \ab y are equal if and only if for all \ab{P} we have \ab{P} \ab x \as ‚Üí \ab P \ab y. One direction of this implication is sometimes called \emph{substitution} or \emph{transport} or \emph{transport along an identity}. It asserts the following: if two objects are equal and one of them satisfies a given predicate, then so does the other. A type representing this notion is defined, along with the (polymorphic) identity function, in the \am{MGS-MLTT} module of \typtop as follows.\footnote{Including every line of code of the \agdaualib in this paper would result in an unbearable reading experience. We include all significant sections of code from the first 13 modules, but we omit lines indicating that redundant definitions of functions (e.g., \af{transport} and \af{ap}) occur inside named ``hidden'' modules. We also omit lines importing the original definitions of such duplicate definitions from \typtop library.}
\ccpad
\begin{code}%
\>[1]\AgdaFunction{ùëñùëë}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{A}\<%
\\
%
\>[1]\AgdaFunction{ùëñùëë}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaSymbol{Œª}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\<%
\end{code}
\scpad
\begin{code}
\>[1]\AgdaFunction{transport}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì¶}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSpace{}%
\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{x}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{y}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{x}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{y}\<%
\\
%
\>[1]\AgdaFunction{transport}\AgdaSpace{}%
\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{\})}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{ùëñùëë}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{B}\AgdaSpace{}%
\AgdaBound{x}\AgdaSymbol{)}\<%
\end{code}
\scpad
% See~\cite{MHE} for a discussion of transport.\footnote{cf.~transport in \href{https://github.com/HoTT/HoTT-Agda/blob/master/core/lib/Base.agda}{HoTT-Agda}: \url{https://github.com/HoTT/HoTT-Agda/blob/master/core/lib/Base.agda}.}

A function is well-defined if and only if it maps equivalent elements to a single element and we often use this nature of functions in Agda proofs.  It is equivalent to the substitution rule (subst) we defined in the last section. If we have a function \ab{f} \as : \ab A \as ‚Üí \ab B, two elements \ab{x} \ab{y} \as : \ab A of the domain, and an identity proof \ab{p} \as : \ab x \ad ‚â° \ab{y}, then we obtain a proof of \ab{f} \ab x \ad ‚â° \ab f \ab{y} by simply applying the \af{ap} function like so, \af{ap} \ab f \ab p \as : \ab f \ab x \ad ‚â° \ab f \ab{y}. Escard√≥ defines \af{ap} in \typtop as follows.
\ccpad
\begin{code}%
% \>[0]\AgdaKeyword{module}\AgdaSpace{}%
% \AgdaModule{hide-ap}%
% \>[16]\AgdaSymbol{\{}\AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaPostulate{Universe}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaKeyword{where}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0][@{}l@{\AgdaIndent{0}}]%
\>[1]\AgdaFunction{ap}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaGeneralizable{ùì•}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}
\AgdaSymbol{(}\AgdaBound{f}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{)\{}\AgdaBound{a}\AgdaSpace{}%
\AgdaBound{b}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{b}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{b}\<%
\\
%
\>[1]\AgdaFunction{ap}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaBound{a}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{transport}\AgdaSpace{}%
\AgdaSymbol{(Œª}\AgdaSpace{}%
\AgdaBound{-}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{-}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaBound{p}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{\{}\AgdaArgument{x}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{a}\AgdaSymbol{\})}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% \>[0]\AgdaKeyword{open}\AgdaSpace{}%
% \AgdaKeyword{import}\AgdaSpace{}%
% \AgdaModule{MGS-MLTT}\AgdaSpace{}%
% \AgdaKeyword{using}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaFunction{ap}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaKeyword{public}\<%
\end{code}
\ccpad
This establishes that our definitional equality satisfies the substitution rule (subst).

Here's a useful variation of \af{ap} that we borrow from the \texttt{Relation/Binary/Core.agda} module of the \agdastdlib (transcribed into \typtop/\ualib).
\ccpad
\begin{code}%
\>[0]\AgdaFunction{cong-app}\AgdaSpace{}%
\AgdaSymbol{:}%
\>[101I]\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{ùì§}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{ùì¶}\AgdaSpace{}%
\AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{g}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaFunction{Œ†}\AgdaSpace{}%
\AgdaBound{B}\AgdaSymbol{\}}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
% \\
% \>[0][@{}l@{\AgdaIndent{0}}]%
% \>[1]\AgdaSymbol{‚Üí}%
% \>[.][@{}l@{}]\<[101I]%
% \>[12]\AgdaBound{f}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{g}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{a}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaBound{A}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaBound{f}\AgdaSpace{}%
\AgdaBound{a}\AgdaSpace{}%
\AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
\AgdaBound{g}\AgdaSpace{}%
\AgdaBound{a}\<%
\\
%
\>[0]\AgdaFunction{cong-app}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\AgdaSpace{}%
\AgdaSymbol{\AgdaUnderscore{}}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaInductiveConstructor{refl}\<%
\end{code}

% \subsubsection{‚â°-intro and ‚â°-elim for nondependent pairs}\label{intro-and-elim-for-nondependent-pairs}

% We conclude our presentation of the \ualibhtml{Overture.Equality} module with some occasionally useful introduction and elimination rules for the equality relation on (nondependent) pair types.
% \ccpad
% \begin{code}%
% \>[0]\AgdaFunction{‚â°-elim-left}\AgdaSpace{}%
% \AgdaSymbol{:}%
% \>[102I]\AgdaSymbol{\{}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì¶}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% % \\
% % \>[0][@{}l@{\AgdaIndent{0}}]%
% % \>[1]\AgdaSymbol{‚Üí}%
% % \>[.][@{}l@{}]\<[102I]%
% % \>[15]\AgdaSymbol{(}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÅ}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{A‚ÇÇ}\<%
% \\
% %
% \>[0]\AgdaFunction{‚â°-elim-left}\AgdaSpace{}%
% \AgdaBound{e}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaFunction{ap}\AgdaSpace{}%
% \AgdaFunction{pr‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{e}\<%
% \end{code}
% \scpad
% \begin{code}%
% \>[0]\AgdaFunction{‚â°-elim-right}\AgdaSpace{}%
% \AgdaSymbol{:}%
% \>[105I]\AgdaSymbol{\{}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì¶}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% % \\
% % \>[0][@{}l@{\AgdaIndent{0}}]%
% % \>[1]\AgdaSymbol{‚Üí}%
% % \>[.][@{}l@{}]\<[105I]%
% % \>[16]\AgdaSymbol{(}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÅ}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{B‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\<%
% \\
% %
% \>[0]\AgdaFunction{‚â°-elim-right}\AgdaSpace{}%
% \AgdaBound{e}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaFunction{ap}\AgdaSpace{}%
% \AgdaFunction{pr‚ÇÇ}\AgdaSpace{}%
% \AgdaBound{e}\<%
% \end{code}
% \scpad
% \begin{code}
% \>[0]\AgdaFunction{‚â°-√ó-intro}\AgdaSpace{}%
% \AgdaSymbol{:}%
% \>[106I]\AgdaSymbol{\{}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaSymbol{\{}\AgdaBound{B‚ÇÅ}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì¶}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}}\AgdaSpace{}%
% % \\
% % \>[0][@{}l@{\AgdaIndent{0}}]%
% % \>[1]\AgdaSymbol{‚Üí}%
% % \>[.][@{}l@{}]\<[106I]%
% % \>[13]\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{B‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÅ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÅ}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{A‚ÇÇ}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{B‚ÇÇ}\AgdaSymbol{)}\<%
% \\
% %
% \>[0]\AgdaFunction{‚â°-√ó-intro}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\<%
% \end{code}
% \scpad
% \begin{code}
% \>[1]\AgdaFunction{‚â°-√ó-int}\AgdaSpace{}%
% \AgdaSymbol{:}%
% \>[99I]\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì¶}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{a}\AgdaSpace{}%
% \AgdaBound{a'}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{b}\AgdaSpace{}%
% \AgdaBound{b'}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{B}\AgdaSymbol{\}}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{a}\AgdaSpace{}%
% % \\
% % \>[1][@{}l@{\AgdaIndent{0}}]%
% % \>[2]\AgdaSymbol{‚Üí}%
% % \>[.][@{}l@{}]\<[99I]%
% % \>[11]\AgdaBound{a}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{a'}%
% \>[19]\AgdaSymbol{‚Üí}%
% \>[22]\AgdaBound{b}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{b'}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{a}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{b}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{a'}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{b'}\AgdaSymbol{)}\<%
% \\
% %
% \>[1]\AgdaFunction{‚â°-√ó-int}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\<%
% \end{code}

% \begin{code}%
% \>[0]\AgdaFunction{‚â°-√ó-int}\AgdaSpace{}%
% \AgdaSymbol{:}%
% \[111I]\AgdaSymbol{\{}\AgdaBound{A}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì§}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{B}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{ùì¶}\AgdaSpace{}%
% \AgdaOperator{\AgdaFunction{Ãá}}\AgdaSymbol{\}\{}\AgdaBound{a}\AgdaSpace{}%
% \AgdaBound{u}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{A}\AgdaSymbol{\}\{}\AgdaBound{b}\AgdaSpace{}%
% \AgdaBound{v}\AgdaSpace{}%
% \AgdaSymbol{:}\AgdaSpace{}%
% \AgdaBound{B}\AgdaSymbol{\}}\<%
% \\
% \\
% \>[0][@{}l@{\AgdaIndent{0}}]%
% \>[1]\AgdaSymbol{‚Üí}%
% \>[.][@{}l@{}]\<[111I]%
% \>[11]\AgdaBound{a}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{u}\AgdaSpace{}%
% \AgdaSymbol{‚Üí}\AgdaSpace{}%
% \AgdaBound{b}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaBound{v}\<%
% \\
% %
% \>[11]\AgdaComment{---------------------------}\<%
% \\
% %
% \>[1]\AgdaSymbol{‚Üí}%
% \>[11]\AgdaSymbol{(}\AgdaBound{a}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{b}\AgdaSymbol{)}\AgdaSpace{}%
% \AgdaOperator{\AgdaDatatype{‚â°}}\AgdaSpace{}%
% \AgdaSymbol{(}\AgdaBound{u}\AgdaSpace{}%
% \AgdaOperator{\AgdaInductiveConstructor{,}}\AgdaSpace{}%
% \AgdaBound{v}\AgdaSymbol{)}\<%
% \\
% %
% \\[\AgdaEmptyExtraSkip]%
% %
% \>[0]\AgdaFunction{‚â°-√ó-int}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\AgdaSpace{}%
% \AgdaSymbol{=}\AgdaSpace{}%
% \AgdaInductiveConstructor{refl}\<%
% \end{code}
