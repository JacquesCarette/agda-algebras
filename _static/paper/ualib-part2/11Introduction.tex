
To support formalization in type theory of research level mathematics in universal algebra and related fields, we present the Agda Universal Algebra Library (\agdaualib), a software library containing formal statements and proofs of the core definitions and results of universal algebra. 
The \ualib is written in \agda~\cite{Norell:2009}, a programming language and proof assistant based on Martin-L\"of Type Theory that not only supports dependent and inductive types, as well as proof tactics for proving things about the objects that inhabit these types.

\subsection{Motivation}\label{sec:motivation}
%% \subsection{Vision and Goals}\label{vision-and-goals}
The seminal idea for the \agdaualib project was the observation that, on the one hand, a number of fundamental constructions in universal algebra can be defined recursively, and theorems about them proved by structural induction, while, on the other hand, inductive and dependent types make possible very precise formal representations of recursively defined objects, which often admit elegant constructive proofs of properties of such objects.  An important feature of such proofs in type theory is that they are total functional programs and, as such, they are computable, composable, and machine-verifiable.
%% These observations suggested that there would be much to gain from implementing universal algebra in a language, such as Martin-L\"of type theory, that features dependent and inductive types.

Finally, our own research experience has taught us that a proof assistant and programming language (like Agda), when equipped with specialized libraries and domain-specific tactics to automate the proof idioms of our field, can be an extremely powerful and effective asset. As such we believe that proof assistants and their supporting libraries will eventually become indispensable tools in the working mathematician's toolkit.


\subsection{Organization}
\label{sec:contributions}

In this paper we limit ourselves to the presentation of the middle third of the \ualib, which includes types for representing homomorphisms, terms, and subalgebras. This limitation will allow us the space required to discuss some of the more interesting type theoretic and foundational issues that arise when developing a library of this kind and when attempting to represent advanced mathematical notions in type theory and formalize them in Agda.

This is the second installment of a three-part series of papers describing the \agdaualib. The first part is~\cite{DeMeo:2021-1} which covers relations, algebras, congruences, and quotients. The third part will cover free algebras, equational classes of algebras (i.e., varieties), and Birkhoff's HSP theorem.

The present paper is divided into three main parts, in \S\ref{sec:homomorphism-types}, \S\ref{sec:types-terms}, and 4.  The first of these introduces types representing \emph{homomorphisms} from one algebra to another, and presents a formal statement and proof of the first fundamental theorem about homomorphisms, known as the \emph{First Isomorphism Theorem}, as well as a version of the so-called \emph{Second Isomorphism Theorem}. This is followed by dependents type definitions for representing \emph{isomorphisms} and \emph{homomorphic images} of algebraic structures.

In Section~\ref{sec:types-terms} we define inductive types to represent \emph{terms} in a given signature and the \emph{term algebra}. It is here that we prove the \emph{absolute universality} (or \emph{initiality}) \emph{property} of the term algebra.  We define types that denote the interpretation of a term in an algebra type, called a \emph{term operation}, including the interpretation of terms in \emph{arbitrary products} of algebras (\S\ref{interpretation-of-terms-in-product-algebras}). The second part concludes with subsection~\ref{compatibility-of-terms} on the compatibility of terms with basic operations and congruence relations.

Section~\ref{sec:subalgebra-types} presents inductive and dependent types for representing subuniverses and subalgebras of a given algebra. Here we define an inductive type that represents the \emph{subuniverse generated by} \ab X, for a given predicate \ab X \as : \af{Pred} \af ‚à£ \ab ùë® \af ‚à£ \AgdaUnderscore,\footnote{As we learned in~\cite{DeMeo:2021-1}, such \ab X represents a subset of the domain of the algebra \ab ùë®.} and we use this type to formalize a few basic subuniverse lemmas.  We also define types that pertain to arbitrary classes of algebras. In particular, in Subsection~\ref{sec:subalgebras} on subalgebras, we define a type that represents the assertion that a given algebra is a subalgebra of some member of a class of algebras.  Finally, the appendix~\S\ref{sec:univ-subalg} includes our generalization of Martin Escardo's use of \emph{univalence} for modeling subgroups.

\subsection{Resources}
To conclude this introduction, we offer links to other reference materials (see also the attributions section on the first page).  For the required background in Universal Algebra, we highly recommend the textbook by Cliff Bergman~\cite{Bergman:2012}.  For the type theory background, we recommend the HoTT Book~\cite{HoTT} and Escard\'o's \ufcourse. For more information about \agdaualib, the following are the official sources.
\begin{itemize}
  \item \href{https://ualib.gitlab.io}{\texttt{ualib.org}} (the web site) includes every line of code in the library, rendered as html and accompanied by documentation, and
  \item \href{https://gitlab.com/ualib/ualib.gitlab.io}{\texttt{gitlab.com/ualib/ualib.gitlab.io}} (the source code) freely available and licensed under the \href{https://creativecommons.org/licenses/by-sa/4.0/}{Creative Commons Attribution-ShareAlike 4.0 International License}.
  \item \emph{The Agda Universal Algebra Library, Part 1: relations, algebras, congruences, and quotients}~\cite{DeMeo:2021-1}. 
\item \emph{The Agda Universal Algebra Library, Part 3: free algebras, equational classes, and Birkhoff's theorem}~\cite{DeMeo:2021-3}.
\end{itemize}
The first item links to the official \ualib html documentation which includes complete proofs of every theorem we mention here, and much more, including the Agda modules covered in the first and third installments of this series of papers on the \ualib.

Finally, readers will get much more out of the paper if they download the \ualib from \url{https://gitlab.com/ualib/ualib.gitlab.io/}, install the library, and try it out for themselves.


%%% Local Variables:
%%% TeX-master: "ualib-part2-20210304.tex"
%%% End: