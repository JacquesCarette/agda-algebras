---
layout: default
title : UALib.Birkhoff.Theorem (The Agda Universal Algebra Library)
date : 2021-01-14
author: William DeMeo
---

### <a id="the-hsp-theorem-in-agda">The HSP Theorem in Agda</a>

This section presents the [UALib.Birkhoff.Theorem][] module of the [Agda Universal Algebra Library][].

It is now all but trivial to use what we have already proved and piece together a complete proof of Birkhoff's celebrated HSP theorem asserting that every variety is defined by a set of identities (is an "equational class").

<pre class="Agda">

<a id="543" class="Symbol">{-#</a> <a id="547" class="Keyword">OPTIONS</a> <a id="555" class="Pragma">--without-K</a> <a id="567" class="Pragma">--exact-split</a> <a id="581" class="Pragma">--safe</a> <a id="588" class="Symbol">#-}</a>
<a id="592" class="Keyword">open</a> <a id="597" class="Keyword">import</a> <a id="604" href="UALib.Algebras.html" class="Module">UALib.Algebras</a> <a id="619" class="Keyword">using</a> <a id="625" class="Symbol">(</a><a id="626" href="UALib.Algebras.Signatures.html#1452" class="Function">Signature</a><a id="635" class="Symbol">;</a> <a id="637" href="universes.html#613" class="Generalizable">𝓞</a><a id="638" class="Symbol">;</a> <a id="640" href="universes.html#617" class="Generalizable">𝓥</a><a id="641" class="Symbol">;</a> <a id="643" href="UALib.Algebras.Algebras.html#811" class="Function">Algebra</a><a id="650" class="Symbol">;</a> <a id="652" href="UALib.Algebras.Algebras.html#3925" class="Function Operator">_↠_</a><a id="655" class="Symbol">)</a>
<a id="657" class="Keyword">open</a> <a id="662" class="Keyword">import</a> <a id="669" href="UALib.Prelude.Preliminaries.html" class="Module">UALib.Prelude.Preliminaries</a> <a id="697" class="Keyword">using</a> <a id="703" class="Symbol">(</a><a id="704" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="718" class="Symbol">;</a> <a id="720" href="universes.html#551" class="Postulate">Universe</a><a id="728" class="Symbol">;</a> <a id="730" href="universes.html#758" class="Function Operator">_̇</a><a id="732" class="Symbol">)</a>

<a id="735" class="Keyword">module</a> <a id="742" href="UALib.Birkhoff.Theorem.html" class="Module">UALib.Birkhoff.Theorem</a>
 <a id="766" class="Symbol">{</a><a id="767" href="UALib.Birkhoff.Theorem.html#767" class="Bound">𝑆</a> <a id="769" class="Symbol">:</a> <a id="771" href="UALib.Algebras.Signatures.html#1452" class="Function">Signature</a> <a id="781" href="universes.html#613" class="Generalizable">𝓞</a> <a id="783" href="universes.html#617" class="Generalizable">𝓥</a><a id="784" class="Symbol">}{</a><a id="786" href="UALib.Birkhoff.Theorem.html#786" class="Bound">gfe</a> <a id="790" class="Symbol">:</a> <a id="792" href="MGS-Subsingleton-Theorems.html#3468" class="Function">global-dfunext</a><a id="806" class="Symbol">}</a>
 <a id="809" class="Symbol">{</a><a id="810" href="UALib.Birkhoff.Theorem.html#810" class="Bound">𝕏</a> <a id="812" class="Symbol">:</a> <a id="814" class="Symbol">{</a><a id="815" href="UALib.Birkhoff.Theorem.html#815" class="Bound">𝓤</a> <a id="817" href="UALib.Birkhoff.Theorem.html#817" class="Bound">𝓧</a> <a id="819" class="Symbol">:</a> <a id="821" href="universes.html#551" class="Postulate">Universe</a><a id="829" class="Symbol">}{</a><a id="831" href="UALib.Birkhoff.Theorem.html#831" class="Bound">X</a> <a id="833" class="Symbol">:</a> <a id="835" href="UALib.Birkhoff.Theorem.html#817" class="Bound">𝓧</a> <a id="837" href="universes.html#758" class="Function Operator">̇</a> <a id="839" class="Symbol">}(</a><a id="841" href="UALib.Birkhoff.Theorem.html#841" class="Bound">𝑨</a> <a id="843" class="Symbol">:</a> <a id="845" href="UALib.Algebras.Algebras.html#811" class="Function">Algebra</a> <a id="853" href="UALib.Birkhoff.Theorem.html#815" class="Bound">𝓤</a> <a id="855" href="UALib.Birkhoff.Theorem.html#767" class="Bound">𝑆</a><a id="856" class="Symbol">)</a> <a id="858" class="Symbol">→</a> <a id="860" href="UALib.Birkhoff.Theorem.html#831" class="Bound">X</a> <a id="862" href="UALib.Algebras.Algebras.html#3925" class="Function Operator">↠</a> <a id="864" href="UALib.Birkhoff.Theorem.html#841" class="Bound">𝑨</a><a id="865" class="Symbol">}</a>
 <a id="868" class="Symbol">{</a><a id="869" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a> <a id="871" class="Symbol">:</a> <a id="873" href="universes.html#551" class="Postulate">Universe</a><a id="881" class="Symbol">}</a> <a id="883" class="Symbol">{</a><a id="884" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a> <a id="886" class="Symbol">:</a> <a id="888" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a> <a id="890" href="universes.html#758" class="Function Operator">̇</a><a id="891" class="Symbol">}</a>
 <a id="894" class="Keyword">where</a>

<a id="901" class="Keyword">open</a> <a id="906" class="Keyword">import</a> <a id="913" href="UALib.Birkhoff.Lemmata.html" class="Module">UALib.Birkhoff.Lemmata</a> <a id="936" class="Symbol">{</a><a id="937" class="Argument">𝑆</a> <a id="939" class="Symbol">=</a> <a id="941" href="UALib.Birkhoff.Theorem.html#767" class="Bound">𝑆</a><a id="942" class="Symbol">}{</a><a id="944" href="UALib.Birkhoff.Theorem.html#786" class="Bound">gfe</a><a id="947" class="Symbol">}{</a><a id="949" href="UALib.Birkhoff.Theorem.html#810" class="Bound">𝕏</a><a id="950" class="Symbol">}{</a><a id="952" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a><a id="953" class="Symbol">}{</a><a id="955" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a><a id="956" class="Symbol">}</a> <a id="958" class="Keyword">public</a>
<a id="965" class="Keyword">open</a> <a id="970" href="UALib.Birkhoff.FreeAlgebra.html#2671" class="Module">the-free-algebra</a> <a id="987" class="Symbol">{</a><a id="988" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a><a id="989" class="Symbol">}{</a><a id="991" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a><a id="992" class="Symbol">}{</a><a id="994" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a><a id="995" class="Symbol">}</a>

<a id="998" class="Keyword">module</a> <a id="Birkhoffs-Theorem"></a><a id="1005" href="UALib.Birkhoff.Theorem.html#1005" class="Module">Birkhoffs-Theorem</a>
 <a id="1024" class="Symbol">{</a><a id="1025" href="UALib.Birkhoff.Theorem.html#1025" class="Bound">𝒦</a> <a id="1027" class="Symbol">:</a> <a id="1029" href="UALib.Relations.Unary.html#1066" class="Function">Pred</a> <a id="1034" class="Symbol">(</a><a id="1035" href="UALib.Algebras.Algebras.html#811" class="Function">Algebra</a> <a id="1043" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a> <a id="1045" href="UALib.Birkhoff.Theorem.html#767" class="Bound">𝑆</a><a id="1046" class="Symbol">)</a> <a id="1048" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a><a id="1051" class="Symbol">}</a>
    <a id="1057" class="Comment">-- extensionality assumptions</a>
    <a id="1091" class="Symbol">{</a><a id="1092" href="UALib.Birkhoff.Theorem.html#1092" class="Bound">hfe</a> <a id="1096" class="Symbol">:</a> <a id="1098" href="MGS-FunExt-from-Univalence.html#2235" class="Function">hfunext</a> <a id="1106" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a> <a id="1110" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a><a id="1113" class="Symbol">}</a>
    <a id="1119" class="Symbol">{</a><a id="1120" href="UALib.Birkhoff.Theorem.html#1120" class="Bound">pe</a> <a id="1123" class="Symbol">:</a> <a id="1125" href="MGS-Powerset.html#382" class="Function">propext</a> <a id="1133" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a><a id="1136" class="Symbol">}</a>
    <a id="1142" class="Comment">-- truncation assumptions:</a>
    <a id="1173" class="Symbol">{</a><a id="1174" href="UALib.Birkhoff.Theorem.html#1174" class="Bound">ssR</a> <a id="1178" class="Symbol">:</a> <a id="1180" class="Symbol">∀</a> <a id="1182" href="UALib.Birkhoff.Theorem.html#1182" class="Bound">p</a> <a id="1184" href="UALib.Birkhoff.Theorem.html#1184" class="Bound">q</a> <a id="1186" class="Symbol">→</a> <a id="1188" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="1204" class="Symbol">((</a><a id="1206" href="UALib.Birkhoff.FreeAlgebra.html#4669" class="Function">ψRel</a> <a id="1211" href="UALib.Birkhoff.Theorem.html#1025" class="Bound">𝒦</a><a id="1212" class="Symbol">)</a> <a id="1214" href="UALib.Birkhoff.Theorem.html#1182" class="Bound">p</a> <a id="1216" href="UALib.Birkhoff.Theorem.html#1184" class="Bound">q</a><a id="1217" class="Symbol">)}</a>
    <a id="1224" class="Symbol">{</a><a id="1225" href="UALib.Birkhoff.Theorem.html#1225" class="Bound">ssA</a> <a id="1229" class="Symbol">:</a> <a id="1231" class="Symbol">∀</a> <a id="1233" href="UALib.Birkhoff.Theorem.html#1233" class="Bound">C</a> <a id="1235" class="Symbol">→</a> <a id="1237" href="MGS-Basic-UF.html#743" class="Function">is-subsingleton</a> <a id="1253" class="Symbol">(</a><a id="1254" href="UALib.Relations.Quotients.html#1110" class="Function">𝒞</a><a id="1255" class="Symbol">{</a><a id="1256" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a><a id="1259" class="Symbol">}{</a><a id="1261" href="UALib.Birkhoff.FreeAlgebra.html#2722" class="Function">𝓸𝓿𝓾</a><a id="1264" class="Symbol">}{</a><a id="1266" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1268" href="UALib.Terms.Free.html#1035" class="Function">𝑻</a> <a id="1270" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a> <a id="1272" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a><a id="1273" class="Symbol">}{</a><a id="1275" href="UALib.Birkhoff.FreeAlgebra.html#4669" class="Function">ψRel</a> <a id="1280" href="UALib.Birkhoff.Theorem.html#1025" class="Bound">𝒦</a><a id="1281" class="Symbol">}</a> <a id="1283" href="UALib.Birkhoff.Theorem.html#1233" class="Bound">C</a><a id="1284" class="Symbol">)}</a>
 <a id="1288" class="Keyword">where</a>

 <a id="1296" class="Keyword">open</a> <a id="1301" href="UALib.Birkhoff.FreeAlgebra.html#6541" class="Module">the-relatively-free-algebra</a> <a id="1329" class="Symbol">{</a><a id="1330" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a><a id="1331" class="Symbol">}{</a><a id="1333" href="UALib.Birkhoff.Theorem.html#869" class="Bound">𝓤</a><a id="1334" class="Symbol">}{</a><a id="1336" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a><a id="1337" class="Symbol">}{</a><a id="1339" href="UALib.Birkhoff.Theorem.html#1025" class="Bound">𝒦</a><a id="1340" class="Symbol">}</a>
 <a id="1343" class="Keyword">open</a>  <a id="1349" href="UALib.Birkhoff.Lemmata.html#1130" class="Module">HSPLemmata</a> <a id="1360" class="Symbol">{</a><a id="1361" class="Argument">𝒦</a> <a id="1363" class="Symbol">=</a> <a id="1365" href="UALib.Birkhoff.Theorem.html#1025" class="Bound">𝒦</a><a id="1366" class="Symbol">}{</a><a id="1368" href="UALib.Birkhoff.Theorem.html#1092" class="Bound">hfe</a><a id="1371" class="Symbol">}{</a><a id="1373" href="UALib.Birkhoff.Theorem.html#1120" class="Bound">pe</a><a id="1375" class="Symbol">}{</a><a id="1377" href="UALib.Birkhoff.Theorem.html#1174" class="Bound">ssR</a><a id="1380" class="Symbol">}{</a><a id="1382" href="UALib.Birkhoff.Theorem.html#1225" class="Bound">ssA</a><a id="1385" class="Symbol">}</a>

 <a id="1389" class="Comment">-- Birkhoff&#39;s theorem: every variety is an equational class.</a>
 <a id="Birkhoffs-Theorem.birkhoff"></a><a id="1451" href="UALib.Birkhoff.Theorem.html#1451" class="Function">birkhoff</a> <a id="1460" class="Symbol">:</a> <a id="1462" href="MGS-Basic-UF.html#1929" class="Function">is-set</a> <a id="1469" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1471" href="UALib.Birkhoff.Lemmata.html#5547" class="Function">ℭ</a> <a id="1473" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1475" class="Symbol">→</a> <a id="1477" href="UALib.Varieties.ModelTheory.html#3746" class="Function">Mod</a> <a id="1481" href="UALib.Birkhoff.Theorem.html#884" class="Bound">X</a> <a id="1483" class="Symbol">(</a><a id="1484" href="UALib.Varieties.ModelTheory.html#3061" class="Function">Th</a> <a id="1487" href="UALib.Birkhoff.Lemmata.html#5288" class="Function">𝕍</a><a id="1488" class="Symbol">)</a> <a id="1490" href="UALib.Relations.Unary.html#2949" class="Function Operator">⊆</a> <a id="1492" href="UALib.Birkhoff.Lemmata.html#5288" class="Function">𝕍</a>

 <a id="1496" href="UALib.Birkhoff.Theorem.html#1451" class="Function">birkhoff</a> <a id="1505" href="UALib.Birkhoff.Theorem.html#1505" class="Bound">Cset</a> <a id="1510" class="Symbol">{</a><a id="1511" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a><a id="1512" class="Symbol">}</a> <a id="1514" href="UALib.Birkhoff.Theorem.html#1514" class="Bound">MThVA</a> <a id="1520" class="Symbol">=</a> <a id="1522" href="UALib.Birkhoff.Theorem.html#1733" class="Function">γ</a>
  <a id="1526" class="Keyword">where</a>
   <a id="1535" href="UALib.Birkhoff.Theorem.html#1535" class="Function">ϕ</a> <a id="1537" class="Symbol">:</a> <a id="1539" href="MGS-MLTT.html#3074" class="Function">Σ</a> <a id="1541" href="UALib.Birkhoff.Theorem.html#1541" class="Bound">h</a> <a id="1543" href="MGS-MLTT.html#3074" class="Function">꞉</a> <a id="1545" class="Symbol">(</a><a id="1546" href="UALib.Homomorphisms.Basic.html#2281" class="Function">hom</a> <a id="1550" href="UALib.Birkhoff.FreeAlgebra.html#6764" class="Function">𝔉</a> <a id="1552" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a><a id="1553" class="Symbol">)</a> <a id="1555" href="MGS-MLTT.html#3074" class="Function">,</a> <a id="1557" href="UALib.Prelude.Inverses.html#2365" class="Function">Epic</a> <a id="1562" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1564" href="UALib.Birkhoff.Theorem.html#1541" class="Bound">h</a> <a id="1566" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a>
   <a id="1571" href="UALib.Birkhoff.Theorem.html#1535" class="Function">ϕ</a> <a id="1573" class="Symbol">=</a> <a id="1575" class="Symbol">(</a><a id="1576" href="UALib.Birkhoff.FreeAlgebra.html#7491" class="Function">𝔉-lift-hom</a> <a id="1587" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1589" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1591" href="UALib.Birkhoff.Theorem.html#810" class="Bound">𝕏</a> <a id="1593" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1595" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a><a id="1596" class="Symbol">)</a> <a id="1598" href="UALib.Prelude.Preliminaries.html#5763" class="InductiveConstructor Operator">,</a> <a id="1600" href="UALib.Birkhoff.FreeAlgebra.html#8038" class="Function">𝔉-lift-of-epic-is-epic</a> <a id="1623" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1625" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1627" href="UALib.Birkhoff.Theorem.html#810" class="Bound">𝕏</a> <a id="1629" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1631" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a>  <a id="1634" href="UALib.Prelude.Preliminaries.html#10452" class="Function Operator">∥</a> <a id="1636" href="UALib.Birkhoff.Theorem.html#810" class="Bound">𝕏</a> <a id="1638" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1640" href="UALib.Prelude.Preliminaries.html#10452" class="Function Operator">∥</a>

   <a id="1646" href="UALib.Birkhoff.Theorem.html#1646" class="Function">AiF</a> <a id="1650" class="Symbol">:</a> <a id="1652" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1654" href="UALib.Homomorphisms.HomomorphicImages.html#1368" class="Function Operator">is-hom-image-of</a> <a id="1670" href="UALib.Birkhoff.FreeAlgebra.html#6764" class="Function">𝔉</a>
   <a id="1675" href="UALib.Birkhoff.Theorem.html#1646" class="Function">AiF</a> <a id="1679" class="Symbol">=</a> <a id="1681" class="Symbol">(</a><a id="1682" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1684" href="UALib.Prelude.Preliminaries.html#5763" class="InductiveConstructor Operator">,</a> <a id="1686" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1688" href="UALib.Prelude.Preliminaries.html#10375" class="Function">fst</a> <a id="1692" href="UALib.Birkhoff.Theorem.html#1535" class="Function">ϕ</a> <a id="1694" href="UALib.Prelude.Preliminaries.html#10371" class="Function Operator">∣</a> <a id="1696" href="UALib.Prelude.Preliminaries.html#5763" class="InductiveConstructor Operator">,</a> <a id="1698" class="Symbol">(</a><a id="1699" href="UALib.Prelude.Preliminaries.html#10452" class="Function Operator">∥</a> <a id="1701" href="UALib.Prelude.Preliminaries.html#10375" class="Function">fst</a> <a id="1705" href="UALib.Birkhoff.Theorem.html#1535" class="Function">ϕ</a> <a id="1707" href="UALib.Prelude.Preliminaries.html#10452" class="Function Operator">∥</a> <a id="1709" href="UALib.Prelude.Preliminaries.html#5763" class="InductiveConstructor Operator">,</a> <a id="1711" href="UALib.Prelude.Preliminaries.html#10456" class="Function">snd</a> <a id="1715" href="UALib.Birkhoff.Theorem.html#1535" class="Function">ϕ</a><a id="1716" class="Symbol">)</a> <a id="1718" class="Symbol">)</a> <a id="1720" href="UALib.Prelude.Preliminaries.html#5763" class="InductiveConstructor Operator">,</a> <a id="1722" href="UALib.Homomorphisms.Isomorphisms.html#2289" class="Function">refl-≅</a>

   <a id="1733" href="UALib.Birkhoff.Theorem.html#1733" class="Function">γ</a> <a id="1735" class="Symbol">:</a> <a id="1737" href="UALib.Birkhoff.Theorem.html#1511" class="Bound">𝑨</a> <a id="1739" href="UALib.Relations.Unary.html#2667" class="Function Operator">∈</a> <a id="1741" href="UALib.Birkhoff.Lemmata.html#5288" class="Function">𝕍</a>
   <a id="1746" href="UALib.Birkhoff.Theorem.html#1733" class="Function">γ</a> <a id="1748" class="Symbol">=</a> <a id="1750" href="UALib.Varieties.Varieties.html#5895" class="InductiveConstructor">vhimg</a> <a id="1756" class="Symbol">(</a><a id="1757" href="UALib.Birkhoff.Lemmata.html#9255" class="Function">𝔉∈𝕍</a> <a id="1761" href="UALib.Birkhoff.Theorem.html#1505" class="Bound">Cset</a><a id="1765" class="Symbol">)</a> <a id="1767" href="UALib.Birkhoff.Theorem.html#1646" class="Function">AiF</a>

</pre>

Some readers might worry that we haven't quite acheived our goal because what we just proved (<a href="https://ualib.gitlab.io/UALib.Birkhoff.Theorem.html#1487">birkhoff</a>) is not an "if and only if" assertion. Those fears are quickly put to rest by noting that the converse---that every equational class is closed under HSP---was already proved in the [Equation Preservation](UALib.Varieties.Preservation.html) module. Indeed, there we proved the following identity preservation lemmas:

* [(H-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#964) 𝒦 ⊧ p ≋ q → H 𝒦 ⊧ p ≋ q
* [(S-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#2592) 𝒦 ⊧ p ≋ q → S 𝒦 ⊧ p ≋ q
* [(P-id1)](https://ualib.gitlab.io/UALib.Varieties.Preservation.html#4111) 𝒦 ⊧ p ≋ q → P 𝒦 ⊧ p ≋ q

From these it follows that every equational class is a variety.

--------------------------------------------

[← UALib.Birkhoff.Lemmata](UALib.Birkhoff.Lemmata.html)
<span style="float:right;">[UALib.Birkhoff ↑](UALib.Birkhoff.html)</span>

{% include UALib.Links.md %}

